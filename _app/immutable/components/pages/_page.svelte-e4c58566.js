var na=Object.defineProperty;var ia=(s,t,e)=>t in s?na(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var N=(s,t,e)=>(ia(s,typeof t!="symbol"?t+"":t,e),e);import{S as _t,i as vt,s as wt,C as aa,k as Q,q as ye,a as Pe,l as ee,m as k,r as _e,h as x,c as je,n as w,b as J,G as P,I as De,J as oa,D as la,E as ca,F as fa,f as be,t as Se,K as er,L as jr,M as ua,N as fe,e as Be,O as ue,B as it,P as ls,u as et,p as Gs,w as Dt,x as Ot,y as Rt,g as ns,d as is,z as zt,Q as Vs,R as ha,T as dn,U as bn,V as ma}from"../../chunks/index-b2019f8f.js";var Bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},da="Expected a function",ri="__lodash_hash_undefined__",ni=1/0,ba="[object Function]",pa="[object GeneratorFunction]",ga="[object Symbol]",$a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ya=/^\w*$/,_a=/^\./,va=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wa=/[\\^$.*+?()[\]{}|]/g,Ca=/\\(\\)?/g,Ea=/^\[object .+?Constructor\]$/,xa=typeof Bs=="object"&&Bs&&Bs.Object===Object&&Bs,Sa=typeof self=="object"&&self&&self.Object===Object&&self,kr=xa||Sa||Function("return this")();function Aa(s,t){return s==null?void 0:s[t]}function La(s){var t=!1;if(s!=null&&typeof s.toString!="function")try{t=!!(s+"")}catch{}return t}var Ta=Array.prototype,Ma=Function.prototype,ii=Object.prototype,gr=kr["__core-js_shared__"],pn=function(){var s=/[^.]+$/.exec(gr&&gr.keys&&gr.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),ai=Ma.toString,Ir=ii.hasOwnProperty,oi=ii.toString,Pa=RegExp("^"+ai.call(Ir).replace(wa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gn=kr.Symbol,ja=Ta.splice,ka=li(kr,"Map"),Cs=li(Object,"create"),$n=gn?gn.prototype:void 0,yn=$n?$n.toString:void 0;function Nt(s){var t=-1,e=s?s.length:0;for(this.clear();++t<e;){var r=s[t];this.set(r[0],r[1])}}function Ia(){this.__data__=Cs?Cs(null):{}}function Na(s){return this.has(s)&&delete this.__data__[s]}function Fa(s){var t=this.__data__;if(Cs){var e=t[s];return e===ri?void 0:e}return Ir.call(t,s)?t[s]:void 0}function Da(s){var t=this.__data__;return Cs?t[s]!==void 0:Ir.call(t,s)}function Oa(s,t){var e=this.__data__;return e[s]=Cs&&t===void 0?ri:t,this}Nt.prototype.clear=Ia;Nt.prototype.delete=Na;Nt.prototype.get=Fa;Nt.prototype.has=Da;Nt.prototype.set=Oa;function cs(s){var t=-1,e=s?s.length:0;for(this.clear();++t<e;){var r=s[t];this.set(r[0],r[1])}}function Ra(){this.__data__=[]}function za(s){var t=this.__data__,e=tr(t,s);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():ja.call(t,e,1),!0}function Ba(s){var t=this.__data__,e=tr(t,s);return e<0?void 0:t[e][1]}function Ka(s){return tr(this.__data__,s)>-1}function Ga(s,t){var e=this.__data__,r=tr(e,s);return r<0?e.push([s,t]):e[r][1]=t,this}cs.prototype.clear=Ra;cs.prototype.delete=za;cs.prototype.get=Ba;cs.prototype.has=Ka;cs.prototype.set=Ga;function Bt(s){var t=-1,e=s?s.length:0;for(this.clear();++t<e;){var r=s[t];this.set(r[0],r[1])}}function Va(){this.__data__={hash:new Nt,map:new(ka||cs),string:new Nt}}function Ua(s){return sr(this,s).delete(s)}function Ha(s){return sr(this,s).get(s)}function Wa(s){return sr(this,s).has(s)}function Za(s,t){return sr(this,s).set(s,t),this}Bt.prototype.clear=Va;Bt.prototype.delete=Ua;Bt.prototype.get=Ha;Bt.prototype.has=Wa;Bt.prototype.set=Za;function tr(s,t){for(var e=s.length;e--;)if(io(s[e][0],t))return e;return-1}function Xa(s,t){t=Qa(t,s)?[t]:Ja(t);for(var e=0,r=t.length;s!=null&&e<r;)s=s[ro(t[e++])];return e&&e==r?s:void 0}function qa(s){if(!fi(s)||to(s))return!1;var t=ao(s)||La(s)?Pa:Ea;return t.test(no(s))}function Ya(s){if(typeof s=="string")return s;if(Fr(s))return yn?yn.call(s):"";var t=s+"";return t=="0"&&1/s==-ni?"-0":t}function Ja(s){return ci(s)?s:so(s)}function sr(s,t){var e=s.__data__;return eo(t)?e[typeof t=="string"?"string":"hash"]:e.map}function li(s,t){var e=Aa(s,t);return qa(e)?e:void 0}function Qa(s,t){if(ci(s))return!1;var e=typeof s;return e=="number"||e=="symbol"||e=="boolean"||s==null||Fr(s)?!0:ya.test(s)||!$a.test(s)||t!=null&&s in Object(t)}function eo(s){var t=typeof s;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?s!=="__proto__":s===null}function to(s){return!!pn&&pn in s}var so=Nr(function(s){s=lo(s);var t=[];return _a.test(s)&&t.push(""),s.replace(va,function(e,r,n,a){t.push(n?a.replace(Ca,"$1"):r||e)}),t});function ro(s){if(typeof s=="string"||Fr(s))return s;var t=s+"";return t=="0"&&1/s==-ni?"-0":t}function no(s){if(s!=null){try{return ai.call(s)}catch{}try{return s+""}catch{}}return""}function Nr(s,t){if(typeof s!="function"||t&&typeof t!="function")throw new TypeError(da);var e=function(){var r=arguments,n=t?t.apply(this,r):r[0],a=e.cache;if(a.has(n))return a.get(n);var l=s.apply(this,r);return e.cache=a.set(n,l),l};return e.cache=new(Nr.Cache||Bt),e}Nr.Cache=Bt;function io(s,t){return s===t||s!==s&&t!==t}var ci=Array.isArray;function ao(s){var t=fi(s)?oi.call(s):"";return t==ba||t==pa}function fi(s){var t=typeof s;return!!s&&(t=="object"||t=="function")}function oo(s){return!!s&&typeof s=="object"}function Fr(s){return typeof s=="symbol"||oo(s)&&oi.call(s)==ga}function lo(s){return s==null?"":Ya(s)}function co(s,t,e){var r=s==null?void 0:Xa(s,t);return r===void 0?e:r}var fo=co;function $r(s,t,e){return e=e||" ",s.length>t?s:(t-=s.length,e+=e.repeat(t),s+e.slice(0,t))}class Jt extends Error{static buildMessage(t,e){function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function n(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function a(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function l(p){switch(p.type){case"literal":return'"'+n(p.text)+'"';case"class":const f=p.parts.map($=>Array.isArray($)?a($[0])+"-"+a($[1]):a($));return"["+(p.inverted?"^":"")+f+"]";case"any":return"any character";case"end":return"end of input";case"other":return p.description}}function d(p){const f=p.map(l);let $,C;if(f.sort(),f.length>0){for($=1,C=1;$<f.length;$++)f[$-1]!==f[$]&&(f[C]=f[$],C++);f.length=C}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function b(p){return p?'"'+n(p)+'"':"end of input"}return"Expected "+d(t)+" but "+b(e)+" found."}constructor(t,e,r,n){super(),this.message=t,this.expected=e,this.found=r,this.location=n,this.name="PeggySyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,Jt.prototype):this.__proto__=Jt.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Jt)}format(t){let e="Error: "+this.message;if(this.location){let r=null,n;for(n=0;n<t.length;n++)if(t[n].grammarSource===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}let a=this.location.start,l=this.location.source+":"+a.line+":"+a.column;if(r){let d=this.location.end,b=$r("",a.line.toString().length," "),p=r[a.line-1],f=a.line===d.line?d.column:p.length+1;e+=`
 --> `+l+`
`+b+` |
`+a.line+" | "+p+`
`+b+" | "+$r("",a.column-1," ")+$r("",f-a.column,"^")}else e+=`
 at `+l}return e}}function uo(s,t){t=t!==void 0?t:{};const e={},r=t.grammarSource,n={Chord:Lt};let a=Lt;const l=function(g){return{type:"chord",...g,column:Kt().start.column}},d="#",b=we("#",!1),p="b",f=we("b",!1),$=/^[a-zA-Z0-9()#+]/,C=xt([["a","z"],["A","Z"],["0","9"],"(",")","#","+"],!1,!1),S=function(g,L,E,D){return{base:g,modifier:L,suffix:E,...D,chordType:"symbol"}},j=/^[A-Ga-g]/,M=xt([["A","G"],["a","g"]],!1,!1),G="/",se=we("/",!1),K=function(g,L){return{bassBase:g,bassModifier:L}},q=function(g,L,E,D){return{base:L,modifier:g,suffix:E,...D,chordType:"numeral"}},V="III",ie=we("III",!1),ve="iii",oe=we("iii",!1),W="VII",Ae=we("VII",!1),I="vii",U=we("vii",!1),Y="II",Te=we("II",!1),pe="ii",Me=we("ii",!1),Ce="IV",he=we("IV",!1),me="iv",ke=we("iv",!1),ge="VI",We=we("VI",!1),Ke="vi",Ge=we("vi",!1),Z="I",de=we("I",!1),Ie="i",at=we("i",!1),Ze="V",tt=we("V",!1),Ct="v",mt=we("v",!1),Ne=function(g,L){return{bassBase:L,bassModifier:g}},dt=function(g,L,E,D){return{base:L,modifier:g,suffix:E,...D,chordType:"numeric"}},Xe=/^[1-7]/,qe=xt([["1","7"]],!1,!1);let A=0,Ve=0;const ot=[{line:1,column:1}];let Re=0,Et=[],lt;if(t.startRule!==void 0){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');a=n[t.startRule]}function Kt(){return At(Ve,A)}function we(g,L){return{type:"literal",text:g,ignoreCase:L}}function xt(g,L,E){return{type:"class",parts:g,inverted:L,ignoreCase:E}}function Gt(){return{type:"end"}}function St(g){let L=ot[g],E;if(L)return L;for(E=g-1;!ot[E];)E--;for(L=ot[E],L={line:L.line,column:L.column};E<g;)s.charCodeAt(E)===10?(L.line++,L.column=1):L.column++,E++;return ot[g]=L,L}function At(g,L){const E=St(g),D=St(L);return{source:r,start:{offset:g,line:E.line,column:E.column},end:{offset:L,line:D.line,column:D.column}}}function le(g){A<Re||(A>Re&&(Re=A,Et=[]),Et.push(g))}function fs(g,L,E){return new Jt(Jt.buildMessage(g,L),g,L,E)}function Lt(){let g,L;return g=A,L=hs(),L===e&&(L=m(),L===e&&(L=Tt())),L!==e&&(Ve=g,L=l(L)),g=L,g}function Ye(){let g;return s.charCodeAt(A)===35?(g=d,A++):(g=e,le(b)),g===e&&(s.charCodeAt(A)===98?(g=p,A++):(g=e,le(f))),g}function bt(){let g,L;for(g=[],$.test(s.charAt(A))?(L=s.charAt(A),A++):(L=e,le(C));L!==e;)g.push(L),$.test(s.charAt(A))?(L=s.charAt(A),A++):(L=e,le(C));return g}function Tt(){let g,L,E,D,ne;return g=A,L=Mt(),L!==e?(E=Ye(),E===e&&(E=null),E!==e?(D=A,ne=bt(),ne!==e?D=s.substring(D,A):D=ne,D!==e?(ne=us(),ne===e&&(ne=null),ne!==e?(Ve=g,L=S(L,E,D,ne),g=L):(A=g,g=e)):(A=g,g=e)):(A=g,g=e)):(A=g,g=e),g}function Mt(){let g;return j.test(s.charAt(A))?(g=s.charAt(A),A++):(g=e,le(M)),g}function us(){let g,L,E,D;return g=A,s.charCodeAt(A)===47?(L=G,A++):(L=e,le(se)),L!==e?(E=Mt(),E!==e?(D=Ye(),D===e&&(D=null),D!==e?(Ve=g,L=K(E,D),g=L):(A=g,g=e)):(A=g,g=e)):(A=g,g=e),g}function hs(){let g,L,E,D,ne;return g=A,L=Ye(),L===e&&(L=null),L!==e?(E=Vt(),E!==e?(D=A,ne=bt(),ne!==e?D=s.substring(D,A):D=ne,D!==e?(ne=ms(),ne===e&&(ne=null),ne!==e?(Ve=g,L=q(L,E,D,ne),g=L):(A=g,g=e)):(A=g,g=e)):(A=g,g=e)):(A=g,g=e),g}function Vt(){let g;return s.substr(A,3)===V?(g=V,A+=3):(g=e,le(ie)),g===e&&(s.substr(A,3)===ve?(g=ve,A+=3):(g=e,le(oe)),g===e&&(s.substr(A,3)===W?(g=W,A+=3):(g=e,le(Ae)),g===e&&(s.substr(A,3)===I?(g=I,A+=3):(g=e,le(U)),g===e&&(s.substr(A,2)===Y?(g=Y,A+=2):(g=e,le(Te)),g===e&&(s.substr(A,2)===pe?(g=pe,A+=2):(g=e,le(Me)),g===e&&(s.substr(A,2)===Ce?(g=Ce,A+=2):(g=e,le(he)),g===e&&(s.substr(A,2)===me?(g=me,A+=2):(g=e,le(ke)),g===e&&(s.substr(A,2)===ge?(g=ge,A+=2):(g=e,le(We)),g===e&&(s.substr(A,2)===Ke?(g=Ke,A+=2):(g=e,le(Ge)),g===e&&(s.charCodeAt(A)===73?(g=Z,A++):(g=e,le(de)),g===e&&(s.charCodeAt(A)===105?(g=Ie,A++):(g=e,le(at)),g===e&&(s.charCodeAt(A)===86?(g=Ze,A++):(g=e,le(tt)),g===e&&(s.charCodeAt(A)===118?(g=Ct,A++):(g=e,le(mt))))))))))))))),g}function ms(){let g,L,E,D;return g=A,s.charCodeAt(A)===47?(L=G,A++):(L=e,le(se)),L!==e?(E=Ye(),E===e&&(E=null),E!==e?(D=Vt(),D!==e?(Ve=g,L=Ne(E,D),g=L):(A=g,g=e)):(A=g,g=e)):(A=g,g=e),g}function m(){let g,L,E,D,ne;return g=A,L=Ye(),L===e&&(L=null),L!==e?(E=X(),E!==e?(D=A,ne=bt(),ne!==e?D=s.substring(D,A):D=ne,D!==e?(ne=ct(),ne===e&&(ne=null),ne!==e?(Ve=g,L=dt(L,E,D,ne),g=L):(A=g,g=e)):(A=g,g=e)):(A=g,g=e)):(A=g,g=e),g}function X(){let g;return Xe.test(s.charAt(A))?(g=s.charAt(A),A++):(g=e,le(qe)),g}function ct(){let g,L,E,D;return g=A,s.charCodeAt(A)===47?(L=G,A++):(L=e,le(se)),L!==e?(E=Ye(),E===e&&(E=null),E!==e?(D=X(),D!==e?(Ve=g,L=Ne(E,D),g=L):(A=g,g=e)):(A=g,g=e)):(A=g,g=e),g}if(lt=a(),lt!==e&&A===s.length)return lt;throw lt!==e&&A<s.length&&le(Gt()),fs(Et,Re<s.length?s.charAt(Re):null,Re<s.length?At(Re,Re+1):At(Re,Re))}const ho=uo,Ft="verse",$t="chorus",yt="none",Dr="indeterminate",Er="tab",Qt="symbol",es="numeric",kt="numeral",xr=["I","II","III","IV","V","VI","VII"],mo="A".charCodeAt(0),bo="G".charCodeAt(0),_n={1:0,2:2,3:4,4:5,5:7,6:9,7:11},vn={1:0,2:2,3:3,4:5,5:7,6:8,7:11};function po(s){return s.toUpperCase().charCodeAt(0)}function wn(s,t,e){let r=s;return r<t?r+=7:r>e&&(r-=7),r}function go(s){for(let t=0,e=xr.length;t<e;t+=1){const r=xr[t];if(r===s||r.toLowerCase()===s)return t+1}return null}function $o(s){return xr[s-1]}class qt{constructor({note:t,type:e,minor:r=!1}){N(this,"minor",!1);this._note=t,this.type=e,this.minor=r}static parse(t){const e=t.toString();if(/^[A-Ga-g]$/.test(e))return new qt({note:e.toUpperCase(),type:Qt});if(/^[1-7]$/.test(e))return new qt({note:parseInt(e,10),type:es});const r=go(e);if(r)return new qt({note:r,type:kt,minor:e.toLowerCase()===t});throw new Error(`Invalid note ${t}`)}toNumeral(){if(this.isNumeral())return this.clone();if(this.isNumeric())return this.set({type:kt});throw new Error(`Converting a ${this.type} note to numeral is not supported`)}toNumeric(){if(this.isNumeric())return this.clone();if(this.isNumeral())return this.set({type:es});throw new Error(`Converting a ${this.type} note to numeric is not supported`)}isMinor(){return this.minor}equals(t){return this._note===t._note&&this.type===t.type&&this.minor===t.minor}clone(){return this.set({})}up(){return this.change(1)}down(){return this.change(-1)}isOneOf(...t){return t.includes(this._note)}isNumeric(){return this.is(es)}isChordSymbol(){return this.is(Qt)}isNumeral(){return this.is(kt)}is(t){return this.type===t}getTransposeDistance(t){if(typeof this._note=="number"){if(t&&this._note in vn)return vn[this._note];if(this._note in _n)return _n[this._note]}return 0}change(t){if(this.isChordSymbol()){let r;return r=po(this._note),r+=t,r=wn(r,mo,bo),this.set({note:String.fromCharCode(r)})}let e=wn(this._note+t,1,7);return e<1?e+=7:e>7&&(e-=7),this.set({note:e})}get note(){if(this.isNumeral()){const t=$o(this._note);return this.isMinor()?t.toLowerCase():t}return this._note}toString(){const t=this.note;switch(this.type){case kt:return`${this.minor?t.toLowerCase():t.toUpperCase()}`;default:return`${this.note}`}}set(t){return new qt({note:this._note,type:this.type,minor:this.minor,...t})}}var Cn=qt;const yo={Ab:{B:"Cb"},Cb:{B:"Cb","A#":"Bb",E:"Fb"},C:{"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},"C#":{Eb:"D#",Bb:"A#"},Db:{B:"Cb","F#":"Gb"},D:{"D#":"Eb","A#":"Bb",Gb:"F#"},Eb:{"D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},E:{Ab:"G#","A#":"Bb","D#":"Eb",Db:"C#",Eb:"D#"},F:{"A#":"Bb","F#":"Gb","C#":"Db","D#":"Eb","G#":"Ab"},"F#":{Bb:"A#",Eb:"D#"},Gb:{"A#":"Bb","D#":"Eb","G#":"Ab",B:"Cb",E:"Fb"},G:{"A#":"Bb","D#":"Eb","G#":"Ab","C#":"Db"},"G#":{"A#":"Bb","D#":"Eb",Cb:"B#"},Am:{Gb:"G","G#":"Ab","F#":"Gb","C#":"Db","D#":"Eb","A#":"Bb"},Bbm:{Cb:"B",Gb:"F#"},Bm:{"A#":"Bb","D#":"Eb"},"C#m":{"A#":"Bb","D#":"Eb",Gb:"F#"},Cm:{"G#":"Ab","A#":"Bb","D#":"Eb","F#":"Gb","C#":"Db"},Dm:{"A#":"Bb","D#":"Eb","F#":"Gb","G#":"Ab","C#":"Db"},Em:{"A#":"Bb","D#":"Eb","C#":"Db"},"F#m":{"A#":"Bb","D#":"Eb",Gb:"F#",Ab:"G#",Db:"C#"},Fm:{"G#":"Ab","A#":"Bb","D#":"Eb","F#":"Gb","C#":"Db"},Gm:{"G#":"Ab","A#":"Bb","D#":"Eb","C#":"Db","F#":"Gb"},"G#m":{"A#":"Bb","D#":"Eb"},B:{Eb:"D#"}};var _o=yo;const ui=s=>s.items.some(t=>t instanceof Oe&&!!t.chords),Or=s=>"evaluate"in s&&typeof s.evaluate=="function",En=(s,t)=>{let e=s;for(let r=s.length;r<t;r+=1,e+=" ");return e};function vo(s){return s.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function wo(s,t=""){return Object.entries(s).map(([e,r])=>{const n=Object.entries(r).map(([l,d])=>`${vo(l)}: ${d};`).join(`
  `);return`
${`${t} ${e}`.trim()} {
  ${n}
}`.substring(1)}).join(`

`)}function hi(s){try{throw new Error(`DEPRECATION: ${s}`)}catch(t){const e=t,r=globalThis.process;typeof r=="object"&&typeof r.emitWarning=="function"?r.emitWarning(`${s}
${e.stack}`):console.warn(`${s}
${e.stack}`)}}function xn(s){throw new Error(`BREAKING CHANGE: ${s}`)}function rr(s){return s==null||s===""}function Co(s){return typeof s!="string"?!1:s[0]==="m"&&s.substring(0,3).toLowerCase()!=="maj"}function mi(s){return s.replace(/\r\n?/g,`
`)}const ut="b",ht="#",Eo=/^(?<note>[A-G])(?<modifier>#|b)?(?<minor>m)?$/i,xo=/^(?<modifier>#|b)?(?<note>[1-7])(?<minor>m)?$/,So=/^(?<modifier>#|b)?(?<note>I{1,3}|IV|VI{0,2}|i{1,3}|iv|vi{0,2})$/,Sn=[Eo,xo,So];function Ao(s){switch(s){case ht:return 1;case ut:return-1;default:return 0}}class nt{constructor({note:t,modifier:e=null,minor:r=!1}){N(this,"modifier",null);N(this,"minor",!1);this.note=t instanceof Cn?t:Cn.parse(t),this.modifier=e||null,this.minor=r||!1,this.minor&&(this.note.minor=!0)}get unicodeModifier(){switch(this.modifier){case ut:return"♭";case ht:return"♯";default:return null}}static parse(t){if(!t||rr(t))return null;for(let e=0,r=Sn.length;e<r;e+=1){const n=t.match(Sn[e]);if(n){const{note:a,modifier:l,minor:d}=n.groups;return new nt({note:a,modifier:l,minor:!!d})}}return null}static parseOrFail(t){const e=this.parse(t);if(!e)throw new Error(`Failed to parse ${t}`);return e}static wrap(t){return t instanceof nt?t:this.parse(t)}static wrapOrFail(t=null){if(t===null)throw new Error("Unexpected null key");const e=this.wrap(t);if(e===null)throw new Error(`Failed: invalid key ${t}`);return e}static toString(t){return`${nt.wrapOrFail(t)}`}static distance(t,e){return this.wrapOrFail(t).distanceTo(e)}distanceTo(t){const e=nt.wrapOrFail(t);let r=this.useModifier(e.modifier),n=0;for(;!r.equals(e)&&n<20;)r=r.transposeUp().useModifier(e.modifier),n+=1;return n}isMinor(){return this.minor||this.note.isMinor()}clone(){return this.set({})}toChordSymbol(t){if(this.is(Qt))return this.clone();const e=this.note.getTransposeDistance(t.minor)+Ao(this.modifier);return t.transpose(e).normalize().useModifier(t.modifier)}toChordSymbolString(t){return this.toChordSymbol(t).toString()}is(t){return this.note.is(t)}isNumeric(){return this.is(es)}isChordSymbol(){return this.is(Qt)}isNumeral(){return this.is(kt)}equals(t){return this.note.equals(t.note)&&this.modifier===t.modifier}toNumeric(t=null){if(this.isNumeric())return this.clone();if(this.isNumeral())return this.set({note:this.note.toNumeric()});if(!t)throw new Error("key is required");return this.transposeNoteUpToKey(1,t)}toNumericString(t=null){return this.toNumeric(t).toString()}toNumeral(t=null){return this.isNumeral()?this.clone():this.isNumeric()?this.set({note:this.note.toNumeral()}):t?this.transposeNoteUpToKey("I",t):this.clone()}toNumeralString(t=null){return this.toNumeral(t).toString()}toString({showMinor:t=!0,useUnicodeModifier:e=!1}={}){switch(this.note.type){case Qt:return this.formatChordSymbolString(t,e);case es:return this.formatNumericString(t);case kt:return this.formatNumeralString();default:throw new Error(`Unexpected note type ${this.note.type}`)}}formatChordSymbolString(t,e){const r=e?this.unicodeModifier:this.modifier;return`${this.note}${r||""}${this.minor&&t?"m":""}`}formatNumericString(t){return`${this.modifier||""}${this.note}${this.minor&&t?"m":""}`}formatNumeralString(){return`${this.modifier||""}${this.note}`}transpose(t){if(t===0)return this;const e=this.modifier;let r=this.clone();const n=t<0?"transposeDown":"transposeUp";for(let a=0,l=Math.abs(t);a<l;a+=1)r=r[n]();return r.useModifier(e)}transposeUp(){return this.modifier===ut?this.set({modifier:null}):this.note.isOneOf(3,7,"E","B")?this.set({note:this.note.up()}):this.modifier===ht?this.set({note:this.note.up(),modifier:null}):this.set({modifier:ht})}transposeDown(){return this.modifier===ht?this.set({modifier:null}):this.note.isOneOf(1,4,"C","F")?this.set({note:this.note.down()}):this.modifier===ut?this.set({note:this.note.down(),modifier:null}):this.set({modifier:ut})}useModifier(t){return this.modifier===ut&&t===ht?this.set({note:this.note.down(),modifier:ht}):this.modifier===ht&&t===ut?this.set({note:this.note.up(),modifier:ut}):this.clone()}normalize(){return this.modifier===ht&&this.note.isOneOf(3,7,"E","B")?this.set({note:this.note.up(),modifier:null}):this.modifier===ut&&this.note.isOneOf(1,4,"C","F")?this.set({note:this.note.down(),modifier:null}):this.clone()}removeMinor(){return this.set({minor:!1})}normalizeEnharmonics(t){if(t){const e=nt.wrapOrFail(t).toString({showMinor:!0}),r=_o[e],n=this.toString({showMinor:!1});if(r&&r[n])return nt.parseOrFail(r[n])}return this.clone()}set(t){return new nt({note:this.note.clone(),modifier:this.modifier,minor:this.minor,...t})}transposeNoteUpToKey(t,e){let r=new nt({note:t}),n=e.clone();const a=this.clone().normalize().useModifier(e.modifier).normalizeEnharmonics(e);for(;!n.equals(a);)r=r.transposeUp().useModifier(e.modifier),n=n.transposeUp().normalize().useModifier(e.modifier).normalizeEnharmonics(e);return r}}var Qe=nt;const Lo={2:"2",4:"sus",5:"5",6:"6",7:"7",9:"9",11:"11",13:"13",42:"4(2)",69:"6(9)","(#4)":"(#4)","#4":"(#4)","+4":"(#4)","(+4)":"(#4)","(11)":"(11)",add11:"(11)","(add11)":"(11)","(13)":"(13)",add13:"(13)","(add13)":"(13)","(2)":"(2)",add2:"(2)","(add2)":"(2)","(4)":"(4)",add4:"(4)","(add4)":"(4)","sus(4)":"(4)","(6)":"(6)",add6:"(6)","(add6)":"(6)","(7)":"(7)","(9)":"(9)",add9:"(9)","(add9)":"(9)","(b5)":"(b5)","-5":"(b5)","(-5)":"(b5)",b5:"(b5)","2(6)":"2(6)","(b6)":"(b6)","(unis)":"(unis)",unis:"(unis)","[blank]":"[blank]",maj:"[blank]",major:"[blank]",M:"[blank]",ma:"[blank]",Ma:"[blank]",Majj:"[blank]","+":"+",aug:"+","(#5)":"+","#5":"+","+5":"+","(+5)":"+",x:"+",dom11:"11","dom 11":"11","11(#5)":"11(#5)","11#5":"11(#5)","11+5":"11(#5)","11(+5)":"11(#5)","11(#9)":"11(#9)","11#9":"11(#9)","11+9":"11(#9)","11(+9)":"11(#9)","11(b13)":"11(b13)","11b13":"11(b13)","11-13":"11(b13)","11(-13)":"11(b13)","11(b5)":"11(b5)","11b5":"11(b5)","11-5":"11(b5)","11(-5)":"11(b5)","11(b9)":"11(b9)","11b9":"11(b9)","11-9":"11(b9)","11(-9)":"11(b9)","11sus4":"11sus4","11sus":"11sus4",m11sus4:"11sus4",m11sus:"11sus4",dom13:"13","dom 13":"13","13(#11)":"13(#11)","13#11":"13(#11)","13+11":"13(#11)","13(+11)":"13(#11)","13(#5)":"13(#5)","13#5":"13(#5)","13+5":"13(#5)","13(+5)":"13(#5)","13(#9)":"13(#9)","13#9":"13(#9)","13(+9)":"13(#9)","13+9":"13(#9)","13(#9#5)":"13(#9#5)","13#9#5":"13(#9#5)","13(+9+5)":"13(#9#5)","13+9+5":"13(#9#5)","13(#9b5)":"13(#9b5)","13#9b5":"13(#9b5)","13(+9-5)":"13(#9b5)","13+9-5":"13(#9b5)","13(add4)":"13(add4)","13(b5)":"13(b5)","13b5":"13(b5)","13-5":"13(b5)","13(-5)":"13(b5)","13(b9)":"13(b9)","13b9":"13(b9)","13-9":"13(b9)","13(-9)":"13(b9)","13(b9#5)":"13(b9#5)","13b9#5":"13(b9#5)","13-9+5":"13(b9#5)","13(-9+5)":"13(b9#5)","13(b9b5)":"13(b9b5)","13b9b5":"13(b9b5)","13-9-5":"13(b9b5)","13(-9-5)":"13(b9b5)","13sus4":"13sus4","13sus":"13sus4",m13sus4:"13sus4",m13sus:"13sus4",sus2:"2","add9(no3)":"2","2(#11)":"2(#11)","2(#4)":"2(#4)","2+4":"2(#4)","2#4":"2(#4)","2(+4)":"2(#4)","(#4)2":"2(#4)","2(#4)(#42)(2#4)":"2(#4)(#42)(2#4)","2(+7)":"2(+7)","2(4)":"2(4)","sus2(4)":"2(4)","2(ma7)":"2(ma7)","2(no3)":"2(no3)","4(2)":"4(2)",sus42:"4(2)",no3:"5","(no3)":"5","(no 3)":"5","(no 3rd)":"5","5(no3)":"5","6(2)":"6(2)","6(b9)":"6(b9)","6(no3)":"6(no3)","6(9)":"6(9)","6(add9)":"6(9)",dom7:"7","dom 7":"7","dom 7th":"7","7(#11)":"7(#11)","7#11":"7(#11)","7+11":"7(#11)","7(+11)":"7(#11)","7(#5)":"7(#5)",aug7:"7(#5)","7#5":"7(#5)","7+5":"7(#5)","7(+5)":"7(#5)",x7:"7(#5)","aug 7":"7(#5)","aug 7th":"7(#5)","7(#5#11)":"7(#5#11)","7#5#11":"7(#5#11)","7+5+11":"7(#5#11)","7(+5+11)":"7(#5#11)","7(#9)":"7(#9)","7#9":"7(#9)","7+9":"7(#9)","7(+9)":"7(#9)","7(#9#5)":"7(#9#5)","7(#5#9)":"7(#9#5)","7#5#9":"7(#9#5)","7+5+9":"7(#9#5)","7(+5+9)":"7(#9#5)","7(#9b13)":"7(#9b13)","7#9b13":"7(#9b13)","7(+9-13)":"7(#9b13)","7+9-13":"7(#9b13)","7(b13#9)":"7(#9b13)","7b13#9":"7(#9b13)","7-13+9":"7(#9b13)","7(-13+9)":"7(#9b13)","7(#9b5)":"7(#9b5)","7(6)":"7(6)","7(b13)":"7(b13)","7b13":"7(b13)","7-13":"7(b13)","7(-13)":"7(b13)","7(b5)":"7(b5)","7b5":"7(b5)","7-5":"7(b5)","7(-5)":"7(b5)","7(b5#11)":"7(b5#11)","7b5#11":"7(b5#11)","7-5+11":"7(b5#11)","7(-5+11)":"7(b5#11)","7(b5#9)":"7(b5#9)","7b5#9":"7(b5#9)","7-5+9":"7(b5#9)","7(-5+9)":"7(b5#9)","7(b5b9)":"7(b5b9)","7b5b9":"7(b5b9)","7-5-9":"7(b5b9)","7(-5-9)":"7(b5b9)","7(b9)":"7(b9)","7b9":"7(b9)","7-9":"7(b9)","7(-9)":"7(b9)","7(b9#5)":"7(b9#5)","7(#5b9)":"7(b9#5)","7#5b9":"7(b9#5)","7+5-9":"7(b9#5)","7(+5-9)":"7(b9#5)","7(b9b13)":"7(b9b13)","7b9b13":"7(b9b13)","7-9-13":"7(b9b13)","7(-9-13)":"7(b9b13)","7(b13b9)":"7(b9b13)","7b13b9":"7(b9b13)","7-13-9":"7(b9b13)","7(-13-9)":"7(b9b13)","7(b9b5)":"7(b9b5)","7(no3)":"7(no3)","7aug5":"7aug5","7b9sus4":"7b9sus4","7sus(6)":"7sus(6)","7sus(b9)":"7sus(b9)","7sus4":"7sus4","7sus":"7sus4",dom9:"9","dom 9":"9","9(#11)":"9(#11)","9#11":"9(#11)","9+11":"9(#11)","9(+11)":"9(#11)","9(#5)":"9(#5)","9#5":"9(#5)","9+5":"9(#5)","9(+5)":"9(#5)",aug9:"9(#5)",x9:"9(#5)","9(b13)":"9(b13)","9b13":"9(b13)","9-13":"9(b13)","9(-13)":"9(b13)","9(b5)":"9(b5)","9b5":"9(b5)","9-5":"9(b5)","9(-5)":"9(b5)","9aug":"9aug","9sus4":"9sus4","9sus":"9sus4",m9sus4:"9sus4",m9sus:"9sus4","b69(#11)":"b69(#11)",b69sus:"b69sus",b9sus:"b9sus",dim:"dim","m(b5)":"dim",mb5:"dim","m-5":"dim","m(-5)":"dim","-(b5)":"dim","-b5":"dim",dim7:"dim7",o7:"dim7","dim 7":"dim7","dim 7th":"dim7",m:"m",mi:"m",min:"m",minor:"m","-":"m","m(11)":"m(11)","m(add11)":"m(11)","m(4)":"m(4)","m(add4)":"m(4)","m(9)":"m(9)","m(add9)":"m(9)","m(ma7)":"m(ma7)","m(M7)":"m(ma7)","mi(maj7)":"m(ma7)","min(maj7)":"m(ma7)","m(maj7)":"m(ma7)","m(+7)":"m(ma7)","m+7":"m(ma7)","m(ma9)":"m(ma9)","m(M9)":"m(ma9)","mi(maj9)":"m(ma9)","min(maj9)":"m(ma9)","m(maj9)":"m(ma9)","m(+9)":"m(ma9)","m+9":"m(ma9)","m(no5)":"m(no5)",m11:"m11",mi11:"m11",min11:"m11","-11":"m11","m11(#5)":"m11(#5)","m11#5":"m11(#5)","m11+5":"m11(#5)","m11(+5)":"m11(#5)","-11(#5)":"m11(#5)","-11#5":"m11(#5)","m9+5":"m9(#5)","-11(+5)":"m11(#5)","m11(#9)":"m11(#9)","m11#9":"m11(#9)","m11+9":"m11(#9)","m11(+9)":"m11(#9)","-11(#9)":"m11(#9)","-11#9":"m11(#9)","-11+9":"m11(#9)","-11(+9)":"m11(#9)","m11(#9#5)":"m11(#9#5)","m11(#5#9)":"m11(#9#5)","m11#5#9":"m11(#9#5)","m11+5+9":"m11(#9#5)","m11(+5+9)":"m11(#9#5)","-11(#5#9)":"m11(#9#5)","-11#5#9":"m11(#9#5)","m9+5+9":"m11(#9#5)","-11(+5+9)":"m11(#9#5)","m11(#9b13)":"m11(#9b13)","m11#9b13":"m11(#9b13)","m11+9-13":"m11(#9b13)","m11(+9-13)":"m11(#9b13)","-11(#9b13)":"m11(#9b13)","-11#9b13":"m11(#9b13)","-11+9-13":"m11(#9b13)","-11(+9-13)":"m11(#9b13)","m11(b13)":"m11(b13)",m11b13:"m11(b13)","m11-13":"m11(b13)","m11(-13)":"m11(b13)","-11(b13)":"m11(b13)","-11b13":"m11(b13)","-11-13":"m11(b13)","-11(-13)":"m11(b13)","m11(b13#5)":"m11(b13#5)","m11(#5b13)":"m11(b13#5)","m11#5b13":"m11(b13#5)","m11+5-13":"m11(b13#5)","m11(+5-13)":"m11(b13#5)","-11(#5b13)":"m11(b13#5)","-11#5b13":"m11(b13#5)","-11+5-13":"m11(b13#5)","-11(+5-13)":"m11(b13#5)","m11(b5)":"m11(b5)",m11b5:"m11(b5)","m11-5":"m11(b5)","m11(-5)":"m11(b5)","-11(b5)":"m11(b5)","-11b5":"m11(b5)","-9-5":"m9(b5)","-11(-5)":"m11(b5)","m11(b5#9)":"m11(b5#9)","m11b5#9":"m11(b5#9)","m11-5+9":"m11(b5#9)","m11(-5+9)":"m11(b5#9)","-11(b5#9)":"m11(b5#9)","-11b5#9":"m11(b5#9)","-11-5+9":"m11(b5#9)","-11(-5+9)":"m11(b5#9)","m11(b5b13)":"m11(b5b13)",m11b5b13:"m11(b5b13)","m11(-5-13)":"m11(b5b13)","m11-5-13":"m11(b5b13)","-11(b5b13)":"m11(b5b13)","-11b5b13":"m11(b5b13)","-11(-5-13)":"m11(b5b13)","-11-5-13":"m11(b5b13)","m11(b5b9)":"m11(b5b9)",m11b5b9:"m11(b5b9)","m11-5-9":"m11(b5b9)","m11(-5-9)":"m11(b5b9)","-11(b5b9)":"m11(b5b9)","-11b5b9":"m11(b5b9)","-11-5-9":"m11(b5b9)","-11(-5-9)":"m11(b5b9)","m11(b9)":"m11(b9)",m11b9:"m11(b9)","m11(-9)":"m11(b9)","m11-9":"m11(b9)","-11(b9)":"m11(b9)","-11b9":"m11(b9)","-11(-9)":"m11(b9)","-11-9":"m11(b9)","m11(b9#5)":"m11(b9#5)","m11(#5b9)":"m11(b9#5)","m11#5b9":"m11(b9#5)","m11+5-9":"m11(b9#5)","m11(+5-9)":"m11(b9#5)","-11(#5b9)":"m11(b9#5)","-11#5b9":"m11(b9#5)","m9+5-9":"m11(b9#5)","-11(+5-9)":"m11(b9#5)","m11(b9b13)":"m11(b9b13)",m11b9b13:"m11(b9b13)","m11(-9-13)":"m11(b9b13)","m11-9-13":"m11(b9b13)","-11(b9b13)":"m11(b9b13)","-11b9b13":"m11(b9b13)","-11(-9-13)":"m11(b9b13)","-11-9-13":"m11(b9b13)",m13:"m13",mi13:"m13",min13:"m13","-13":"m13","m13(#11)":"m13(#11)","m13#11":"m13(#11)","m13+11":"m13(#11)","m13(+11)":"m13(#11)","-13(#11)":"m13(#11)","-13#11":"m13(#11)","-13+11":"m13(#11)","-13(+11)":"m13(#11)","m13(#5)":"m13(#5)","m13#5":"m13(#5)","m13+5":"m13(#5)","m13(+5)":"m13(#5)","-13(#5)":"m13(#5)","-13#5":"m13(#5)","-13(+5)":"m13(#5)","m13(#9)":"m13(#9)","m13#9":"m13(#9)","m13(+9)":"m13(#9)","m13+9":"m13(#9)","-13(#9)":"m13(#9)","-13#9":"m13(#9)","-13(+9)":"m13(#9)","-13+9":"m13(#9)","m13(b5)":"m13(b5)",m13b5:"m13(b5)","m13-5":"m13(b5)","m13(-5)":"m13(b5)","-13(b5)":"m13(b5)","-13b5":"m13(b5)","-13-5":"m13(b5)","-13(-5)":"m13(b5)","m13(b9)":"m13(b9)",m13b9:"m13(b9)","m13-9":"m13(b9)","m13(-9)":"m13(b9)","-13(b13)":"m13(b9)","-13b13":"m13(b9)","-13-13":"m13(b9)","-13(-13)":"m13(b9)",m2:"m2",mi2:"m2",min2:"m2","m(add2)":"m2",madd2:"m2",m4:"m4",m6:"m6",mi6:"m6",min6:"m6","-6":"m6","m6(#5)":"m6(#5)","m6(9)":"m6(9)",m6add9:"m6(9)","m6(add9)":"m6(9)",m69:"m6(9)","m6(ma7)":"m6(ma7)","m6(M7)":"m6(ma7)","m6(+7)":"m6(ma7)",m6M7:"m6(ma7)","m6+7":"m6(ma7)",m7:"m7",mi7:"m7",min7:"m7","-7":"m7","m7(#11)":"m7(#11)","m7#11":"m7(#11)","m7+11":"m7(#11)","m7(+11)":"m7(#11)","-7(#11)":"m7(#11)","-7#11":"m7(#11)","-7+11":"m7(#11)","-7(+11)":"m7(#11)","m7(#5)":"m7(#5)","m7#5":"m7(#5)","m7+5":"m7(#5)","m7(+5)":"m7(#5)","-7(#5)":"m7(#5)","-7#5":"m7(#5)","-7(+5)":"m7(#5)","m7(#9)":"m7(#9)","m7#9":"m7(#9)","m7+9":"m7(#9)","m7(+9)":"m7(#9)","-7(#9)":"m7(#9)","-7#9":"m7(#9)","-7(+9)":"m7(#9)","m7(11)":"m7(11)","m7(4)":"m7(4)","m7(add4)":"m7(4)","m7(add11)":"m7(4)",m74:"m7(4)","m7(6)":"m7(6)","m7(add6)":"m7(add6)","m7(b13)":"m7(b13)",m7b13:"m7(b13)","m7-13":"m7(b13)","m7(-13)":"m7(b13)","-7(b13)":"m7(b13)","-7b13":"m7(b13)","-7-13":"m7(b13)","-7(-13)":"m7(b13)","m7(b5)":"m7(b5)",m7b5:"m7(b5)","m7-5":"m7(b5)","m7(-5)":"m7(b5)","-7(b5)":"m7(b5)","-7b5":"m7(b5)","-7(-5)":"m7(b5)","m7(b9)":"m7(b9)",m7b9:"m7(b9)","m7-9":"m7(b9)","m7(-9)":"m7(b9)","-7(b9)":"m7(b9)","-7b9":"m7(b9)","-7(-9)":"m7(b9)","m7(no3)":"m7(no3)","min7(no3)":"m7(no3)",m7sus4:"m7sus4",m7sus:"m7sus4",m9:"m9",mi9:"m9",min9:"m9","-9":"m9","m9(#11)":"m9(#11)","m9#11":"m9(#11)","m9+11":"m9(#11)","m9(+11)":"m9(#11)","-9(#11)":"m9(#11)","-9#11":"m9(#11)","-9+11":"m9(#11)","-9(+11)":"m9(#11)","m9(#5)":"m9(#5)","m9#5":"m9(#5)","m9(+5)":"m9(#5)","-9(#5)":"m9(#5)","-9#5":"m9(#5)","-9(+5)":"m9(#5)","m9(#7)":"m9(#7)","m9(b13)":"m9(b13)",m9b13:"m9(b13)","m9-13":"m9(b13)","m9(-13)":"m9(b13)","-9(b13)":"m9(b13)","-9b13":"m9(b13)","-9-13":"m9(b13)","-9(-13)":"m9(b13)","m9(b5)":"m9(b5)",m9b5:"m9(b5)","m9-5":"m9(b5)","m9(-5)":"m9(b5)","-9(b5)":"m9(b5)","-9b5":"m9(b5)","-9(-5)":"m9(b5)","m9(ma7)":"m9(ma7)","m9(maj7)":"m9(ma7)","m9(+7)":"m9(ma7)","m9(M7)":"m9(ma7)",m9M7:"m9(ma7)",ma9:"ma9",maj9:"ma9",ma11:"ma11","11(#7)":"ma11","11#7":"ma11","11+7":"ma11","11(+7)":"ma11","+11":"ma11",M11:"ma11","ma11(#5)":"ma11(#5)","maj11#5":"ma11(#5)","maj11+5":"ma11(#5)","maj11(+5)":"ma11(#5)","+11(#5)":"ma11(#5)","+11#5":"ma11(#5)","M11+5":"ma11(#5)","+11(+5)":"ma11(#5)","maj11(#5)":"ma11(#5)","ma11#5":"ma11(#5)","ma11+5":"ma11(#5)","ma11(+5)":"ma11(#5)","ma11(#9)":"ma11(#9)","maj11#9":"ma11(#9)","maj11+9":"ma11(#9)","maj11(+9)":"ma11(#9)","+11(#9)":"ma11(#9)","+11#9":"ma11(#9)","M11+9":"ma11(#9)","+11(+9)":"ma11(#9)","maj11(#9)":"ma11(#9)","ma11#9":"ma11(#9)","ma11+9":"ma11(#9)","ma11(+9)":"ma11(#9)","ma11(b13)":"ma11(b13)",maj11b13:"ma11(b13)","maj11-13":"ma11(b13)","maj11(-13)":"ma11(b13)","+11(b13)":"ma11(b13)","+11b13":"ma11(b13)","M11-13":"ma11(b13)","+11(-13)":"ma11(b13)","maj11(b13)":"ma11(b13)",ma11b13:"ma11(b13)","ma11-13":"ma11(b13)","ma11(-13)":"ma11(b13)","ma11(b5)":"ma11(b5)",maj11b5:"ma11(b5)","maj11-5":"ma11(b5)","maj11(-5)":"ma11(b5)","+11(b5)":"ma11(b5)","+11b5":"ma11(b5)","M11-5":"ma11(b5)","+11(-5)":"ma11(b5)","maj11(b5)":"ma11(b5)",ma11b5:"ma11(b5)","ma11-5":"ma11(b5)","ma11(-5)":"ma11(b5)","ma11(b9)":"ma11(b9)",maj11b9:"ma11(b9)","maj11(-9)":"ma11(b9)","maj11-9":"ma11(b9)","+11(b9)":"ma11(b9)","+11b9":"ma11(b9)","M11(-9)":"ma11(b9)","+11-9":"ma11(b9)","maj11(b9)":"ma11(b9)",ma11b9:"ma11(b9)","ma11(-9)":"ma11(b9)","ma11-9":"ma11(b9)",ma13:"ma13","13(#7)":"ma13","+13":"ma13",M13:"ma13","ma13(#11)":"ma13(#11)","maj13#11":"ma13(#11)","maj13+11":"ma13(#11)","maj13(+11)":"ma13(#11)","+13(#11)":"ma13(#11)","+13#11":"ma13(#11)","M13+11":"ma13(#11)","+13(+11)":"ma13(#11)","maj13(#11)":"ma13(#11)","ma7#11":"ma9(#11)","ma13+11":"ma13(#11)","ma13(+11)":"ma13(#11)","ma13(#11#5)":"ma13(#11#5)","maj13#11#5":"ma13(#11#5)","maj13+11+5":"ma13(#11#5)","maj13(+11+5)":"ma13(#11#5)","+13(#11#5)":"ma13(#11#5)","+13#11#5":"ma13(#11#5)","M13+11+5":"ma13(#11#5)","+13(+11+5)":"ma13(#11#5)","maj13(#11#5)":"ma13(#11#5)","ma7#11#5":"ma9(#11#5)","ma13+11+5":"ma13(#11#5)","ma13(+11+5)":"ma13(#11#5)","ma13(#5)":"ma13(#5)","maj13#5":"ma13(#5)","maj13+5":"ma13(#5)","maj13(+5)":"ma13(#5)","+13(#5)":"ma13(#5)","+13#5":"ma13(#5)","M13+5":"ma13(#5)","+13(+5)":"ma13(#5)","maj13(#5)":"ma13(#5)","ma13#5":"ma13(#5)","ma13+5":"ma13(#5)","ma13(+5)":"ma13(#5)","ma13(#9)":"ma13(#9)","maj13#9":"ma13(#9)","maj13(+9)":"ma13(#9)","maj13+9":"ma13(#9)","+13(#9)":"ma13(#9)","+13#9":"ma13(#9)","M13(+9)":"ma13(#9)","+13+9":"ma13(#9)","maj13(#9)":"ma13(#9)","ma13#9":"ma13(#9)","ma13(+9)":"ma13(#9)","ma13+9":"ma13(#9)","ma13(#9#5)":"ma13(#9#5)","maj13#9#5":"ma13(#9#5)","maj13(+9+5)":"ma13(#9#5)","maj13+9+5":"ma13(#9#5)","+13(#9#5)":"ma13(#9#5)","+13#9#5":"ma13(#9#5)","M13(+9+5)":"ma13(#9#5)","+13+9+5":"ma13(#9#5)","maj13(#9#5)":"ma13(#9#5)","ma7#9#5":"ma13(#9#5)","ma13(+9+5)":"ma13(#9#5)","ma13+9+5":"ma13(#9#5)","ma13(b5)":"ma13(b5)",maj13b5:"ma13(b5)","maj13-5":"ma13(b5)","maj13(-5)":"ma13(b5)","+13(b5)":"ma13(b5)","+13b5":"ma13(b5)","M13-5":"ma13(b5)","+13(-5)":"ma13(b5)","maj13(b5)":"ma13(b5)",ma13b5:"ma13(b5)","ma13-5":"ma13(b5)","ma13(-5)":"ma13(b5)","ma13(b9)":"ma13(b9)",maj13b9:"ma13(b9)","maj13-9":"ma13(b9)","maj13(-9)":"ma13(b9)","+13(b9)":"ma13(b9)","+13b9":"ma13(b9)","M13-9":"ma13(b9)","+13(-9)":"ma13(b9)","maj13(b9)":"ma13(b9)",ma13b9:"ma13(b9)","ma13-9":"ma13(b9)","ma13(-9)":"ma13(b9)","ma13(b9#5)":"ma13(b9#5)","maj13b9#5":"ma13(b9#5)","maj13-9+5":"ma13(b9#5)","maj13(-9+5)":"ma13(b9#5)","+13(b9#5)":"ma13(b9#5)","+13b9#5":"ma13(b9#5)","M13-9+5":"ma13(b9#5)","+13(-9+5)":"ma13(b9#5)","maj13(b9#5)":"ma13(b9#5)","ma7b9#5":"ma13(b9#5)","ma13-9+5":"ma13(b9#5)","ma13(-9+5)":"ma13(b9#5)",ma6:"ma6","ma6(9)":"ma6(9)",ma69:"ma6(9)",ma7:"ma7","+7":"ma7","#7":"ma7",M7:"ma7",Maj7:"ma7",maj7:"ma7","(triangle)":"ma7","ma7(#11)":"ma7(#11)","maj7#11":"ma7(#11)","maj7+11":"ma7(#11)","maj7(+11)":"ma7(#11)","+7(#11)":"ma7(#11)","+7#11":"ma7(#11)","M7+11":"ma7(#11)","+7(+11)":"ma7(#11)","maj7(#11)":"ma7(#11)","ma7+11":"ma7(#11)","ma7(+11)":"ma7(#11)","ma7(#4)":"ma7(#4)","ma7(#5)":"ma7(#5)","maj7#5":"ma7(#5)","maj7+5":"ma7(#5)","maj7(+5)":"ma7(#5)","+7(#5)":"ma7(#5)","+7#5":"ma7(#5)","M7+5":"ma7(#5)","+7(+5)":"ma7(#5)","maj7(#5)":"ma7(#5)","ma7#5":"ma7(#5)","ma7+5":"ma7(#5)","ma7(+5)":"ma7(#5)","aug(M7)":"ma7(#5)","aug(+7)":"ma7(#5)","aug(ma7)":"ma7(#5)","aug(maj7)":"ma7(#5)","ma7(#9)":"ma7(#9)","maj7#9":"ma7(#9)","maj7+9":"ma7(#9)","maj7(+9)":"ma7(#9)","+7(#9)":"ma7(#9)","+7#9":"ma7(#9)","M7+9":"ma7(#9)","+7(+9)":"ma7(#9)","maj7(#9)":"ma7(#9)","ma7#9":"ma7(#9)","ma7+9":"ma7(#9)","ma7(+9)":"ma7(#9)","ma7(b13)":"ma7(b13)",maj7b13:"ma7(b13)","maj7-13":"ma7(b13)","maj7(-13)":"ma7(b13)","+7(b13)":"ma7(b13)","+7b13":"ma7(b13)","M7-13":"ma7(b13)","+7(-13)":"ma7(b13)","maj7(b13)":"ma7(b13)",ma7b13:"ma9(b13)","ma7-13":"ma7(b13)","ma7(-13)":"ma7(b13)","ma7(b5)":"ma7(b5)",maj7b5:"ma7(b5)","maj7-5":"ma7(b5)","maj7(-5)":"ma7(b5)","+7(b5)":"ma7(b5)","+7b5":"ma7(b5)","M7-5":"ma7(b5)","+7(-5)":"ma7(b5)","maj7(b5)":"ma7(b5)",ma7b5:"ma7(b5)","ma7-5":"ma7(b5)","ma7(-5)":"ma7(b5)","ma7(b9)":"ma7(b9)",maj7b9:"ma7(b9)","maj7-9":"ma7(b9)","maj7(-9)":"ma7(b9)","+7(b9)":"ma7(b9)","+7b9":"ma7(b9)","M7-9":"ma7(b9)","+7(-9)":"ma7(b9)","maj7(b9)":"ma7(b9)",ma7b9:"ma7(b9)","ma7-9":"ma7(b9)","ma7(-9)":"ma7(b9)","ma7(no3)":"ma7(no3)","9(#7)":"ma9","+9":"ma9",M9:"ma9","ma9(#11)":"ma9(#11)","maj9#11":"ma9(#11)","maj9+11":"ma9(#11)","maj9(+11)":"ma9(#11)","+9(#11)":"ma9(#11)","+9#11":"ma9(#11)","M9+11":"ma9(#11)","+9(+11)":"ma9(#11)","maj9(#11)":"ma9(#11)","ma9+11":"ma9(#11)","ma9(+11)":"ma9(#11)","ma9(#11#5)":"ma9(#11#5)","maj9#11#5":"ma9(#11#5)","maj9+11+5":"ma9(#11#5)","maj9(+11+5)":"ma9(#11#5)","+9(#11#5)":"ma9(#11#5)","+9#11#5":"ma9(#11#5)","M9+11+5":"ma9(#11#5)","+9(+11+5)":"ma9(#11#5)","maj9(#11#5)":"ma9(#11#5)","ma9+11+5":"ma9(#11#5)","ma9(+11+5)":"ma9(#11#5)","ma9(#4)":"ma9(#4)","ma9(#5)":"ma9(#5)","maj9#5":"ma9(#5)","maj9+5":"ma9(#5)","maj9(+5)":"ma9(#5)","+9(#5)":"ma9(#5)","+9#5":"ma9(#5)","M9+5":"ma9(#5)","+9(+5)":"ma9(#5)","maj9(#5)":"ma9(#5)","ma9#5":"ma9(#5)","ma9+5":"ma9(#5)","ma9(+5)":"ma9(#5)","ma9(13)":"ma9(13)","ma9(b13)":"ma9(b13)",maj9b13:"ma9(b13)","maj9-13":"ma9(b13)","maj9(-13)":"ma9(b13)","+9(b13)":"ma9(b13)","+9b13":"ma9(b13)","M9-13":"ma9(b13)","+9(-13)":"ma9(b13)","maj9(b13)":"ma9(b13)","ma9-13":"ma9(b13)","ma9(-13)":"ma9(b13)","ma9(b13#5)":"ma9(b13#5)","maj9b13#5":"ma9(b13#5)","maj9-13+5":"ma9(b13#5)","maj9(-13+5)":"ma9(b13#5)","+9(b13#5)":"ma9(b13#5)","+9b13#5":"ma9(b13#5)","M9-13+5":"ma9(b13#5)","+9(-13+5)":"ma9(b13#5)","maj9(b13#5)":"ma9(b13#5)","ma7b13#5":"ma9(b13#5)","ma9-13+5":"ma9(b13#5)","ma9(-13+5)":"ma9(b13#5)","ma9(b5)":"ma9(b5)",maj9b5:"ma9(b5)","maj9-5":"ma9(b5)","maj9(-5)":"ma9(b5)","+9(b5)":"ma9(b5)","+9b5":"ma9(b5)","M9-5":"ma9(b5)","+9(-5)":"ma9(b5)","maj9(b5)":"ma9(b5)",ma9b5:"ma9(b5)","ma9-5":"ma9(b5)","ma9(-5)":"ma9(b5)",sus:"sus",sus4:"sus","sus(no5)":"sus(no5)","sus#42":"sus#42"};var An=Lo;function Ks(s){return s===null||An[s]==="[blank]"?null:An[s]||s}class Pt{static parse(t){try{return this.parseOrFail(t)}catch{return null}}static parseOrFail(t){const e=ho(t.trim());return new Pt(e)}clone(){return this.set({})}toChordSymbol(t=null){var n;if(this.isChordSymbol())return this.clone();const e=Qe.wrapOrFail(t);let r=new Pt({suffix:this.suffix?Ks(this.suffix):null,root:this.root.toChordSymbol(e),bass:((n=this.bass)==null?void 0:n.toChordSymbol(e))||null});return this.root.isMinor()&&(r=r.makeMinor()),r=r.normalize(t),r}toChordSymbolString(t=null){return this.toChordSymbol(t).toString()}isChordSymbol(){return this.is(Qt)}toNumeric(t=null){var r;if(this.isNumeric())return this.clone();if(this.isNumeral())return this.transform(n=>n.toNumeric());const e=Qe.wrapOrFail(t);return new Pt({suffix:Ks(this.suffix),root:this.root.toNumeric(e),bass:((r=this.bass)==null?void 0:r.toNumeric(e))||null})}toNumeral(t=null){var r;if(this.isNumeral())return this.clone();if(this.isNumeric())return this.transform(n=>n.toNumeral());const e=Qe.wrapOrFail(t);return new Pt({suffix:Ks(this.suffix),root:e?this.root.toNumeral(e):null,bass:((r=this.bass)==null?void 0:r.toNumeral(e))||null})}toNumeralString(t=null){return this.toNumeral(t).toString()}isNumeric(){return this.is(es)}toNumericString(t=null){return this.toNumeric(t).toString()}isNumeral(){return this.is(kt)}toString({useUnicodeModifier:t=!1}={}){const e=this.root.toString({showMinor:!1,useUnicodeModifier:t})+(this.suffix||"");return this.bass?`${e}/${this.bass.toString({useUnicodeModifier:t})}`:e}normalize(t=null,{normalizeSuffix:e=!0}={}){const r=e?Ks(this.suffix):this.suffix;let n=this.root.normalize().normalizeEnharmonics(t);return this.root.isMinor()&&this.bass&&(n=this.root.transpose(3).removeMinor().normalize()),this.set({suffix:r,root:this.root.normalize().normalizeEnharmonics(t),bass:this.bass?this.bass.normalize().normalizeEnharmonics(n):null})}useModifier(t){return this.transform(e=>e.useModifier(t))}transposeUp(){return this.transform(t=>t.transposeUp())}transposeDown(){return this.transform(t=>t.transposeDown())}transpose(t){return this.transform(e=>e.transpose(t))}constructor({base:t=null,modifier:e=null,suffix:r=null,bassBase:n=null,bassModifier:a=null,root:l=null,bass:d=null}){this.suffix=r||null,this.root=this.determineRoot(l,t,e,r),this.bass=this.determineBass(d,n,a)}determineRoot(t,e,r,n){if(t)return t;if(!e)throw new Error("Expected base");return new Qe({note:e,modifier:r,minor:Co(n)})}determineBass(t,e,r){return t||(e?new Qe({note:e,modifier:r||null,minor:!1}):null)}makeMinor(){return!this.suffix||this.suffix[0]!=="m"?this.set({suffix:`m${this.suffix||""}`}):this.clone()}set(t){var e;return new Pt({root:this.root.clone(),suffix:this.suffix,bass:((e=this.bass)==null?void 0:e.clone())||null,...t})}is(t){return this.root.is(t)&&(!this.bass||this.bass.is(t))}transform(t){return this.set({root:t(this.root),bass:this.bass?t(this.bass):null})}}var nr=Pt;class Us{constructor(t="",e=null){this.chords=t||"",this.lyrics=e||""}isRenderable(){return!0}clone(){return new Us(this.chords,this.lyrics)}toString(){return`ChordLyricsPair(chords=${this.chords}, lyrics=${this.lyrics})`}set({chords:t,lyrics:e}){return new Us(t||this.chords,e||this.lyrics)}setLyrics(t){return this.set({lyrics:t})}transpose(t,e=null,{normalizeChordSuffix:r}={normalizeChordSuffix:!1}){const n=nr.parse(this.chords.trim());if(n){let a=n.transpose(t);return e&&(a=a.normalize(e,{normalizeSuffix:r})),this.set({chords:a.toString()})}return this.clone()}}var Oe=Us;const To={separator:","};class Mo{constructor(t=To){this.separator=t.separator}}var Po=Mo;const Ln={evaluate:!1,metadata:{separator:","},key:null,expandChorusDirective:!1,useUnicodeModifiers:!1};class jo{constructor(t=Ln){const e={...Ln,...t};this.evaluate=!!e.evaluate,this.expandChorusDirective=!!e.expandChorusDirective,this.useUnicodeModifiers=!!e.useUnicodeModifiers,this.metadata=new Po(t.metadata),this.key=t.key?Qe.wrap(t.key):null,this.configuration=t}get(t){return fo(this,t)}}var ko=jo;class Io{constructor(t=null){this.configuration=new ko(t||{})}}var Rr=Io;class No{constructor(t=null){N(this,"line",null);N(this,"column",null);N(this,"offset",null);t&&(this.line=t.line||null,this.column=t.column||null,this.offset=t.offset||null)}}var di=No;const bi="album",pi="artist",As="capo",zr="comment",gi="composer",$i="copyright",yi="duration",Es="end_of_chorus",Br="end_of_tab",Kr="end_of_verse",ts="key",_i="_key",vi="lyricist",Fo="start_of_bridge",as="start_of_chorus",ir="start_of_tab",ar="start_of_verse",Gr="subtitle",wi="tempo",Ci="time",Vr="title",Do="transpose",Ei="new_key",xi="year",Hs="chordfont",Ws="chordsize",Sr="chordcolour",Zs="textfont",Xs="textsize",Ar="textcolour",Si="chorus",Oo="t",Ro="st",zo="c",Bo="soc",Ko="eoc",Go="sot",Vo="eot",Uo="nk",Ho="cf",Wo="cs",Zo="tf",Xo="ts",qo=[zr],Yo=[bi,pi,As,gi,$i,yi,ts,vi,wi,Ci,Vr,Gr,xi],Jo=[_i],Qo=[as,Es,ir,Br,ar,Kr],el=[Hs,Ws,Sr,Zs,Xs,Ar],tl=[ar,as,Fo,ir,Si],Tn={[Oo]:Vr,[Ro]:Gr,[zo]:zr,[Bo]:as,[Ko]:Es,[Go]:ir,[Vo]:Br,[Uo]:Ei,[Ho]:Hs,[Wo]:Ws,[Zo]:Zs,[Xo]:Xs},sl=/^([^:\s]+)(:?\s*(.+))?$/,rl=/^x_(.+)$/;function Mn(s){return Jo.includes(s)}const nl=s=>{if(!s)return s;const t=s.trim();return t in Tn?Tn[t]:t};class Yt extends di{constructor(e,r=null,n=null){super(n);N(this,"_originalName","");N(this,"_name","");N(this,"_value","");N(this,"_isMetaTag",!1);this.parseNameValue(e,r)}parseNameValue(e,r){e==="meta"?this.parseMetaTag(r):(this.name=e,this.value=r||"")}parseMetaTag(e){if(!e)throw new Error("Expected value");const[r,n]=e.split(/\s(.+)/);this.name=r,this.value=n||"",this._isMetaTag=!0}static parse(e){return e instanceof Yt?e:this.parseWithRegex(e,sl)}static parseWithRegex(e,r){const n=e.match(r);return n!==null?new Yt(n[1],n[3]||null):null}static parseOrFail(e){const r=this.parse(e);if(!r)throw new Error(`Failed to parse ${e}`);return r}isSectionDelimiter(){return Qo.includes(this.name)}isInlineFontTag(){return el.includes(this.name)}set name(e){this._name=nl(e),this._originalName=e}get name(){return this._name.trim()}get originalName(){return this._originalName.trim()}set value(e){this._value=e||""}get value(){return`${this._value}`.trim()}hasValue(){return this.value.length>0}isRenderable(){return qo.includes(this.name)||this.hasRenderableLabel()}hasRenderableLabel(){return tl.includes(this.name)&&this.hasValue()}isMetaTag(){return this._isMetaTag||rl.test(this.name)||Yo.indexOf(this.name)!==-1}clone(){return new Yt(this._originalName,this.value)}toString(){return`Tag(name=${this.name}, value=${this.value})`}set({value:e}){return new Yt(this._originalName,e)}}var $e=Yt;class il extends Error{constructor(e,r=null,n=null,a=null){super(`${e} on line ${r} column ${n}`);N(this,"line",null);N(this,"column",null);N(this,"offset",null);this.name="ExpressionError",this.line=r,this.column=n,this.offset=a}}var al=il;class ol extends di{}var Ur=ol;class Hr extends Ur{constructor(e,r=null){super();N(this,"expressions",[]);this.expressions=e,this.variable=r}evaluate(e,r){return this.expressions.map(n=>n.evaluate(e,r,this.variable)).join("")}isRenderable(){return!0}clone(){return new Hr(this.expressions.map(e=>e.clone()),this.variable)}}var Lr=Hr;class Wr extends Ur{constructor({variable:e=null,valueTest:r=null,trueExpression:n=[],falseExpression:a=[],line:l=null,column:d=null,offset:b=null}){super({line:l,column:d,offset:b});N(this,"trueExpression",[]);N(this,"falseExpression",[]);this.variable=e||null,this.valueTest=r||null,this.trueExpression=n,this.falseExpression=a}evaluate(e,r,n=null){if(this.variable)return this.evaluateWithVariable(e,r);if(!n)throw new al("Unexpected empty expression",this.line,this.column,this.offset);return this.evaluateToString(e.get(n)||"",r)}evaluateToString(e,r){return Array.isArray(e)?e.join(r):e}evaluateWithVariable(e,r){if(!this.variable)throw new Error("Expected this.variable to be present");const n=e.get(this.variable);return n&&(rr(this.valueTest)||n===this.valueTest)?this.evaluateForTruthyValue(e,r,n):this.falseExpression.length?new Lr(this.falseExpression,this.variable).evaluate(e,r):""}evaluateForTruthyValue(e,r,n){return this.trueExpression.length?new Lr(this.trueExpression,this.variable).evaluate(e,r):this.evaluateToString(n,r)}isRenderable(){return!0}clone(){return new Wr({variable:this.variable,valueTest:this.valueTest,trueExpression:this.trueExpression.map(e=>e.clone()),falseExpression:this.falseExpression.map(e=>e.clone()),line:this.line,column:this.column,offset:this.offset})}}var xs=Wr;class Zr extends Ur{constructor(t){super(),this.string=t}evaluate(){return this.string}isRenderable(){return!0}clone(){return new Zr(this.string)}}var Ss=Zr;const ll=`
`;class cl extends Rr{format(t){const{lines:e,metadata:r}=t;return e.map(n=>this.formatLine(n,r)).join(ll)}formatLine(t,e){return t.items.map(r=>this.formatItem(r,e)).join("")}formatItem(t,e){if(t instanceof $e)return this.formatTag(t);if(t instanceof Oe)return this.formatChordLyricsPair(t);if("evaluate"in t)return this.formatOrEvaluateItem(t,e);throw new Error(`Don't know how to format a ${t.constructor.name}`)}formatOrEvaluateItem(t,e){if(this.configuration.evaluate)return t.evaluate(e,this.configuration.get("metadata.separator"));if(t instanceof xs)return this.formatTernary(t);if(t instanceof Ss)return t.evaluate();throw new Error(`Don't know how to format a ${t.constructor.name}`)}formatTernary(t){const{variable:e,valueTest:r,trueExpression:n,falseExpression:a}=t;return["%{",e||"",this.formatValueTest(r),this.formatExpressionRange(n),this.formatExpressionRange(a),"}"].join("")}formatValueTest(t){return t?`=${t}`:""}formatExpressionRange(t){return t.length?`|${t.map(e=>this.formatExpression(e)).join("")}`:""}formatExpression(t){return t instanceof xs?this.formatTernary(t):t instanceof Ss?t.string:""}formatTag(t){return t.hasValue()?`{${t.originalName}: ${t.value}}`:`{${t.originalName}}`}formatChordLyricsPair(t){return[this.formatChordLyricsPairChords(t),this.formatChordLyricsPairLyrics(t)].join("")}formatChordLyricsPairChords(t){return t.chords?`[${t.chords}]`:""}formatChordLyricsPairLyrics(t){return t.lyrics||""}}var fl=cl;class Xr{constructor(t){this.content=t}isRenderable(){return!1}clone(){return new Xr(this.content)}toString(){return`Comment(content=${this.content})`}}var ws=Xr;class qr{constructor({font:t,size:e,colour:r}={font:null,size:null,colour:null}){N(this,"font",null);N(this,"size",null);N(this,"colour",null);this.font=t?t.replace(/"/g,"'"):null,this.size=e||null,this.colour=r||null}clone(){return new qr({font:this.font,size:this.size,colour:this.colour})}toCssString(){const t={};return this.colour&&(t.color=this.colour),this.font&&this.size?t.font=`${this.size} ${this.font}`:this.font?t["font-family"]=this.font:this.size&&(t["font-size"]=`${this.size}`),Object.keys(t).map(e=>`${e}: ${t[e]}`).join("; ")}}var qs=qr;class Ys{constructor({type:t,items:e}={type:yt,items:[]}){N(this,"items",[]);N(this,"type",yt);N(this,"currentChordLyricsPair",new Oe);N(this,"key",null);N(this,"transposeKey",null);N(this,"lineNumber",null);N(this,"textFont",new qs);N(this,"chordFont",new qs);this.type=t,this.items=e}isEmpty(){return this.items.length===0}isNotEmpty(){return!this.isEmpty()}addItem(t){t instanceof $e?this.addTag(t):t instanceof Oe?this.addChordLyricsPair(t):t instanceof ws?this.addComment(t):this.items.push(t)}hasRenderableItems(){return this.items.some(t=>t.isRenderable())}clone(){return this.mapItems(null)}mapItems(t){const e=new Ys;return e.items=this.items.map(r=>{const n=r.clone();return t?t(n):n}).filter(r=>r!==null),e.type=this.type,e}isVerse(){return this.type===Ft}isChorus(){return this.type===$t}hasContent(){return this.hasRenderableItems()}addChordLyricsPair(t=null,e=null){return t instanceof Oe?this.currentChordLyricsPair=t:this.currentChordLyricsPair=new Oe(t||"",e||""),this.items.push(this.currentChordLyricsPair),this.currentChordLyricsPair}ensureChordLyricsPair(){this.currentChordLyricsPair||this.addChordLyricsPair()}chords(t){this.ensureChordLyricsPair(),this.currentChordLyricsPair.chords+=t}lyrics(t){this.ensureChordLyricsPair(),this.currentChordLyricsPair.lyrics+=t}addTag(t,e=null){const r=t instanceof $e?t:new $e(t,e);return this.items.push(r),r}addComment(t){const e=t instanceof ws?t:new ws(t);return this.items.push(e),e}set(t){return new Ys({type:this.type,items:this.items,...t})}}var Tr=Ys;class ul{constructor(){N(this,"lines",[])}addLine(t){this.lines.push(t)}get type(){const t=this.lines.map(r=>r.type),e=[...new Set(t)];return e.length===1?e[0]:Dr}hasRenderableItems(){return this.lines.some(t=>t.hasRenderableItems())}}var Mr=ul;class hl{get key(){return this.getSingleMetadata(ts)}get title(){return this.getSingleMetadata(Vr)}get subtitle(){return this.getSingleMetadata(Gr)}get capo(){return this.getMetadata(As)}get duration(){return this.getSingleMetadata(yi)}get tempo(){return this.getSingleMetadata(wi)}get time(){return this.getMetadata(Ci)}get year(){return this.getSingleMetadata(xi)}get album(){return this.getMetadata(bi)}get copyright(){return this.getSingleMetadata($i)}get lyricist(){return this.getMetadata(vi)}get artist(){return this.getMetadata(pi)}get composer(){return this.getMetadata(gi)}}var Ai=hl;function ml(s,t){s.includes(t)||s.push(t)}class Yr extends Ai{constructor(e={}){super();N(this,"metadata",{});e&&this.assign(e)}merge(e){const r=this.clone();return r.assign(e),r}contains(e){return e in this.metadata}add(e,r){if(Mn(e))return;if(!(e in this.metadata)){this.metadata[e]=r;return}const n=this.metadata[e];if(n!==r){if(n instanceof Array){ml(n,r);return}this.metadata[e]=[n,r]}}set(e,r){r?this.metadata[e]=r:delete this.metadata[e]}getMetadata(e){return this.get(e)}getSingleMetadata(e){return this.getSingle(e)}get(e){return e===_i?this.calculateKeyFromCapo():e in this.metadata?this.metadata[e]:this.getArrayItem(e)}getSingle(e){const r=this.get(e);return Array.isArray(r)?r[0]:r}parseArrayKey(e){const r=e.match(/(.+)\.(-?\d+)$/);if(!r)return null;const n=r[1],a=parseInt(r[2],10);return[n,a]}getArrayItem(e){const r=this.parseArrayKey(e);if(r===null)return;const[n,a]=r,l=this.metadata[n]||[];let d=a;return d<0?d=l.length+d:d>0&&(d-=1),l[d]}clone(){return new Yr(this.metadata)}calculateKeyFromCapo(){const e=this.getSingle(As),r=this.getSingle(ts);if(e&&r){const n=nr.parse(r);if(!n)throw new Error(`Could not parse ${r}`);return n.transpose(parseInt(e,10)).toString()}}assign(e){Object.keys(e).filter(r=>!Mn(r)).forEach(r=>{const n=e[r];n instanceof Array?this.metadata[r]=[...n]:this.metadata[r]=n})}}var Li=Yr;class dl{constructor(t,e,r){N(this,"lineNumber",null);N(this,"column",null);this.message=t,this.lineNumber=e,this.column=r}toString(){return`Warning: ${this.message} on line ${this.lineNumber||"?"} column ${this.column||"?"}`}}var bl=dl;class jt{constructor(t,e){this.fontSize=t,this.unit=e}clone(){return new jt(this.fontSize,this.unit)}multiply(t){return new jt(this.fontSize*t/100,this.unit)}toString(){return`${this.fontSize}${this.unit}`}static parse(t,e){const r=t.trim(),n=parseFloat(r);return Number.isNaN(n)?this.parseNotANumber(e):r.slice(-1)==="%"?this.parsePercentage(n,e):new jt(n,"px")}static parseNotANumber(t){return t?t.clone():new jt(100,"%")}static parsePercentage(t,e){return e?e.multiply(t):new jt(t,"%")}}var pl=jt;class gl{constructor(){N(this,"fontAndColourStacks",{[Sr]:[],[Hs]:[],[Ar]:[],[Zs]:[]});N(this,"sizeStacks",{[Ws]:[],[Xs]:[]});N(this,"textFont",new qs);N(this,"chordFont",new qs)}applyTag(t){switch(t.name){case Zs:this.textFont.font=this.pushOrPopTag(t);break;case Xs:this.textFont.size=this.pushOrPopSizeTag(t);break;case Ar:this.textFont.colour=this.pushOrPopTag(t);break;case Hs:this.chordFont.font=this.pushOrPopTag(t);break;case Ws:this.chordFont.size=this.pushOrPopSizeTag(t);break;case Sr:this.chordFont.colour=this.pushOrPopTag(t);break}}pushOrPopTag(t){let{value:e}=t;return t.hasValue()?this.fontAndColourStacks[t.name].push(e):(this.fontAndColourStacks[t.name].pop(),e=this.fontAndColourStacks[t.name].slice(-1)[0]||null),e}pushOrPopSizeTag(t){const{value:e}=t;if(t.hasValue()){const r=this.sizeStacks[t.name].slice(-1)[0]||null,n=pl.parse(e,r);return this.sizeStacks[t.name].push(n),n}return this.sizeStacks[t.name].pop(),this.sizeStacks[t.name].slice(-1)[0]||null}}var $l=gl;class Js extends Ai{constructor(e={}){super();N(this,"lines",[]);N(this,"currentLine",null);N(this,"warnings",[]);N(this,"sectionType",yt);N(this,"fontStack",new $l);N(this,"currentKey",null);N(this,"transposeKey",null);N(this,"_bodyParagraphs",null);N(this,"_bodyLines",null);this.metadata=new Li(e)}get previousLine(){const e=this.lines.length;return e>=2?this.lines[e-2]:null}get bodyLines(){return this._bodyLines||(this._bodyLines=this.selectRenderableItems(this.lines)),this._bodyLines}get bodyParagraphs(){return this._bodyParagraphs||(this._bodyParagraphs=this.selectRenderableItems(this.paragraphs)),this._bodyParagraphs}selectRenderableItems(e){const r=[...e];for(;r.length&&!r[0].hasRenderableItems();)r.shift();return r}chords(e){if(!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.chords(e)}lyrics(e){if(this.ensureLine(),!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.lyrics(e)}addLine(e){return e?this.currentLine=e:(this.currentLine=new Tr,this.lines.push(this.currentLine)),this.setCurrentProperties(this.sectionType),this.currentLine.transposeKey=this.transposeKey??this.currentKey,this.currentLine.key=this.currentKey||this.metadata.getSingle(ts),this.currentLine.lineNumber=this.lines.length-1,this.currentLine}expandLine(e){const r=e.items.flatMap(n=>n instanceof $e&&n.name===Si?this.getLastChorusBefore(e.lineNumber):[]);return[e,...r]}getLastChorusBefore(e){const r=[];if(!e)return r;for(let n=e-1;n>=0;n-=1){const a=this.lines[n];if(a.type===$t){const l=this.filterChorusStartEndDirectives(a);a.isNotEmpty()&&l.isEmpty()||r.unshift(a)}else if(r.length>0)break}return r}filterChorusStartEndDirectives(e){return e.mapItems(r=>r instanceof $e&&(r.name===as||r.name===Es)?null:r)}get paragraphs(){return this.linesToParagraphs(this.lines)}get expandedBodyParagraphs(){return this.selectRenderableItems(this.linesToParagraphs(this.lines.flatMap(e=>this.expandLine(e))))}linesToParagraphs(e){let r=new Mr;const n=[r];return e.forEach(a=>{a.isEmpty()?(r=new Mr,n.push(r)):a.hasRenderableItems()&&r.addLine(a)}),n}setCurrentProperties(e){if(!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.type=e,this.currentLine.textFont=this.fontStack.textFont.clone(),this.currentLine.chordFont=this.fontStack.chordFont.clone()}ensureLine(){this.currentLine===null&&this.addLine()}addTag(e){const r=$e.parseOrFail(e);return this.applyTagOnSong(r),this.applyTagOnLine(r),r}applyTagOnLine(e){if(this.ensureLine(),!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.addTag(e)}applyTagOnSong(e){e.isMetaTag()?this.setMetadata(e.name,e.value||""):e.name===Do?this.transposeKey=e.value:e.name===Ei?this.currentKey=e.value:e.isSectionDelimiter()?this.setSectionTypeFromTag(e):e.isInlineFontTag()&&this.fontStack.applyTag(e)}setSectionTypeFromTag(e){switch(e.name){case as:this.startSection($t,e);break;case Es:this.endSection($t,e);break;case ir:this.startSection(Er,e);break;case Br:this.endSection(Er,e);break;case ar:this.startSection(Ft,e);break;case Kr:this.endSection(Ft,e);break}}startSection(e,r){this.checkCurrentSectionType(yt,r),this.sectionType=e,this.setCurrentProperties(e)}endSection(e,r){this.checkCurrentSectionType(e,r),this.sectionType=yt}checkCurrentSectionType(e,r){this.sectionType!==e&&this.addWarning(`Unexpected tag {${r.originalName}, current section is: ${this.sectionType}`,r)}addWarning(e,{line:r,column:n}){const a=new bl(e,r||null,n||null);this.warnings.push(a)}addItem(e){if(e instanceof $e)this.addTag(e);else{if(this.ensureLine(),!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.addItem(e)}}clone(){return this.mapItems(e=>e)}setMetadata(e,r){this.metadata.add(e,r)}get metaData(){return hi('metaData has been deprecated, please use metadata instead (notice the lowercase "d")'),this.metadata}getMetadata(e){return this.metadata.getMetadata(e)}getSingleMetadata(e){return this.metadata.getSingleMetadata(e)}setKey(e){const r=e?e.toString():null;return this.changeMetadata(ts,r)}setCapo(e){const r=e?e.toString():null;return this.changeMetadata(As,r)}setDirective(e,r){return r===null?this.removeItem(n=>n instanceof $e&&n.name===e):this.updateItem(n=>n instanceof $e&&n.name===e,n=>"set"in n?n.set({value:r}):n,n=>n.insertDirective(e,r))}transpose(e,{normalizeChordSuffix:r=!1}={}){const n=Qe.wrap(this.key);let a=null,l=this;return n&&(a=n.transpose(e),l=l.setKey(a.toString())),l.mapItems(d=>d instanceof Oe?d.transpose(e,a,{normalizeChordSuffix:r}):d)}transposeUp({normalizeChordSuffix:e=!1}={}){return this.transpose(1,{normalizeChordSuffix:e})}transposeDown({normalizeChordSuffix:e=!1}={}){return this.transpose(-1,{normalizeChordSuffix:e})}changeKey(e){const r=this.getTransposeDistance(e),n=this.mapItems(a=>a instanceof $e&&a.name===ts?a.set({value:e.toString()}):a instanceof Oe?a.transpose(r,e):a);return this.setKey(e.toString()),n}getTransposeDistance(e){const r=Qe.wrap(this.key);if(!r)throw new Error(`
Cannot change song key, the original key is unknown.

Either ensure a key directive is present in the song (when using chordpro):
  \`{key: C}\`

Or set the song key before changing key:
  \`song.setKey('C');\``.substring(1));return r.distanceTo(e)}changeMetadata(e,r){const n=this.setDirective(e,r);return n.metadata.set(e,r),n}insertDirective(e,r,{after:n=null}={}){const a=this.lines.findIndex(p=>p.items.some(f=>!(f instanceof $e)||n&&f instanceof $e&&f.name===n)),l=new Tr;l.addTag(e,r);const d=this.clone(),{lines:b}=d;return d.lines=[...b.slice(0,a),l,...b.slice(a)],d}mapItems(e){const r=new Js;return this.lines.forEach(n=>{r.addLine(),n.items.forEach(a=>{const l=e(a);l&&r.addItem(l)})}),r}mapLines(e){const r=new Js;return this.lines.forEach(n=>{const a=e(n);a&&(r.addLine(),a.items.forEach(l=>r.addItem(l)))}),r}updateItem(e,r,n){let a=!1;const l=this.mapItems(d=>e(d)?(a=!0,r(d)):d);return a?l:n(l)}removeItem(e){return this.mapLines(r=>{const{items:n}=r,a=n.findIndex(e);return a===-1?r:n.length===1?null:r.set({items:[...n.slice(0,a),...n.slice(a+1)]})})}}var os=Js;const Pn="chordSheet",jn="chordLyricsPair",kn="tag",yl="comment",In="ternary",_l="line";class vl{constructor(){N(this,"song",new os)}serialize(t){return{type:Pn,lines:t.lines.map(e=>this.serializeLine(e))}}serializeLine(t){return{type:_l,items:t.items.map(e=>this.serializeItem(e))}}serializeItem(t){if(t instanceof $e)return this.serializeTag(t);if(t instanceof Oe)return this.serializeChordLyricsPair(t);if(t instanceof xs)return this.serializeTernary(t);if(t instanceof Ss)return this.serializeLiteral(t);throw new Error(`Don't know how to serialize ${t.constructor.name}`)}serializeTag(t){return{type:kn,name:t.originalName,value:t.value}}serializeChordLyricsPair(t){return{type:jn,chords:t.chords,chord:null,lyrics:t.lyrics}}serializeTernary(t){return{type:In,variable:t.variable,valueTest:t.valueTest,trueExpression:this.serializeExpression(t.trueExpression),falseExpression:this.serializeExpression(t.falseExpression)}}serializeLiteral(t){return t.string}serializeExpression(t){return t.map(e=>this.serializeItem(e))}deserialize(t){return this.parseAstComponent(t),this.song}parseAstComponent(t){if(!t)return null;if(typeof t=="string")return new Ss(t);const{type:e}=t;switch(e){case Pn:this.parseChordSheet(t);break;case jn:return this.parseChordLyricsPair(t);case kn:return this.parseTag(t);case yl:return this.parseComment(t);case In:return this.parseTernary(t);default:console.warn(`Unhandled AST component "${e}"`,t)}return null}parseChordSheet(t){const{lines:e}=t;this.song=new os,e.forEach(r=>this.parseLine(r))}parseLine(t){const{items:e}=t;this.song.addLine(),e.forEach(r=>{const n=this.parseAstComponent(r);this.song.addItem(n)})}parseChordLyricsPair(t){const{chord:e,chords:r,lyrics:n}=t;return new Oe(e?new nr(e).toString():r,n)}parseTag(t){const{name:e,value:r,location:{offset:n=null,line:a=null,column:l=null}={}}=t;return new $e(e,r,{line:a,column:l,offset:n})}parseComment(t){const{comment:e}=t;return new ws(e)}parseTernary(t){const{variable:e,valueTest:r,trueExpression:n,falseExpression:a,location:{offset:l=null,line:d=null,column:b=null}={}}=t;return new xs({variable:e,valueTest:r,trueExpression:this.parseExpression(n),falseExpression:this.parseExpression(a),offset:l,line:d,column:b})}parseExpression(t){return(t||[]).map(e=>this.parseAstComponent(e)).filter(e=>e!==null)}}var Ti=vl;class wl{constructor(){N(this,"song",new os)}get warnings(){return this.song.warnings}parseWithParser(t,e){const r=e(mi(t));return this.song=new Ti().deserialize(r),this.song}}var Mi=wl;function yr(s,t,e){return e=e||" ",s.length>t?s:(t-=s.length,e+=e.repeat(t),s+e.slice(0,t))}class ss extends Error{static buildMessage(t,e){function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function n(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function a(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function l(p){switch(p.type){case"literal":return'"'+n(p.text)+'"';case"class":const f=p.parts.map($=>Array.isArray($)?a($[0])+"-"+a($[1]):a($));return"["+(p.inverted?"^":"")+f+"]";case"any":return"any character";case"end":return"end of input";case"other":return p.description}}function d(p){const f=p.map(l);let $,C;if(f.sort(),f.length>0){for($=1,C=1;$<f.length;$++)f[$-1]!==f[$]&&(f[C]=f[$],C++);f.length=C}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function b(p){return p?'"'+n(p)+'"':"end of input"}return"Expected "+d(t)+" but "+b(e)+" found."}constructor(t,e,r,n){super(),this.message=t,this.expected=e,this.found=r,this.location=n,this.name="PeggySyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,ss.prototype):this.__proto__=ss.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ss)}format(t){let e="Error: "+this.message;if(this.location){let r=null,n;for(n=0;n<t.length;n++)if(t[n].grammarSource===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}let a=this.location.start,l=this.location.source+":"+a.line+":"+a.column;if(r){let d=this.location.end,b=yr("",a.line.toString().length," "),p=r[a.line-1],f=a.line===d.line?d.column:p.length+1;e+=`
 --> `+l+`
`+b+` |
`+a.line+" | "+p+`
`+b+" | "+yr("",a.column-1," ")+yr("",f-a.column,"^")}else e+=`
 at `+l}return e}}function Cl(s,t){t=t!==void 0?t:{};const e={},r=t.grammarSource,n={ChordSheet:ps};let a=ps;const l=function(o,u){return{type:"chordSheet",lines:[...o,u]}},d=function(o){return o},b=function(o,u,y,v){return{type:"line",items:[o?{type:"chordLyricsPair",chords:"",lyrics:o}:null,...u,y?{type:"chordLyricsPair",chords:y,lyrics:""}:null,v?{type:"comment",comment:v}:null].filter(z=>z)}},p=function(o){return{type:"chordLyricsPair",chords:"",lyrics:o}},f="#",$=Fe("#",!1),C=/^[^\r\n]/,S=st(["\r",`
`],!0,!1),j=function(o){return o},M=function(o,u,y){return{type:"chordLyricsPair",chords:o||"",lyrics:u+(y||"")}},G=function(o){return o.map(u=>u.char||u).join("")},se="[",K=Fe("[",!1),q="]",V=Fe("]",!1),ie=function(o){return o.map(u=>u.char||u).join("")},ve=/^[^\]\r\n]/,oe=st(["]","\r",`
`],!0,!1),W="\\",Ae=Fe("\\",!1),I=function(){return{type:"char",char:"\\"}},U=function(){return{type:"char",char:"]"}},Y=function(o){return o},Te="%{",pe=Fe("%{",!1),Me="}",Ce=Fe("}",!1),he=function(o,u,y){return{type:"ternary",variable:o.length>0?o:null,valueTest:u,...y,location:ne().start}},me="=",ke=Fe("=",!1),ge=function(o){return o},We="|",Ke=Fe("|",!1),Ge=function(o,u){return{type:"ternary",trueExpression:o,falseExpression:u,location:ne().start}},Z=function(o){return o},de=/^[a-zA-Z0-9\-_]/,Ie=st([["a","z"],["A","Z"],["0","9"],"-","_"],!1,!1),at=function(){return{type:"char",char:"]"}},Ze=function(){return{type:"char",char:"|"}},tt=function(){return{type:"char",char:"}"}},Ct=/^[^|[\]\\{}%#\r\n\t ]/,mt=st(["|","[","]","\\","{","}","%","#","\r",`
`,"	"," "],!0,!1),Ne=function(){return{type:"char",char:"\\"}},dt=function(){return{type:"char",char:"["}},Xe="{",qe=Fe("{",!1),A=function(){return{type:"char",char:"{"}},Ve="%",ot=Fe("%",!1),Re=function(){return{type:"char",char:"%"}},Et=function(){return{type:"char",char:"#"}},lt=function(o,u){return{type:"tag",name:o,value:u,location:ne().start}},Kt=":",we=Fe(":",!1),xt=function(o){return o.map(u=>u.char||u).join("")},Gt=/^[a-zA-Z\-_]/,St=st([["a","z"],["A","Z"],"-","_"],!1,!1),At=/^[^}\\\r\n]/,le=st(["}","\\","\r",`
`],!0,!1),fs=Ts("whitespace"),Lt=/^[ \t\n\r]/,Ye=st([" ","	",`
`,"\r"],!1,!1),bt=Ts("space"),Tt=/^[ \t]/,Mt=st([" ","	"],!1,!1),us=`
`,hs=Fe(`
`,!1),Vt="\r",ms=Fe("\r",!1);let m=0,X=0;const ct=[{line:1,column:1}];let g=0,L=[],E=0,D;if(t.startRule!==void 0){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');a=n[t.startRule]}function ne(){return bs(X,m)}function Fe(o,u){return{type:"literal",text:o,ignoreCase:u}}function st(o,u,y){return{type:"class",parts:o,inverted:u,ignoreCase:y}}function Ls(){return{type:"end"}}function Ts(o){return{type:"other",description:o}}function ds(o){let u=ct[o],y;if(u)return u;for(y=o-1;!ct[y];)y--;for(u=ct[y],u={line:u.line,column:u.column};y<o;)s.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return ct[o]=u,u}function bs(o,u){const y=ds(o),v=ds(u);return{source:r,start:{offset:o,line:y.line,column:y.column},end:{offset:u,line:v.line,column:v.column}}}function B(o){m<g||(m>g&&(g=m,L=[]),L.push(o))}function or(o,u,y){return new ss(ss.buildMessage(o,u),o,u,y)}function ps(){let o,u,y;for(o=m,u=[],y=Ms();y!==e;)u.push(y),y=Ms();return u!==e?(y=gs(),y===e&&(y=null),y!==e?(X=o,u=l(u,y),o=u):(m=o,o=e)):(m=o,o=e),o}function Ms(){let o,u,y;return o=m,u=gs(),u!==e?(y=dr(),y!==e?(X=o,u=d(u),o=u):(m=o,o=e)):(m=o,o=e),o}function gs(){let o,u,y,v,z,re,Le;if(o=m,u=m,y=js(),y===e&&(y=null),y!==e?u=s.substring(u,m):u=y,u!==e){for(y=[],v=Ps();v!==e;)y.push(v),v=Ps();if(y!==e)if(v=Is(),v===e&&(v=null),v!==e)if(z=lr(),z===e&&(z=null),z!==e){for(re=[],Le=ft();Le!==e;)re.push(Le),Le=ft();re!==e?(X=o,u=b(u,y,v,z),o=u):(m=o,o=e)}else m=o,o=e;else m=o,o=e;else m=o,o=e}else m=o,o=e;return o}function Ps(){let o,u;return o=ys(),o===e&&(o=cr(),o===e&&(o=$s(),o===e&&(o=m,u=js(),u!==e&&(X=o,u=p(u)),o=u))),o}function lr(){let o,u,y,v,z,re;if(o=m,u=ft(),u===e&&(u=null),u!==e)if(s.charCodeAt(m)===35?(y=f,m++):(y=e,E===0&&B($)),y!==e){for(v=m,z=[],C.test(s.charAt(m))?(re=s.charAt(m),m++):(re=e,E===0&&B(S));re!==e;)z.push(re),C.test(s.charAt(m))?(re=s.charAt(m),m++):(re=e,E===0&&B(S));z!==e?v=s.substring(v,m):v=z,v!==e?(X=o,u=j(v),o=u):(m=o,o=e)}else m=o,o=e;else m=o,o=e;return o}function cr(){let o,u,y,v,z,re;if(o=m,u=Is(),u!==e){for(y=m,v=[],z=ce();z!==e;)v.push(z),z=ce();if(v!==e?y=s.substring(y,m):y=v,y!==e){for(v=m,z=[],re=ft();re!==e;)z.push(re),re=ft();z!==e?v=s.substring(v,m):v=z,v!==e?(X=o,u=M(u,y,v),o=u):(m=o,o=e)}else m=o,o=e}else m=o,o=e;return o}function js(){let o,u,y;if(o=m,u=[],y=ks(),y!==e)for(;y!==e;)u.push(y),y=ks();else u=e;return u!==e&&(X=o,u=G(u)),o=u,o}function ks(){let o;return o=ce(),o===e&&(o=ft()),o}function Is(){let o,u,y,v,z;if(o=m,u=m,E++,y=Wt(),E--,y===e?u=void 0:(m=u,u=e),u!==e)if(s.charCodeAt(m)===91?(y=se,m++):(y=e,E===0&&B(K)),y!==e){for(v=[],z=Ns();z!==e;)v.push(z),z=Ns();v!==e?(s.charCodeAt(m)===93?(z=q,m++):(z=e,E===0&&B(V)),z!==e?(X=o,u=ie(v),o=u):(m=o,o=e)):(m=o,o=e)}else m=o,o=e;else m=o,o=e;return o}function Ns(){let o,u,y,v;return ve.test(s.charAt(m))?(o=s.charAt(m),m++):(o=e,E===0&&B(oe)),o===e&&(o=m,u=Wt(),u!==e?(y=m,s.charCodeAt(m)===92?(v=W,m++):(v=e,E===0&&B(Ae)),v!==e&&(X=y,v=I()),y=v,y===e&&(y=m,s.charCodeAt(m)===93?(v=q,m++):(v=e,E===0&&B(V)),v!==e&&(X=y,v=U()),y=v),y!==e?(X=o,u=Y(y),o=u):(m=o,o=e)):(m=o,o=e)),o}function $s(){let o,u,y,v,z,re,Le,pt,_s;return o=m,s.substr(m,2)===Te?(u=Te,m+=2):(u=e,E===0&&B(pe)),u!==e?(y=Ee(),y!==e?(v=m,z=mr(),z===e&&(z=null),z!==e?v=s.substring(v,m):v=z,v!==e?(z=fr(),z===e&&(z=null),z!==e?(re=Ee(),re!==e?(Le=ur(),Le===e&&(Le=null),Le!==e?(pt=Ee(),pt!==e?(s.charCodeAt(m)===125?(_s=Me,m++):(_s=e,E===0&&B(Ce)),_s!==e?(X=o,u=he(v,z,Le),o=u):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e),o}function fr(){let o,u,y,v;return o=m,s.charCodeAt(m)===61?(u=me,m++):(u=e,E===0&&B(ke)),u!==e?(y=Ee(),y!==e?(v=Fs(),v!==e?(X=o,u=ge(v),o=u):(m=o,o=e)):(m=o,o=e)):(m=o,o=e),o}function Fs(){let o,u,y;if(o=m,u=[],y=Je(),y!==e)for(;y!==e;)u.push(y),y=Je();else u=e;return u!==e?o=s.substring(o,m):o=u,o}function ur(){let o,u,y,v,z,re,Le;return o=m,s.charCodeAt(m)===124?(u=We,m++):(u=e,E===0&&B(Ke)),u!==e?(y=Ee(),y!==e?(v=h(),v!==e?(z=Ee(),z!==e?(re=hr(),re===e&&(re=null),re!==e?(Le=Ee(),Le!==e?(X=o,u=Ge(v,re),o=u):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e),o}function hr(){let o,u,y,v;return o=m,s.charCodeAt(m)===124?(u=We,m++):(u=e,E===0&&B(Ke)),u!==e?(y=Ee(),y!==e?(v=h(),v!==e?(X=o,u=Z(v),o=u):(m=o,o=e)):(m=o,o=e)):(m=o,o=e),o}function mr(){let o,u;if(o=[],de.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(Ie)),u!==e)for(;u!==e;)o.push(u),de.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(Ie));else o=e;return o}function h(){let o,u,y,v;if(o=[],u=m,y=[],v=Je(),v!==e)for(;v!==e;)y.push(v),v=Je();else y=e;if(y!==e?u=s.substring(u,m):u=y,u===e&&(u=$s()),u!==e)for(;u!==e;){if(o.push(u),u=m,y=[],v=Je(),v!==e)for(;v!==e;)y.push(v),v=Je();else y=e;y!==e?u=s.substring(u,m):u=y,u===e&&(u=$s())}else o=e;return o}function ce(){let o,u;return o=Ue(),o===e&&(o=m,s.charCodeAt(m)===93?(u=q,m++):(u=e,E===0&&B(V)),u!==e&&(X=o,u=at()),o=u,o===e&&(o=m,s.charCodeAt(m)===124?(u=We,m++):(u=e,E===0&&B(Ke)),u!==e&&(X=o,u=Ze()),o=u,o===e&&(o=m,s.charCodeAt(m)===125?(u=Me,m++):(u=e,E===0&&B(Ce)),u!==e&&(X=o,u=tt()),o=u))),o}function Je(){let o;return o=Ue(),o===e&&(o=ft()),o}function Ue(){let o,u,y,v;return Ct.test(s.charAt(m))?(o=s.charAt(m),m++):(o=e,E===0&&B(mt)),o===e&&(o=m,u=Wt(),u!==e?(y=m,s.charCodeAt(m)===92?(v=W,m++):(v=e,E===0&&B(Ae)),v!==e&&(X=y,v=Ne()),y=v,y===e&&(y=m,s.charCodeAt(m)===124?(v=We,m++):(v=e,E===0&&B(Ke)),v!==e&&(X=y,v=Ze()),y=v,y===e&&(y=m,s.charCodeAt(m)===91?(v=se,m++):(v=e,E===0&&B(K)),v!==e&&(X=y,v=dt()),y=v,y===e&&(y=m,s.charCodeAt(m)===93?(v=q,m++):(v=e,E===0&&B(V)),v!==e&&(X=y,v=at()),y=v,y===e&&(y=m,s.charCodeAt(m)===123?(v=Xe,m++):(v=e,E===0&&B(qe)),v!==e&&(X=y,v=A()),y=v,y===e&&(y=m,s.charCodeAt(m)===125?(v=Me,m++):(v=e,E===0&&B(Ce)),v!==e&&(X=y,v=tt()),y=v,y===e&&(y=m,s.charCodeAt(m)===37?(v=Ve,m++):(v=e,E===0&&B(ot)),v!==e&&(X=y,v=Re()),y=v,y===e&&(y=m,s.charCodeAt(m)===35?(v=f,m++):(v=e,E===0&&B($)),v!==e&&(X=y,v=Et()),y=v))))))),y!==e?(X=o,u=Y(y),o=u):(m=o,o=e)):(m=o,o=e)),o}function ys(){let o,u,y,v,z,re,Le,pt;return o=m,s.charCodeAt(m)===123?(u=Xe,m++):(u=e,E===0&&B(qe)),u!==e?(y=Ee(),y!==e?(v=m,z=Ut(),z!==e?v=s.substring(v,m):v=z,v!==e?(z=Ee(),z!==e?(re=O(),re===e&&(re=null),re!==e?(Le=Ee(),Le!==e?(s.charCodeAt(m)===125?(pt=Me,m++):(pt=e,E===0&&B(Ce)),pt!==e?(X=o,u=lt(v,re),o=u):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e)):(m=o,o=e),o}function O(){let o,u,y,v;return o=m,s.charCodeAt(m)===58?(u=Kt,m++):(u=e,E===0&&B(we)),u!==e?(y=Ee(),y!==e?(v=Ds(),v!==e?(X=o,u=xt(v),o=u):(m=o,o=e)):(m=o,o=e)):(m=o,o=e),o}function Ut(){let o,u;if(o=[],Gt.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(St)),u!==e)for(;u!==e;)o.push(u),Gt.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(St));else o=e;return o}function Ds(){let o,u;for(o=[],u=te();u!==e;)o.push(u),u=te();return o}function te(){let o,u,y,v;return At.test(s.charAt(m))?(o=s.charAt(m),m++):(o=e,E===0&&B(le)),o===e&&(o=m,u=Wt(),u!==e?(y=m,s.charCodeAt(m)===92?(v=W,m++):(v=e,E===0&&B(Ae)),v!==e&&(X=y,v=Ne()),y=v,y===e&&(y=m,s.charCodeAt(m)===125?(v=Me,m++):(v=e,E===0&&B(Ce)),v!==e&&(X=y,v=tt()),y=v,y===e&&(y=m,s.charCodeAt(m)===123?(v=Xe,m++):(v=e,E===0&&B(qe)),v!==e&&(X=y,v=A()),y=v)),y!==e?(X=o,u=Y(y),o=u):(m=o,o=e)):(m=o,o=e)),o}function Ee(){let o,u;for(E++,o=[],Lt.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(Ye));u!==e;)o.push(u),Lt.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(Ye));return E--,o===e&&(u=e,E===0&&B(fs)),o}function ft(){let o,u;if(E++,o=[],Tt.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(Mt)),u!==e)for(;u!==e;)o.push(u),Tt.test(s.charAt(m))?(u=s.charAt(m),m++):(u=e,E===0&&B(Mt));else o=e;return E--,o===e&&(u=e,E===0&&B(bt)),o}function dr(){let o;return o=R(),o===e&&(o=Ht(),o===e&&(o=Os())),o}function Os(){let o,u,y;return o=m,u=R(),u!==e?(y=Ht(),y!==e?(u=[u,y],o=u):(m=o,o=e)):(m=o,o=e),o}function Ht(){let o;return s.charCodeAt(m)===10?(o=us,m++):(o=e,E===0&&B(hs)),o}function R(){let o;return s.charCodeAt(m)===13?(o=Vt,m++):(o=e,E===0&&B(ms)),o}function Wt(){let o;return s.charCodeAt(m)===92?(o=W,m++):(o=e,E===0&&B(Ae)),o}if(D=a(),D!==e&&m===s.length)return D;throw D!==e&&m<s.length&&B(Ls()),or(L,g<s.length?s.charAt(g):null,g<s.length?bs(g,g+1):bs(g,g))}const El=Cl;class xl extends Mi{parse(t){return this.parseWithParser(t,El)}}var Sl=xl;const _r=/\s/,Al=/^\s*((([A-G])(#|b)?([^/\s]*)(\/([A-G])(#|b)?)?)(\s|$)+)+(\s|$)+/;class Ll{constructor({preserveWhitespace:t=!0}={}){N(this,"processingText",!0);N(this,"preserveWhitespace",!0);N(this,"song",new os);N(this,"songLine",null);N(this,"chordLyricsPair",null);N(this,"lines",[]);N(this,"currentLine",0);N(this,"lineCount",0);hi(`ChordSheetParser is deprecated, please use ChordsOverWordsParser. 

ChordsOverWordsParser aims to support any kind of chord, whereas ChordSheetParser lacks 
support for many variations. Besides that, some chordpro feature have been ported back 
to ChordsOverWordsParser, which adds some interesting functionality.`),this.preserveWhitespace=t}parse(t,{song:e}={}){for(this.initialize(t,e);this.hasNextLine();){const r=this.readLine();this.parseLine(r)}return this.endOfSong(),this.song}endOfSong(){}parseLine(t){this.songLine=this.song.addLine(),t.trim().length===0?this.chordLyricsPair=null:this.parseNonEmptyLine(t)}parseNonEmptyLine(t){if(!this.songLine)throw new Error("Expected this.songLine to be present");if(this.chordLyricsPair=this.songLine.addChordLyricsPair(),Al.test(t)&&this.hasNextLine()){const e=this.readLine();this.parseLyricsWithChords(t,e)}else this.chordLyricsPair.lyrics=`${t}`}initialize(t,e=null){e&&(this.song=e),this.lines=mi(t).split(`
`),this.currentLine=0,this.lineCount=this.lines.length,this.processingText=!0}readLine(){const t=this.lines[this.currentLine];return this.currentLine+=1,t}hasNextLine(){return this.currentLine<this.lineCount}parseLyricsWithChords(t,e){if(this.processCharacters(t,e),!this.chordLyricsPair)throw new Error("Expected this.chordLyricsPair to be present");this.chordLyricsPair.lyrics+=e.substring(t.length),this.chordLyricsPair.chords=this.chordLyricsPair.chords.trim(),this.chordLyricsPair.lyrics&&(this.chordLyricsPair.lyrics=this.chordLyricsPair.lyrics.trim()),e.trim().length||(this.songLine=this.song.addLine())}processCharacters(t,e){for(let r=0,n=t.length;r<n;r+=1){const a=t[r],l=t[r+1],d=_r.test(a);if(this.addCharacter(a,l),!this.chordLyricsPair)throw new Error("Expected this.chordLyricsPair to be present");this.chordLyricsPair.lyrics+=e[r]||"",this.processingText=!d}}addCharacter(t,e){const r=_r.test(t);if(r||this.ensureChordLyricsPairInitialized(),!r||this.shouldAddCharacterToChords(e)){if(!this.chordLyricsPair)throw new Error("Expected this.chordLyricsPair to be present");this.chordLyricsPair.chords+=t}}shouldAddCharacterToChords(t){return t&&_r.test(t)&&this.preserveWhitespace}ensureChordLyricsPairInitialized(){if(!this.processingText){if(!this.songLine)throw new Error("Expected this.songLine to be present");this.chordLyricsPair=this.songLine.addChordLyricsPair(),this.processingText=!0}}}var Pi=Ll;function vr(s,t,e){return e=e||" ",s.length>t?s:(t-=s.length,e+=e.repeat(t),s+e.slice(0,t))}class rs extends Error{static buildMessage(t,e){function r(p){return p.charCodeAt(0).toString(16).toUpperCase()}function n(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function a(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function l(p){switch(p.type){case"literal":return'"'+n(p.text)+'"';case"class":const f=p.parts.map($=>Array.isArray($)?a($[0])+"-"+a($[1]):a($));return"["+(p.inverted?"^":"")+f+"]";case"any":return"any character";case"end":return"end of input";case"other":return p.description}}function d(p){const f=p.map(l);let $,C;if(f.sort(),f.length>0){for($=1,C=1;$<f.length;$++)f[$-1]!==f[$]&&(f[C]=f[$],C++);f.length=C}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function b(p){return p?'"'+n(p)+'"':"end of input"}return"Expected "+d(t)+" but "+b(e)+" found."}constructor(t,e,r,n){super(),this.message=t,this.expected=e,this.found=r,this.location=n,this.name="PeggySyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,rs.prototype):this.__proto__=rs.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,rs)}format(t){let e="Error: "+this.message;if(this.location){let r=null,n;for(n=0;n<t.length;n++)if(t[n].grammarSource===this.location.source){r=t[n].text.split(/\r\n|\n|\r/g);break}let a=this.location.start,l=this.location.source+":"+a.line+":"+a.column;if(r){let d=this.location.end,b=vr("",a.line.toString().length," "),p=r[a.line-1],f=a.line===d.line?d.column:p.length+1;e+=`
 --> `+l+`
`+b+` |
`+a.line+" | "+p+`
`+b+" | "+vr("",a.column-1," ")+vr("",f-a.column,"^")}else e+=`
 at `+l}return e}}function Tl(s,t){t=t!==void 0?t:{};const e={},r=t.grammarSource,n={ChordSheet:o};let a=o;const l=function(i,c){return{type:"chordSheet",lines:[...i,...c]}},d=function(i,c,_){return[...(i==null?void 0:i.length)>0?[{type:"line",items:[]}]:[],...c,_]},b=function(i){return i},p=function(i){return i.type==="chordsLine"?{type:"line",items:i.items.map(c=>{const _={type:"chordLyricsPair"};return c.type==="chord"?{..._,chord:c}:{..._,chords:c.value}})}:i},f=function(i,c){const _=i.items,T=_.map((ae,ze)=>{const rt=_[ze+1],ra=ae.column-1,hn=rt?rt.column-1:c.length,Rs=c.substring(ra,hn),pr=/(\s+)(\S+)/.exec(Rs),zs=pr?pr.index+pr[1].length:null,mn=ae.type==="chord"?{chord:ae}:{chords:ae.value};return zs&&zs<hn?[{type:"chordLyricsPair",...mn,lyrics:Rs.substring(0,zs)},{type:"chordLyricsPair",chords:"",lyrics:Rs.substring(zs)}]:{type:"chordLyricsPair",...mn,lyrics:Rs}}).flat(),H=_[0];if(H&&H.column>1){const ae=H.column;ae>0&&T.unshift({type:"chordLyricsPair",chords:"",lyrics:c.substring(0,ae-1)})}return{type:"line",items:T}},$=function(i){return{type:"chordsLine",items:i}},C=function(i){return i},S="/",j=te("/",!1),M="|",G=te("|",!1),se="-",K=te("-",!1),q=function(i){return{type:"symbol",value:i,column:Ds().start.column}},V=function(i){return i.length===0?{type:"line",items:[]}:{type:"line",items:[{type:"chordLyricsPair",chords:"",lyrics:i}]}},ie=function(i){return i},ve=function(i){return{type:"line",items:[{type:"tag",name:"comment",value:i}]}},oe="verse",W=te("verse",!0),Ae="chorus",I=te("chorus",!0),U="bridge",Y=te("bridge",!0),Te="tag",pe=te("tag",!0),Me="interlude",Ce=te("interlude",!0),he="instrumental",me=te("instrumental",!0),ke="intro",ge=te("intro",!0),We=/^[^\n\r]/,Ke=Ee([`
`,"\r"],!0,!1),Ge=function(i,c){return[...i,c].filter(_=>_).map(([_,T])=>({type:"line",items:[{type:"tag",name:_,value:T}]}))},Z=function(i,c){return{type:"line",items:[{type:"tag",name:i,value:c}]}},de=function(i){return i},Ie="{",at=te("{",!1),Ze="}",tt=te("}",!1),Ct=function(i){return i},mt=function(i,c){return[i,c]},Ne=":",dt=te(":",!1),Xe=/^[a-zA-Z0-9\-_]/,qe=Ee([["a","z"],["A","Z"],["0","9"],"-","_"],!1,!1),A=/^[^\n\r}]/,Ve=Ee([`
`,"\r","}"],!0,!1),ot="---",Re=te("---",!1),Et=dr("whitespace"),lt=/^[ \t]/,Kt=Ee([" ","	"],!1,!1),we=`
`,xt=te(`
`,!1),Gt="\r",St=te("\r",!1),At=function(i){return{type:"chord",...i,column:Ds().start.column}},le="#",fs=te("#",!1),Lt="b",Ye=te("b",!1),bt=/^[a-zA-Z0-9()#+]/,Tt=Ee([["a","z"],["A","Z"],["0","9"],"(",")","#","+"],!1,!1),Mt=function(i,c,_,T){return{base:i,modifier:c,suffix:_,...T,chordType:"symbol"}},us=/^[A-Ga-g]/,hs=Ee([["A","G"],["a","g"]],!1,!1),Vt=function(i,c){return{bassBase:i,bassModifier:c}},ms=function(i,c,_,T){return{base:c,modifier:i,suffix:_,...T,chordType:"numeral"}},m="III",X=te("III",!1),ct="iii",g=te("iii",!1),L="VII",E=te("VII",!1),D="vii",ne=te("vii",!1),Fe="II",st=te("II",!1),Ls="ii",Ts=te("ii",!1),ds="IV",bs=te("IV",!1),B="iv",or=te("iv",!1),ps="VI",Ms=te("VI",!1),gs="vi",Ps=te("vi",!1),lr="I",cr=te("I",!1),js="i",ks=te("i",!1),Is="V",Ns=te("V",!1),$s="v",fr=te("v",!1),Fs=function(i,c){return{bassBase:c,bassModifier:i}},ur=function(i,c,_,T){return{base:c,modifier:i,suffix:_,...T,chordType:"numeric"}},hr=/^[1-7]/,mr=Ee([["1","7"]],!1,!1);let h=0,ce=0;const Je=[{line:1,column:1}];let Ue=0,ys=[],O=0,Ut;if(t.startRule!==void 0){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');a=n[t.startRule]}function Ds(){return Ht(ce,h)}function te(i,c){return{type:"literal",text:i,ignoreCase:c}}function Ee(i,c,_){return{type:"class",parts:i,inverted:c,ignoreCase:_}}function ft(){return{type:"end"}}function dr(i){return{type:"other",description:i}}function Os(i){let c=Je[i],_;if(c)return c;for(_=i-1;!Je[_];)_--;for(c=Je[_],c={line:c.line,column:c.column};_<i;)s.charCodeAt(_)===10?(c.line++,c.column=1):c.column++,_++;return Je[i]=c,c}function Ht(i,c){const _=Os(i),T=Os(c);return{source:r,start:{offset:i,line:_.line,column:_.column},end:{offset:c,line:T.line,column:T.column}}}function R(i){h<Ue||(h>Ue&&(Ue=h,ys=[]),ys.push(i))}function Wt(i,c,_){return new rs(rs.buildMessage(i,c),i,c,_)}function o(){let i,c,_;return i=h,c=Ui(),c===e&&(c=null),c!==e?(_=u(),_===e&&(_=null),_!==e?(ce=i,c=l(c,_),i=c):(h=i,i=e)):(h=i,i=e),i}function u(){let i,c,_,T;if(i=h,c=vs(),c===e&&(c=null),c!==e){for(_=[],T=y();T!==e;)_.push(T),T=y();_!==e?(T=v(),T===e&&(T=null),T!==e?(ce=i,c=d(c,_,T),i=c):(h=i,i=e)):(h=i,i=e)}else h=i,i=e;return i}function y(){let i,c,_;return i=h,c=v(),c!==e?(_=vs(),_!==e?(ce=i,c=b(c),i=c):(h=i,i=e)):(h=i,i=e),i}function v(){let i,c;return i=h,c=Gi(),c===e&&(c=Hi(),c===e&&(c=z(),c===e&&(c=re(),c===e&&(c=_s())))),c!==e&&(ce=i,c=p(c)),i=c,i}function z(){let i,c,_,T;return i=h,c=re(),c!==e?(_=vs(),_!==e?(T=Ki(),T!==e?(ce=i,c=f(c,T),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function re(){let i,c,_;if(i=h,c=[],_=Le(),_===e&&(_=Qr()),_!==e)for(;_!==e;)c.push(_),_=Le(),_===e&&(_=Qr());else c=e;return c!==e&&(ce=i,c=$(c)),i=c,i}function Le(){let i,c,_,T;return i=h,c=He(),c!==e?(_=pt(),_!==e?(T=He(),T!==e?(ce=i,c=C(_),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function pt(){let i,c;return i=h,s.charCodeAt(h)===47?(c=S,h++):(c=e,O===0&&R(j)),c===e&&(s.charCodeAt(h)===124?(c=M,h++):(c=e,O===0&&R(G)),c===e&&(s.charCodeAt(h)===45?(c=se,h++):(c=e,O===0&&R(K)))),c!==e&&(ce=i,c=q(c)),i=c,i}function _s(){let i,c;return i=h,c=Bi(),c!==e&&(ce=i,c=V(c)),i=c,i}function Bi(){let i,c,_;for(i=h,c=[],_=Zt();_!==e;)c.push(_),_=Zt();return c!==e?i=s.substring(i,h):i=c,i}function Ki(){let i,c,_;if(i=h,c=[],_=Zt(),_!==e)for(;_!==e;)c.push(_),_=Zt();else c=e;return c!==e?i=s.substring(i,h):i=c,i}function Qr(){let i,c,_,T;return i=h,c=He(),c!==e?(_=qi(),_!==e?(T=He(),T!==e?(ce=i,c=ie(_),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function Gi(){let i,c,_,T,H,ae,ze,rt;if(i=h,c=h,_=h,T=He(),T!==e)if(H=Vi(),H!==e)if(ae=He(),ae!==e){for(ze=[],rt=Zt();rt!==e;)ze.push(rt),rt=Zt();ze!==e?(rt=He(),rt!==e?(T=[T,H,ae,ze,rt],_=T):(h=_,_=e)):(h=_,_=e)}else h=_,_=e;else h=_,_=e;else h=_,_=e;return _!==e?c=s.substring(c,h):c=_,c!==e&&(ce=i,c=ve(c)),i=c,i}function Vi(){let i;return s.substr(h,5).toLowerCase()===oe?(i=s.substr(h,5),h+=5):(i=e,O===0&&R(W)),i===e&&(s.substr(h,6).toLowerCase()===Ae?(i=s.substr(h,6),h+=6):(i=e,O===0&&R(I)),i===e&&(s.substr(h,6).toLowerCase()===U?(i=s.substr(h,6),h+=6):(i=e,O===0&&R(Y)),i===e&&(s.substr(h,3).toLowerCase()===Te?(i=s.substr(h,3),h+=3):(i=e,O===0&&R(pe)),i===e&&(s.substr(h,9).toLowerCase()===Me?(i=s.substr(h,9),h+=9):(i=e,O===0&&R(Ce)),i===e&&(s.substr(h,12).toLowerCase()===he?(i=s.substr(h,12),h+=12):(i=e,O===0&&R(me)),i===e&&(s.substr(h,5).toLowerCase()===ke?(i=s.substr(h,5),h+=5):(i=e,O===0&&R(ge)))))))),i}function Zt(){let i;return We.test(s.charAt(h))?(i=s.charAt(h),h++):(i=e,O===0&&R(Ke)),i}function Ui(){let i,c,_,T;for(i=h,c=[],_=en();_!==e;)c.push(_),_=en();return c!==e?(_=tn(),_===e&&(_=null),_!==e?(T=Zi(),T===e&&(T=null),T!==e?(ce=i,c=Ge(c,_),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function Hi(){let i,c,_,T,H,ae,ze;return i=h,c=h,_=nn(),_!==e?c=s.substring(c,h):c=_,c!==e?(_=He(),_!==e?(T=rn(),T!==e?(H=He(),H!==e?(ae=h,ze=an(),ze!==e?ae=s.substring(ae,h):ae=ze,ae!==e?(ce=i,c=Z(c,ae),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function en(){let i,c,_;return i=h,c=tn(),c!==e?(_=vs(),_!==e?(ce=i,c=de(c),i=c):(h=i,i=e)):(h=i,i=e),i}function tn(){let i;return i=Wi(),i===e&&(i=sn()),i}function Wi(){let i,c,_,T,H,ae;return i=h,s.charCodeAt(h)===123?(c=Ie,h++):(c=e,O===0&&R(at)),c!==e?(_=He(),_!==e?(T=sn(),T!==e?(H=He(),H!==e?(s.charCodeAt(h)===125?(ae=Ze,h++):(ae=e,O===0&&R(tt)),ae!==e?(ce=i,c=Ct(T),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function sn(){let i,c,_,T,H,ae,ze;return i=h,c=h,_=nn(),_!==e?c=s.substring(c,h):c=_,c!==e?(_=He(),_!==e?(T=rn(),T!==e?(H=He(),H!==e?(ae=h,ze=an(),ze!==e?ae=s.substring(ae,h):ae=ze,ae!==e?(ce=i,c=mt(c,ae),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function rn(){let i;return s.charCodeAt(h)===58?(i=Ne,h++):(i=e,O===0&&R(dt)),i}function nn(){let i,c;if(i=[],Xe.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(qe)),c!==e)for(;c!==e;)i.push(c),Xe.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(qe));else i=e;return i}function an(){let i,c;if(i=[],A.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(Ve)),c!==e)for(;c!==e;)i.push(c),A.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(Ve));else i=e;return i}function Zi(){let i,c,_;return i=h,s.substr(h,3)===ot?(c=ot,h+=3):(c=e,O===0&&R(Re)),c!==e?(_=vs(),_!==e?(c=[c,_],i=c):(h=i,i=e)):(h=i,i=e),i}function He(){let i,c;for(O++,i=[],lt.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(Kt));c!==e;)i.push(c),lt.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(Kt));return O--,i===e&&(c=e,O===0&&R(Et)),i}function vs(){let i;return i=ln(),i===e&&(i=on(),i===e&&(i=Xi())),i}function Xi(){let i,c,_;return i=h,c=ln(),c!==e?(_=on(),_!==e?(c=[c,_],i=c):(h=i,i=e)):(h=i,i=e),i}function on(){let i;return s.charCodeAt(h)===10?(i=we,h++):(i=e,O===0&&R(xt)),i}function ln(){let i;return s.charCodeAt(h)===13?(i=Gt,h++):(i=e,O===0&&R(St)),i}function qi(){let i,c;return i=h,c=Qi(),c===e&&(c=ta(),c===e&&(c=Yi())),c!==e&&(ce=i,c=At(c)),i=c,i}function Xt(){let i;return s.charCodeAt(h)===35?(i=le,h++):(i=e,O===0&&R(fs)),i===e&&(s.charCodeAt(h)===98?(i=Lt,h++):(i=e,O===0&&R(Ye))),i}function br(){let i,c;for(i=[],bt.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(Tt));c!==e;)i.push(c),bt.test(s.charAt(h))?(c=s.charAt(h),h++):(c=e,O===0&&R(Tt));return i}function Yi(){let i,c,_,T,H;return i=h,c=cn(),c!==e?(_=Xt(),_===e&&(_=null),_!==e?(T=h,H=br(),H!==e?T=s.substring(T,h):T=H,T!==e?(H=Ji(),H===e&&(H=null),H!==e?(ce=i,c=Mt(c,_,T,H),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function cn(){let i;return us.test(s.charAt(h))?(i=s.charAt(h),h++):(i=e,O===0&&R(hs)),i}function Ji(){let i,c,_,T;return i=h,s.charCodeAt(h)===47?(c=S,h++):(c=e,O===0&&R(j)),c!==e?(_=cn(),_!==e?(T=Xt(),T===e&&(T=null),T!==e?(ce=i,c=Vt(_,T),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function Qi(){let i,c,_,T,H;return i=h,c=Xt(),c===e&&(c=null),c!==e?(_=fn(),_!==e?(T=h,H=br(),H!==e?T=s.substring(T,h):T=H,T!==e?(H=ea(),H===e&&(H=null),H!==e?(ce=i,c=ms(c,_,T,H),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function fn(){let i;return s.substr(h,3)===m?(i=m,h+=3):(i=e,O===0&&R(X)),i===e&&(s.substr(h,3)===ct?(i=ct,h+=3):(i=e,O===0&&R(g)),i===e&&(s.substr(h,3)===L?(i=L,h+=3):(i=e,O===0&&R(E)),i===e&&(s.substr(h,3)===D?(i=D,h+=3):(i=e,O===0&&R(ne)),i===e&&(s.substr(h,2)===Fe?(i=Fe,h+=2):(i=e,O===0&&R(st)),i===e&&(s.substr(h,2)===Ls?(i=Ls,h+=2):(i=e,O===0&&R(Ts)),i===e&&(s.substr(h,2)===ds?(i=ds,h+=2):(i=e,O===0&&R(bs)),i===e&&(s.substr(h,2)===B?(i=B,h+=2):(i=e,O===0&&R(or)),i===e&&(s.substr(h,2)===ps?(i=ps,h+=2):(i=e,O===0&&R(Ms)),i===e&&(s.substr(h,2)===gs?(i=gs,h+=2):(i=e,O===0&&R(Ps)),i===e&&(s.charCodeAt(h)===73?(i=lr,h++):(i=e,O===0&&R(cr)),i===e&&(s.charCodeAt(h)===105?(i=js,h++):(i=e,O===0&&R(ks)),i===e&&(s.charCodeAt(h)===86?(i=Is,h++):(i=e,O===0&&R(Ns)),i===e&&(s.charCodeAt(h)===118?(i=$s,h++):(i=e,O===0&&R(fr))))))))))))))),i}function ea(){let i,c,_,T;return i=h,s.charCodeAt(h)===47?(c=S,h++):(c=e,O===0&&R(j)),c!==e?(_=Xt(),_===e&&(_=null),_!==e?(T=fn(),T!==e?(ce=i,c=Fs(_,T),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function ta(){let i,c,_,T,H;return i=h,c=Xt(),c===e&&(c=null),c!==e?(_=un(),_!==e?(T=h,H=br(),H!==e?T=s.substring(T,h):T=H,T!==e?(H=sa(),H===e&&(H=null),H!==e?(ce=i,c=ur(c,_,T,H),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}function un(){let i;return hr.test(s.charAt(h))?(i=s.charAt(h),h++):(i=e,O===0&&R(mr)),i}function sa(){let i,c,_,T;return i=h,s.charCodeAt(h)===47?(c=S,h++):(c=e,O===0&&R(j)),c!==e?(_=Xt(),_===e&&(_=null),_!==e?(T=un(),T!==e?(ce=i,c=Fs(_,T),i=c):(h=i,i=e)):(h=i,i=e)):(h=i,i=e),i}if(Ut=a(),Ut!==e&&h===s.length)return Ut;throw Ut!==e&&h<s.length&&R(ft()),Wt(ys,Ue<s.length?s.charAt(Ue):null,Ue<s.length?Ht(Ue,Ue+1):Ht(Ue,Ue))}const Ml=Tl;class Pl extends Mi{parse(t){return this.parseWithParser(t,Ml)}}var jl=Pl;class kl extends Rr{format(t){const{bodyParagraphs:e,expandedBodyParagraphs:r}=t;return this.template({song:t,configuration:this.configuration,bodyParagraphs:this.configuration.expandChorusDirective?r:e})}static cssString(t=""){xn("The class method cssString() was removed in favor of the instance PROPERTY. Please use `new <Formatter>().cssString` instead.")}cssString(t=""){return wo(this.defaultCss,t)}static cssObject(){xn("The class method cssObject() was removed in favor of the instance PROPERTY. Please use `new <Formatter>().cssObject` instead.")}get cssObject(){return this.defaultCss}}var ji=kl;function Il(s,t){return/^\d+$/.test(s)?parseInt(s,10):Qe.distance(t,s)}function Nl(s,t,e,r){let n=-1*(s||0);return e&&(t&&(n+=Il(t,e)),r&&(n+=Qe.distance(e,r))),n}function Qs(s,t,e,{renderKey:r=null,useUnicodeModifier:n=!1}={}){var f;const a=nr.parse(s),l=e.key,d=parseInt(e.metadata.getSingle(As),10);if(!a)return s;const b=Nl(d,t.transposeKey,l,r),p=r||((f=Qe.wrap(t.key||e.key))==null?void 0:f.transpose(b))||null;return a.transpose(b).normalize(p).toString({useUnicodeModifier:n})}const Pr=s=>s instanceof Oe,Jr=s=>s.items.some(t=>t.isRenderable()),ki=s=>s instanceof $e,Ii=s=>s.name==="comment";function Ni(s){return s.trim().replace(/(<\/[a-z]+>)\s+(<)/g,"$1$2").replace(/(\n)\s+/g,"")}function It(s,t){return s.map(t).join("")}function xe(s,t){return s?t():""}const Fi=s=>s.items.some(t=>t instanceof Oe&&!rr(t.lyrics)||t instanceof $e&&t.isRenderable()||Or(t)),Di=s=>{const t=["row"];return Jr(s)||t.push("empty-line"),t.join(" ")},Oi=s=>{const t=["paragraph"];return s.type!==Dr&&s.type!==yt&&t.push(s.type),t.join(" ")},Ri=(s,t,e)=>{if(!t)throw new Error("cannot evaluate, metadata is null");return s.evaluate(t,e.get("metadata.separator"))};function gt(s){const t=s.toCssString();return t?` style="${t}"`:""}var Fl=({configuration:s,configuration:{key:t},song:e,renderBlankLines:r=!1,song:{title:n,subtitle:a,metadata:l},bodyParagraphs:d})=>Ni(`
  ${xe(n,()=>`<h1>${n}</h1>`)}
  ${xe(a,()=>`<h2>${a}</h2>`)}
  
  <div class="chord-sheet">
    ${It(d,b=>`
      <div class="${Oi(b)}">
        ${It(b.lines,p=>`
          ${xe(r||Jr(p),()=>`
            <div class="${Di(p)}">
              ${It(p.items,f=>`
                ${xe(Pr(f),()=>`
                  <div class="column">
                    <div class="chord"${gt(p.chordFont)}>${Qs(f.chords,p,e,{renderKey:t,useUnicodeModifier:s.useUnicodeModifiers})}</div>
                    <div class="lyrics"${gt(p.textFont)}>${f.lyrics}</div>
                  </div>
                `)}
                
                ${xe(ki(f),()=>`
                  ${xe(Ii(f),()=>`
                    <div class="comment">${f.value}</div>
                  `)}
                  
                  ${xe(f.hasRenderableLabel(),()=>`
                    <h3 class="label">${f.value}</h3>
                  `)}
                `)}
                
                ${xe(Or(f),()=>`
                  <div class="column">
                    <div class="chord"></div>
                    <div class="lyrics"${gt(p.textFont)}>${Ri(f,l,s)}</div>
                  </div>
                `)}
              `)}
            </div>
          `)}
        `)}
      </div>
    `)}
  </div>
`);const Dl={".chord:not(:last-child)":{paddingRight:"10px"},".paragraph":{marginBottom:"1em"},".row":{display:"flex"},".chord:after":{content:"'\\200b'"},".lyrics:after":{content:"'\\200b'"}};class Ol extends ji{get template(){return Fl}get defaultCss(){return Dl}}var Rl=Ol,zl=({configuration:s,configuration:{key:t},song:e,renderBlankLines:r=!1,song:{title:n,subtitle:a,bodyLines:l,metadata:d},bodyParagraphs:b})=>Ni(`
  ${xe(n,()=>`<h1>${n}</h1>`)}
  ${xe(a,()=>`<h2>${a}</h2>`)}

  ${xe(l.length>0,()=>`
    <div class="chord-sheet">
      ${It(b,p=>`
        <div class="${Oi(p)}">
          ${It(p.lines,f=>`
            ${xe(r||Jr(f),()=>`
              <table class="${Di(f)}">
                ${xe(ui(f),()=>`
                  <tr>
                    ${It(f.items,$=>`
                      ${xe(Pr($),()=>`
                        <td class="chord"${gt(f.chordFont)}>${Qs($.chords,f,e,{renderKey:t,useUnicodeModifier:s.useUnicodeModifiers})}</td>
                      `)}
                    `)}
                  </tr>
                `)}
                
                ${xe(Fi(f),()=>`
                  <tr>
                    ${It(f.items,$=>`
                      ${xe(Pr($),()=>`
                        <td class="lyrics"${gt(f.textFont)}>${$.lyrics}</td>
                      `)}
                      
                      ${xe(ki($),()=>`
                        ${xe(Ii($),()=>`
                          <td class="comment"${gt(f.textFont)}>${$.value}</td>
                        `)}
                        
                        ${xe($.hasRenderableLabel(),()=>`
                          <td><h3 class="label"${gt(f.textFont)}>${$.value}</h3></td>
                        `)}
                      `)}
                      
                      ${xe(Or($),()=>`
                        <td class="lyrics"${gt(f.textFont)}>${Ri($,d,s)}</td>
                      `)}
                    `)}
                  </tr>
                `)}
              </table>
            `)}
          `)}
        </div>
      `)}
    </div>
  `)}
`);const Bl={h1:{fontSize:"1.5em"},h2:{fontSize:"1.1em"},table:{borderSpacing:"0",color:"inherit"},td:{padding:"3px 0"},".chord:not(:last-child)":{paddingRight:"10px"},".paragraph":{marginBottom:"1em"}};class Kl extends ji{get template(){return zl}get defaultCss(){return Bl}}var Gl=Kl;class Vl extends Rr{constructor(){super(...arguments);N(this,"song",new os)}format(e){return this.song=e,[this.formatHeader(),this.formatParagraphs()].join("")}formatHeader(){const{title:e,subtitle:r}=this.song,n=e||r?`
`:"";return[this.formatTitle(e),this.formatSubTitle(r),n].join("")}formatParagraphs(){const{bodyParagraphs:e,expandedBodyParagraphs:r,metadata:n}=this.song,{expandChorusDirective:a}=this.configuration;return(a?r:e).map(l=>this.formatParagraph(l,n)).join(`

`)}formatParagraph(e,r){return e.lines.filter(n=>n.hasRenderableItems()).map(n=>this.formatLine(n,r)).join(`
`)}formatLine(e,r){return[this.formatLineTop(e,r),this.formatLineBottom(e,r)].filter(a=>!rr(a)).map(a=>(a||"").trimRight()).join(`
`)}formatTitle(e){return e?`${e.toUpperCase()}
`:""}formatSubTitle(e){return e?`${e}
`:""}formatLineTop(e,r){return ui(e)?this.formatLineWithFormatter(e,this.formatItemTop,r):null}chordLyricsPairLength(e,r){const n=Qs(e.chords,r,this.song,{renderKey:this.configuration.key}),{lyrics:a}=e,l=(n||"").length,d=(a||"").length;return l>=d?l+1:Math.max(l,d)}formatItemTop(e,r,n){if(e instanceof $e&&e.isRenderable())return e.value||"";if(e instanceof Oe){const a=Qs(e.chords,n,this.song,{renderKey:this.configuration.key,useUnicodeModifier:this.configuration.useUnicodeModifiers});return En(a,this.chordLyricsPairLength(e,n))}return""}formatLineBottom(e,r){return Fi(e)?this.formatLineWithFormatter(e,this.formatItemBottom,r):""}formatLineWithFormatter(e,r,n){return e.items.map(a=>r.call(this,a,n,e)).join("")}formatItemBottom(e,r,n){return e instanceof $e&&e.isRenderable()?e.value||"":e instanceof Oe?En(e.lyrics||"",this.chordLyricsPairLength(e,n)):"evaluate"in e?e.evaluate(r,this.configuration.get("metadata.separator")):""}}var Ul=Vl;const Hl=/^\[Verse.*]/,Wl=/^\[Chorus]/,Nn=/^\[([^\]]+)]/,Fn={[Ft]:ar,[$t]:as},wr={[Ft]:Kr,[$t]:Es};class Zl extends Pi{constructor(){super(...arguments);N(this,"currentSectionType",null)}parseLine(e){this.isSectionEnd()&&this.endSection(),Hl.test(e)?(this.startNewLine(),this.startSection(Ft)):Wl.test(e)?(this.startNewLine(),this.startSection($t)):Nn.test(e)?this.parseMetadataLine(e):super.parseLine(e)}parseMetadataLine(e){this.startNewLine(),this.endSection();const r=e.match(Nn)[1];if(!this.songLine)throw new Error("Expected this.songLine to be present");this.songLine.addTag(new $e(zr,r))}isSectionEnd(){return this.songLine!==null&&this.songLine.isEmpty()&&this.song.previousLine!==null&&!this.song.previousLine.isEmpty()}endOfSong(){super.endOfSong(),this.currentSectionType!==null&&this.currentSectionType in wr&&this.startNewLine(),this.endSection({addNewLine:!1})}startSection(e){this.currentSectionType&&this.endSection(),this.currentSectionType=e,this.song.setCurrentProperties(e),e in Fn&&this.song.addTag(new $e(Fn[e]))}endSection({addNewLine:e=!0}={}){this.currentSectionType!==null&&this.currentSectionType in wr&&(this.song.addTag(new $e(wr[this.currentSectionType])),e&&this.startNewLine()),this.song.setCurrentProperties(yt),this.currentSectionType=null}startNewLine(){this.songLine=this.song.addLine()}}var Xl=Zl,ql={ChordLyricsPair:Oe,ChordProFormatter:fl,ChordProParser:Sl,ChordSheetParser:Pi,ChordSheetSerializer:Ti,ChordsOverWordsParser:jl,Comment:ws,Composite:Lr,HtmlDivFormatter:Rl,HtmlTableFormatter:Gl,Line:Tr,Literal:Ss,Metadata:Li,Paragraph:Mr,Song:os,Tag:$e,Ternary:xs,TextFormatter:Ul,UltimateGuitarParser:Xl,CHORUS:$t,INDETERMINATE:Dr,NONE:yt,TAB:Er,VERSE:Ft};function Yl(s){let t,e,r,n,a,l,d,b,p,f;const $=s[4].default,C=aa($,s,s[3],null);return{c(){t=Q("div"),e=Q("div"),r=Q("button"),n=ye("×"),a=Pe(),C&&C.c(),this.h()},l(S){t=ee(S,"DIV",{class:!0,style:!0});var j=k(t);e=ee(j,"DIV",{class:!0,style:!0});var M=k(e);r=ee(M,"BUTTON",{class:!0});var G=k(r);n=_e(G,"×"),G.forEach(x),a=je(M),C&&C.l(M),M.forEach(x),j.forEach(x),this.h()},h(){w(r,"class","bg-letkwet-500 rounded-full text-white absolute -top-2 -right-2 w-10 h-10 text-xl font-bold"),w(e,"class","container svelte-1pawiih"),w(e,"style",l=`width: ${s[1]};`),w(t,"class","backdrop svelte-1pawiih"),w(t,"style",d=s[0]?"display: flex;":"")},m(S,j){J(S,t,j),P(t,e),P(e,r),P(r,n),P(e,a),C&&C.m(e,null),b=!0,p||(f=[De(window,"keydown",s[6]),De(r,"click",s[7]),De(e,"click",oa(s[5])),De(t,"click",s[8])],p=!0)},p(S,[j]){C&&C.p&&(!b||j&8)&&la(C,$,S,S[3],b?fa($,S[3],j,null):ca(S[3]),null),(!b||j&2&&l!==(l=`width: ${S[1]};`))&&w(e,"style",l),(!b||j&1&&d!==(d=S[0]?"display: flex;":""))&&w(t,"style",d)},i(S){b||(be(C,S),b=!0)},o(S){Se(C,S),b=!1},d(S){S&&x(t),C&&C.d(S),p=!1,er(f)}}}function Jl(s,t,e){let{$$slots:r={},$$scope:n}=t,{open:a=!1,width:l="auto"}=t;const d=jr();function b(C){ua.call(this,s,C)}const p=C=>{C.key==="Escape"&&d("close")},f=()=>d("close"),$=()=>d("close");return s.$$set=C=>{"open"in C&&e(0,a=C.open),"width"in C&&e(1,l=C.width),"$$scope"in C&&e(3,n=C.$$scope)},[a,l,d,n,r,b,p,f,$]}class Ql extends _t{constructor(t){super(),vt(this,t,Jl,Yl,wt,{open:0,width:1})}}function Dn(s,t,e){const r=s.slice();return r[7]=t[e],r[9]=e,r}function ec(s){let t,e,r;return{c(){t=fe("text"),e=ye(s[2]),r=ye("fr"),this.h()},l(n){t=ue(n,"text",{class:!0,fill:!0,x:!0,y:!0});var a=k(t);e=_e(a,s[2]),r=_e(a,"fr"),a.forEach(x),this.h()},h(){w(t,"class","eng"),w(t,"fill","#444"),w(t,"x","-12"),w(t,"y","8")},m(n,a){J(n,t,a),P(t,e),P(t,r)},p(n,a){a&4&&et(e,n[2])},d(n){n&&x(t)}}}function tc(s){let t,e;return{c(){t=fe("path"),this.h()},l(r){t=ue(r,"path",{stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(x),this.h()},h(){w(t,"stroke","#444"),w(t,"stroke-width","2"),w(t,"stroke-linecap","round"),w(t,"stroke-linejoin","round"),w(t,"d",e=`M ${s[4][s[1]].x} 0 H ${s[4][s[1]].length}`)},m(r,n){J(r,t,n)},p(r,n){n&2&&e!==(e=`M ${r[4][r[1]].x} 0 H ${r[4][r[1]].length}`)&&w(t,"d",e)},d(r){r&&x(t)}}}function On(s){let t,e=s[0],r=[];for(let n=0;n<e.length;n+=1)r[n]=Rn(Dn(s,e,n));return{c(){t=fe("g");for(let n=0;n<r.length;n+=1)r[n].c()},l(n){t=ue(n,"g",{});var a=k(t);for(let l=0;l<r.length;l+=1)r[l].l(a);a.forEach(x)},m(n,a){J(n,t,a);for(let l=0;l<r.length;l+=1)r[l].m(t,null)},p(n,a){if(a&19){e=n[0];let l;for(l=0;l<e.length;l+=1){const d=Dn(n,e,l);r[l]?r[l].p(d,a):(r[l]=Rn(d),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=e.length}},d(n){n&&x(t),ls(r,n)}}}function Rn(s){let t,e=s[7]+"",r,n;return{c(){t=fe("text"),r=ye(e),this.h()},l(a){t=ue(a,"text",{class:!0,"text-anchor":!0,fill:!0,x:!0,y:!0});var l=k(t);r=_e(l,e),l.forEach(x),this.h()},h(){w(t,"class","eng"),w(t,"text-anchor","middle"),w(t,"fill","#444"),w(t,"x",n=s[4][s[1]].x+s[9]*10),w(t,"y","53")},m(a,l){J(a,t,l),P(t,r)},p(a,l){l&1&&e!==(e=a[7]+"")&&et(r,e),l&2&&n!==(n=a[4][a[1]].x+a[9]*10)&&w(t,"x",n)},d(a){a&&x(t)}}}function sc(s){let t,e,r;function n(b,p){return b[2]===0?tc:ec}let a=n(s),l=a(s),d=!s[3]&&On(s);return{c(){t=fe("g"),e=fe("path"),l.c(),r=Be(),d&&d.c(),this.h()},l(b){t=ue(b,"g",{});var p=k(t);e=ue(p,"path",{stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(e).forEach(x),l.l(p),r=Be(),d&&d.l(p),p.forEach(x),this.h()},h(){w(e,"stroke","#444"),w(e,"stroke-width","0.25"),w(e,"stroke-linecap","square"),w(e,"stroke-linejoin","miter"),w(e,"d",s[5])},m(b,p){J(b,t,p),P(t,e),l.m(t,null),P(t,r),d&&d.m(t,null)},p(b,[p]){a===(a=n(b))&&l?l.p(b,p):(l.d(1),l=a(b),l&&(l.c(),l.m(t,r))),b[3]?d&&(d.d(1),d=null):d?d.p(b,p):(d=On(b),d.c(),d.m(t,null))},i:it,o:it,d(b){b&&x(t),l.d(),d&&d.d()}}}function rc(s,t,e){const r={4:{x:10,y:10,length:40},6:{x:0,y:0,length:50}};let{tuning:n,strings:a,baseFret:l=1,fretsOnChord:d,lite:b=!1}=t,p=Array((d||0)+1).fill(null).map((f,$)=>`M ${r[a].x} ${12*$} H ${r[a].length}`).join(" ")+" "+Array(a).fill(null).map((f,$)=>`M ${r[a].y+$*10} 0 V 48`).join(" ");return s.$$set=f=>{"tuning"in f&&e(0,n=f.tuning),"strings"in f&&e(1,a=f.strings),"baseFret"in f&&e(2,l=f.baseFret),"fretsOnChord"in f&&e(6,d=f.fretsOnChord),"lite"in f&&e(3,b=f.lite)},[n,a,l,b,r,p,d]}class nc extends _t{constructor(t){super(),vt(this,t,rc,sc,wt,{tuning:0,strings:1,baseFret:2,fretsOnChord:6,lite:3})}}const zi={4:0,6:-1};function ic(s){let t,e,r,n,a,l=!s[2]&&s[0]>0&&s[1]&&s[1]>0&&zn(s);return{c(){t=fe("g"),e=fe("circle"),l&&l.c(),this.h()},l(d){t=ue(d,"g",{});var b=k(t);e=ue(b,"circle",{"stroke-width":!0,stroke:!0,fill:!0,cx:!0,cy:!0,r:!0}),k(e).forEach(x),l&&l.l(b),b.forEach(x),this.h()},h(){w(e,"stroke-width","0.25"),w(e,"stroke","#444"),w(e,"fill",r=s[0]===0?"transparent":"#444"),w(e,"cx",s[3]),w(e,"cy",n=s[4].fret[s[0]]),w(e,"r",a=s[0]===0?s[5].open:s[5].fret)},m(d,b){J(d,t,b),P(t,e),l&&l.m(t,null)},p(d,b){b&1&&r!==(r=d[0]===0?"transparent":"#444")&&w(e,"fill",r),b&8&&w(e,"cx",d[3]),b&1&&n!==(n=d[4].fret[d[0]])&&w(e,"cy",n),b&1&&a!==(a=d[0]===0?d[5].open:d[5].fret)&&w(e,"r",a),!d[2]&&d[0]>0&&d[1]&&d[1]>0?l?l.p(d,b):(l=zn(d),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(d){d&&x(t),l&&l.d()}}}function ac(s){let t,e;return{c(){t=fe("text"),e=ye("×"),this.h()},l(r){t=ue(r,"text",{class:!0,"text-anchor":!0,fill:!0,x:!0,y:!0});var n=k(t);e=_e(n,"×"),n.forEach(x),this.h()},h(){w(t,"class","eng"),w(t,"text-anchor","middle"),w(t,"fill","#444"),w(t,"x",s[3]),w(t,"y","-2")},m(r,n){J(r,t,n),P(t,e)},p(r,n){n&8&&w(t,"x",r[3])},d(r){r&&x(t)}}}function zn(s){let t,e,r,n;return{c(){t=fe("text"),e=ye(s[1]),n=ye(`
      }`),this.h()},l(a){t=ue(a,"text",{fill:!0,"text-anchor":!0,style:!0,x:!0,y:!0});var l=k(t);e=_e(l,s[1]),l.forEach(x),n=_e(a,`
      }`),this.h()},h(){w(t,"fill","white"),w(t,"text-anchor","middle"),Gs(t,"font-weight","bold"),w(t,"x",s[3]),w(t,"y",r=s[4].finger[s[0]]-.5)},m(a,l){J(a,t,l),P(t,e),J(a,n,l)},p(a,l){l&2&&et(e,a[1]),l&8&&w(t,"x",a[3]),l&1&&r!==(r=a[4].finger[a[0]]-.5)&&w(t,"y",r)},d(a){a&&x(t),a&&x(n)}}}function oc(s){let t;function e(a,l){return a[0]===-1?ac:ic}let r=e(s),n=r(s);return{c(){n.c(),t=Be()},l(a){n.l(a),t=Be()},m(a,l){n.m(a,l),J(a,t,l)},p(a,[l]){r===(r=e(a))&&n?n.p(a,l):(n.d(1),n=r(a),n&&(n.c(),n.m(t.parentNode,t)))},i:it,o:it,d(a){n.d(a),a&&x(t)}}}function lc(s,t,e){let r,{string:n,fret:a=0,finger:l,strings:d,lite:b=!1}=t;const p={string:[50,40,30,20,10,0],fret:[-4,6.5,18,30,42,54],finger:[-3,8,19.5,31.5,43.5]},f={open:2,fret:4};return s.$$set=$=>{"string"in $&&e(6,n=$.string),"fret"in $&&e(0,a=$.fret),"finger"in $&&e(1,l=$.finger),"strings"in $&&e(7,d=$.strings),"lite"in $&&e(2,b=$.lite)},s.$$.update=()=>{s.$$.dirty&192&&e(3,r=p.string[n+zi[d]])},[a,l,b,r,p,f,n,d]}class cc extends _t{constructor(t){super(),vt(this,t,lc,oc,wt,{string:6,fret:0,finger:1,strings:7,lite:2})}}function Bn(s,t,e){const r=s.slice();return r[15]=t[e],r}function Kn(s,t,e){const r=s.slice();return r[15]=t[e],r}function Gn(s){let t,e,r,n,a,l,d,b,p;return{c(){t=fe("g"),e=fe("g"),r=fe("path"),a=fe("rect"),d=fe("g"),b=fe("path"),this.h()},l(f){t=ue(f,"g",{});var $=k(t);e=ue($,"g",{transform:!0});var C=k(e);r=ue(C,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),k(r).forEach(x),C.forEach(x),a=ue($,"rect",{fill:!0,x:!0,y:!0,width:!0,"fill-opacity":!0,height:!0}),k(a).forEach(x),d=ue($,"g",{transform:!0});var S=k(d);b=ue(S,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),k(b).forEach(x),S.forEach(x),$.forEach(x),this.h()},h(){w(r,"d","M 0, 0 m -4, 0 a 4,4 0 1,1 8,0"),w(r,"fill","#555"),w(r,"fill-opacity",.2),w(r,"transform","rotate(-90)"),w(e,"transform",n=`translate(${s[11](s[12],s[12])}, ${s[10].fret[s[4][0].value]})`),w(a,"fill","#555"),w(a,"x",s[8][s[12]][0]),w(a,"y",l=s[9][s[0]-1]),w(a,"width",(s[12]-1)*10),w(a,"fill-opacity",.2),w(a,"height","8.5"),w(b,"d","M 0, 0 m -4, 0 a 4,4 0 1,1 8,0"),w(b,"fill","#555"),w(b,"fill-opacity",.2),w(b,"transform","rotate(90)"),w(d,"transform",p=`translate(${s[11](1,s[12])}, ${s[10].fret[s[4][0].value]})`)},m(f,$){J(f,t,$),P(t,e),P(e,r),P(t,a),P(t,d),P(d,b)},p(f,$){$&16&&n!==(n=`translate(${f[11](f[12],f[12])}, ${f[10].fret[f[4][0].value]})`)&&w(e,"transform",n),$&1&&l!==(l=f[9][f[0]-1])&&w(a,"y",l),$&16&&p!==(p=`translate(${f[11](1,f[12])}, ${f[10].fret[f[4][0].value]})`)&&w(d,"transform",p)},d(f){f&&x(t)}}}function Vn(s){let t,e,r;return{c(){t=fe("circle"),this.h()},l(n){t=ue(n,"circle",{"stroke-width":!0,stroke:!0,fill:!0,cx:!0,cy:!0,r:!0}),k(t).forEach(x),this.h()},h(){w(t,"stroke-width","0.25"),w(t,"stroke","#444"),w(t,"fill","#444"),w(t,"cx",e=s[11](s[12]-s[15].position,s[12])),w(t,"cy",r=s[10].fret[s[15].value]),w(t,"r","4")},m(n,a){J(n,t,a)},p(n,a){a&16&&e!==(e=n[11](n[12]-n[15].position,n[12]))&&w(t,"cx",e),a&16&&r!==(r=n[10].fret[n[15].value])&&w(t,"cy",r)},d(n){n&&x(t)}}}function Un(s){let t,e=s[4],r=[];for(let n=0;n<e.length;n+=1)r[n]=Hn(Bn(s,e,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=Be()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);t=Be()},m(n,a){for(let l=0;l<r.length;l+=1)r[l].m(n,a);J(n,t,a)},p(n,a){if(a&7192){e=n[4];let l;for(l=0;l<e.length;l+=1){const d=Bn(n,e,l);r[l]?r[l].p(d,a):(r[l]=Hn(d),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=e.length}},d(n){ls(r,n),n&&x(t)}}}function Hn(s){let t,e,r,n;return{c(){t=fe("text"),e=ye(s[3]),this.h()},l(a){t=ue(a,"text",{"text-anchor":!0,fill:!0,x:!0,y:!0});var l=k(t);e=_e(l,s[3]),l.forEach(x),this.h()},h(){w(t,"text-anchor","middle"),w(t,"fill","white"),w(t,"x",r=s[11](s[12]-s[15].position,s[12])),w(t,"y",n=s[10].finger[s[15].value]-.5)},m(a,l){J(a,t,l),P(t,e)},p(a,l){l&8&&et(e,a[3]),l&16&&r!==(r=a[11](a[12]-a[15].position,a[12]))&&w(t,"x",r),l&16&&n!==(n=a[10].finger[a[15].value]-.5)&&w(t,"y",n)},d(a){a&&x(t)}}}function fc(s){let t,e,r,n,a=s[1]&&s[4].length>0&&Gn(s),l=s[4],d=[];for(let p=0;p<l.length;p+=1)d[p]=Vn(Kn(s,l,p));let b=!s[2]&&s[3]&&Un(s);return{c(){t=fe("g"),a&&a.c(),e=Be();for(let p=0;p<d.length;p+=1)d[p].c();r=fe("rect"),b&&b.c(),this.h()},l(p){t=ue(p,"g",{});var f=k(t);a&&a.l(f),e=Be();for(let $=0;$<d.length;$+=1)d[$].l(f);r=ue(f,"rect",{fill:!0,x:!0,y:!0,width:!0,height:!0}),k(r).forEach(x),b&&b.l(f),f.forEach(x),this.h()},h(){w(r,"fill","#444"),w(r,"x",n=s[8][s[12]][s[5]]),w(r,"y",s[7]),w(r,"width",s[6]),w(r,"height",8.25)},m(p,f){J(p,t,f),a&&a.m(t,null),P(t,e);for(let $=0;$<d.length;$+=1)d[$].m(t,null);P(t,r),b&&b.m(t,null)},p(p,[f]){if(p[1]&&p[4].length>0?a?a.p(p,f):(a=Gn(p),a.c(),a.m(t,e)):a&&(a.d(1),a=null),f&7184){l=p[4];let $;for($=0;$<l.length;$+=1){const C=Kn(p,l,$);d[$]?d[$].p(C,f):(d[$]=Vn(C),d[$].c(),d[$].m(t,r))}for(;$<d.length;$+=1)d[$].d(1);d.length=l.length}f&32&&n!==(n=p[8][p[12]][p[5]])&&w(r,"x",n),f&128&&w(r,"y",p[7]),f&64&&w(r,"width",p[6]),!p[2]&&p[3]?b?b.p(p,f):(b=Un(p),b.c(),b.m(t,null)):b&&(b.d(1),b=null)},i:it,o:it,d(p){p&&x(t),a&&a.d(),ls(d,p),b&&b.d()}}}function uc(s,t,e){let{frets:r,barre:n,capo:a=!1,lite:l=!1,finger:d}=t;const b={4:[10,20,30,40,50],6:[0,10,20,30,40,50]},p=[2.35,13.9,26,38],f={string:[50,40,30,20,10,0],fret:[-4,6.5,18,30,42,54],finger:[-3,8,19.5,31.5,43.5]},$=(K,q)=>f.string[K+zi[q]];let C=[],S=r.length,j=0,M=0,G=0,se=0;return s.$$set=K=>{"frets"in K&&e(13,r=K.frets),"barre"in K&&e(0,n=K.barre),"capo"in K&&e(1,a=K.capo),"lite"in K&&e(2,l=K.lite),"finger"in K&&e(3,d=K.finger)},s.$$.update=()=>{s.$$.dirty&24625&&(e(4,C=r.map((K,q)=>({position:q,value:K})).filter(K=>K.value===n)),e(5,j=C.length>0?C[0].position:0),e(14,M=C.length>0?C[C.length-1].position:0),e(6,G=(M-j)*10),e(7,se=p[n-1]))},[n,a,l,d,C,j,G,se,b,p,f,$,S,r,M]}class hc extends _t{constructor(t){super(),vt(this,t,uc,fc,wt,{frets:13,barre:0,capo:1,lite:2,finger:3})}}function Wn(s,t,e){const r=s.slice();return r[8]=t[e],r}function Zn(s,t,e){const r=s.slice();return r[11]=t[e],r[13]=e,r}function Xn(s){let t,e,r=s[0].barres,n=[];for(let l=0;l<r.length;l+=1)n[l]=qn(Zn(s,r,l));const a=l=>Se(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();t=Be()},l(l){for(let d=0;d<n.length;d+=1)n[d].l(l);t=Be()},m(l,d){for(let b=0;b<n.length;b+=1)n[b].m(l,d);J(l,t,d),e=!0},p(l,d){if(d&5){r=l[0].barres;let b;for(b=0;b<r.length;b+=1){const p=Zn(l,r,b);n[b]?(n[b].p(p,d),be(n[b],1)):(n[b]=qn(p),n[b].c(),be(n[b],1),n[b].m(t.parentNode,t))}for(ns(),b=r.length;b<n.length;b+=1)a(b);is()}},i(l){if(!e){for(let d=0;d<r.length;d+=1)be(n[d]);e=!0}},o(l){n=n.filter(Boolean);for(let d=0;d<n.length;d+=1)Se(n[d]);e=!1},d(l){ls(n,l),l&&x(t)}}}function qn(s){let t,e;return t=new hc({props:{capo:s[13]===0&&s[0].capo,barre:s[11],finger:s[0].fingers?s[0].fingers[s[0].frets.indexOf(s[11])]:null,frets:s[0].frets,lite:s[2]}}),{c(){Dt(t.$$.fragment)},l(r){Ot(t.$$.fragment,r)},m(r,n){Rt(t,r,n),e=!0},p(r,n){const a={};n&1&&(a.capo=r[13]===0&&r[0].capo),n&1&&(a.barre=r[11]),n&1&&(a.finger=r[0].fingers?r[0].fingers[r[0].frets.indexOf(r[11])]:null),n&1&&(a.frets=r[0].frets),n&4&&(a.lite=r[2]),t.$set(a)},i(r){e||(be(t.$$.fragment,r),e=!0)},o(r){Se(t.$$.fragment,r),e=!1},d(r){zt(t,r)}}}function Yn(s){let t,e;return t=new cc({props:{string:s[1].strings-s[8].position,fret:s[8].value,strings:s[1].strings,finger:s[0].fingers?s[0].fingers[s[8].position]:null,lite:s[2]}}),{c(){Dt(t.$$.fragment)},l(r){Ot(t.$$.fragment,r)},m(r,n){Rt(t,r,n),e=!0},p(r,n){const a={};n&3&&(a.string=r[1].strings-r[8].position),n&1&&(a.fret=r[8].value),n&2&&(a.strings=r[1].strings),n&1&&(a.finger=r[0].fingers?r[0].fingers[r[8].position]:null),n&4&&(a.lite=r[2]),t.$set(a)},i(r){e||(be(t.$$.fragment,r),e=!0)},o(r){Se(t.$$.fragment,r),e=!1},d(r){zt(t,r)}}}function mc(s){let t,e,r,n,a,l,d;r=new nc({props:{tuning:s[1].tuning,strings:s[1].strings,fretsOnChord:s[1].fretsOnChord,baseFret:s[0].baseFret,lite:s[2]}});let b=s[0].barres&&Xn(s),p=s[4](s[0]),f=[];for(let C=0;C<p.length;C+=1)f[C]=Yn(Wn(s,p,C));const $=C=>Se(f[C],1,1,()=>{f[C]=null});return{c(){t=fe("svg"),e=fe("g"),Dt(r.$$.fragment),b&&b.c(),n=Be();for(let C=0;C<f.length;C+=1)f[C].c();this.h()},l(C){t=ue(C,"svg",{width:!0,xmlns:!0,preserveAspectRatio:!0,viewBox:!0,class:!0});var S=k(t);e=ue(S,"g",{transform:!0});var j=k(e);Ot(r.$$.fragment,j),b&&b.l(j),n=Be();for(let M=0;M<f.length;M+=1)f[M].l(j);j.forEach(x),S.forEach(x),this.h()},h(){w(e,"transform","translate(13, 13)"),w(t,"width","100%"),w(t,"xmlns","http://www.w3.org/2000/svg"),w(t,"preserveAspectRatio","xMinYMin meet"),w(t,"viewBox","0 5 75 65"),w(t,"class","svelte-1a0c8ce")},m(C,S){J(C,t,S),P(t,e),Rt(r,e,null),b&&b.m(e,null),P(e,n);for(let j=0;j<f.length;j+=1)f[j].m(e,null);s[6](t),a=!0,l||(d=De(t,"click",s[5],!0),l=!0)},p(C,[S]){const j={};if(S&2&&(j.tuning=C[1].tuning),S&2&&(j.strings=C[1].strings),S&2&&(j.fretsOnChord=C[1].fretsOnChord),S&1&&(j.baseFret=C[0].baseFret),S&4&&(j.lite=C[2]),r.$set(j),C[0].barres?b?(b.p(C,S),S&1&&be(b,1)):(b=Xn(C),b.c(),be(b,1),b.m(e,n)):b&&(ns(),Se(b,1,1,()=>{b=null}),is()),S&23){p=C[4](C[0]);let M;for(M=0;M<p.length;M+=1){const G=Wn(C,p,M);f[M]?(f[M].p(G,S),be(f[M],1)):(f[M]=Yn(G),f[M].c(),be(f[M],1),f[M].m(e,null))}for(ns(),M=p.length;M<f.length;M+=1)$(M);is()}},i(C){if(!a){be(r.$$.fragment,C),be(b);for(let S=0;S<p.length;S+=1)be(f[S]);a=!0}},o(C){Se(r.$$.fragment,C),Se(b),f=f.filter(Boolean);for(let S=0;S<f.length;S+=1)Se(f[S]);a=!1},d(C){C&&x(t),zt(r),b&&b.d(),ls(f,C),s[6](null),l=!1,d()}}}function dc(s,t,e){let{chord:r,instrument:n,lite:a=!1}=t,l;const d=$=>$.frets.map((C,S)=>({position:S,value:C})).filter(C=>!$.barres||$.barres.indexOf(C.value)===-1),b=jr();function p($){b("clickPos",{x:$.offsetX/l.clientWidth,y:$.offsetY/l.clientHeight})}function f($){Vs[$?"unshift":"push"](()=>{l=$,e(3,l)})}return s.$$set=$=>{"chord"in $&&e(0,r=$.chord),"instrument"in $&&e(1,n=$.instrument),"lite"in $&&e(2,a=$.lite)},[r,n,a,l,d,p,f]}class bc extends _t{constructor(t){super(),vt(this,t,dc,mc,wt,{chord:0,instrument:1,lite:2})}}function Jn(s,t,e){const r=s.slice();return r[10]=t[e],r}function Qn(s){let t,e,r,n,a,l,d,b,p,f,$,C,S,j,M,G,se,K,q,V,ie,ve,oe=s[0],W=[];for(let I=0;I<oe.length;I+=1)W[I]=ei(Jn(s,oe,I));const Ae=I=>Se(W[I],1,1,()=>{W[I]=null});return{c(){t=Q("span"),e=ye(s[1]),r=Pe(),n=Q("div"),a=Q("div");for(let I=0;I<W.length;I+=1)W[I].c();l=Pe(),d=Q("div"),b=Q("button"),p=ye("<"),$=Pe(),C=Q("strong"),S=ye(s[4]),j=ye(" / "),M=ye(s[5]),G=Pe(),se=Q("button"),K=ye(">"),this.h()},l(I){t=ee(I,"SPAN",{class:!0});var U=k(t);e=_e(U,s[1]),U.forEach(x),r=je(I),n=ee(I,"DIV",{class:!0});var Y=k(n);a=ee(Y,"DIV",{class:!0,style:!0});var Te=k(a);for(let me=0;me<W.length;me+=1)W[me].l(Te);Te.forEach(x),Y.forEach(x),l=je(I),d=ee(I,"DIV",{class:!0});var pe=k(d);b=ee(pe,"BUTTON",{class:!0});var Me=k(b);p=_e(Me,"<"),Me.forEach(x),$=je(pe),C=ee(pe,"STRONG",{class:!0});var Ce=k(C);S=_e(Ce,s[4]),j=_e(Ce," / "),M=_e(Ce,s[5]),Ce.forEach(x),G=je(pe),se=ee(pe,"BUTTON",{class:!0});var he=k(se);K=_e(he,">"),he.forEach(x),pe.forEach(x),this.h()},h(){w(t,"class","eng chord-name svelte-1mv8nun"),w(a,"class","slide svelte-1mv8nun"),Gs(a,"margin-left",(s[4]-1)*-250+"px"),w(n,"class","slider svelte-1mv8nun"),w(b,"class","button-outline eng svelte-1mv8nun"),b.disabled=f=s[4]<=1,w(C,"class","eng"),w(se,"class","button-outline eng svelte-1mv8nun"),se.disabled=q=s[4]===s[5],w(d,"class","slider-nav svelte-1mv8nun")},m(I,U){J(I,t,U),P(t,e),J(I,r,U),J(I,n,U),P(n,a);for(let Y=0;Y<W.length;Y+=1)W[Y].m(a,null);J(I,l,U),J(I,d,U),P(d,b),P(b,p),P(d,$),P(d,C),P(C,S),P(C,j),P(C,M),P(d,G),P(d,se),P(se,K),V=!0,ie||(ve=[De(b,"click",s[7]),De(se,"click",s[8])],ie=!0)},p(I,U){if((!V||U&2)&&et(e,I[1]),U&5){oe=I[0];let Y;for(Y=0;Y<oe.length;Y+=1){const Te=Jn(I,oe,Y);W[Y]?(W[Y].p(Te,U),be(W[Y],1)):(W[Y]=ei(Te),W[Y].c(),be(W[Y],1),W[Y].m(a,null))}for(ns(),Y=oe.length;Y<W.length;Y+=1)Ae(Y);is()}(!V||U&16)&&Gs(a,"margin-left",(I[4]-1)*-250+"px"),(!V||U&16&&f!==(f=I[4]<=1))&&(b.disabled=f),(!V||U&16)&&et(S,I[4]),(!V||U&32)&&et(M,I[5]),(!V||U&48&&q!==(q=I[4]===I[5]))&&(se.disabled=q)},i(I){if(!V){for(let U=0;U<oe.length;U+=1)be(W[U]);V=!0}},o(I){W=W.filter(Boolean);for(let U=0;U<W.length;U+=1)Se(W[U]);V=!1},d(I){I&&x(t),I&&x(r),I&&x(n),ls(W,I),I&&x(l),I&&x(d),ie=!1,er(ve)}}}function ei(s){let t,e,r,n;return e=new bc({props:{instrument:s[2],chord:s[10]}}),{c(){t=Q("div"),Dt(e.$$.fragment),r=Pe(),this.h()},l(a){t=ee(a,"DIV",{class:!0});var l=k(t);Ot(e.$$.fragment,l),r=je(l),l.forEach(x),this.h()},h(){w(t,"class","svelte-1mv8nun")},m(a,l){J(a,t,l),Rt(e,t,null),P(t,r),n=!0},p(a,l){const d={};l&4&&(d.instrument=a[2]),l&1&&(d.chord=a[10]),e.$set(d)},i(a){n||(be(e.$$.fragment,a),n=!0)},o(a){Se(e.$$.fragment,a),n=!1},d(a){a&&x(t),zt(e)}}}function pc(s){let t,e,r=s[5]>0&&Qn(s);return{c(){r&&r.c(),t=Be()},l(n){r&&r.l(n),t=Be()},m(n,a){r&&r.m(n,a),J(n,t,a),e=!0},p(n,a){n[5]>0?r?(r.p(n,a),a&32&&be(r,1)):(r=Qn(n),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ns(),Se(r,1,1,()=>{r=null}),is())},i(n){e||(be(r),e=!0)},o(n){Se(r),e=!1},d(n){r&&r.d(n),n&&x(t)}}}function gc(s){let t,e;return t=new Ql({props:{open:s[3],$$slots:{default:[pc]},$$scope:{ctx:s}}}),t.$on("close",s[9]),{c(){Dt(t.$$.fragment)},l(r){Ot(t.$$.fragment,r)},m(r,n){Rt(t,r,n),e=!0},p(r,[n]){const a={};n&8&&(a.open=r[3]),n&8247&&(a.$$scope={dirty:n,ctx:r}),t.$set(a)},i(r){e||(be(t.$$.fragment,r),e=!0)},o(r){Se(t.$$.fragment,r),e=!1},d(r){zt(t,r)}}}function $c(s,t,e){let r;const n=jr();let{chordsInfo:a,chordDisplay:l="",instrument:d,open:b=!1}=t,p=1;const f=()=>e(4,p--,p),$=()=>e(4,p++,p),C=()=>{e(4,p=1),n("close")};return s.$$set=S=>{"chordsInfo"in S&&e(0,a=S.chordsInfo),"chordDisplay"in S&&e(1,l=S.chordDisplay),"instrument"in S&&e(2,d=S.instrument),"open"in S&&e(3,b=S.open)},s.$$.update=()=>{s.$$.dirty&1&&e(5,r=a.length)},[a,l,d,b,p,r,n,f,$,C]}class yc extends _t{constructor(t){super(),vt(this,t,$c,gc,wt,{chordsInfo:0,chordDisplay:1,instrument:2,open:3})}}const Cr=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],_c={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},F={maj:["ma","maj","M",""],min:["min","m","-"],sus2:["sus2","2"],sus4:["sus","sus4"],dim:["dim","o"],halfDim:["m7b5","m7(b5)","0"],aug:["aug","+"],5:["5"],6:["6"],7:["7"],maj7:["ma7","maj7","M7"],min7:["min7","m7"],mM7:["mM7","m(M7)","min(maj7)"]},ti={instrument:{tuning:["E","A","D","G","B","E"],fretsOnChord:4,name:"guitar",strings:6},chordShapes:[{suffix:F.maj,baseKey:"C",shape:[-1,3,2,0,1,0]},{suffix:F.sus2,baseKey:"C",shape:[-1,3,0,0,1,0]},{suffix:F.sus4,baseKey:"C",shape:[-1,3,3,0,1,1]},{suffix:F.aug,baseKey:"C",shape:[-1,3,2,1,1,3]},{suffix:F[6],baseKey:"C",shape:[-1,3,2,2,1,0]},{suffix:F[7],baseKey:"C",shape:[-1,3,2,3,1,0]},{suffix:F.maj7,baseKey:"C",shape:[-1,3,2,0,0,0]},{suffix:F.mM7,baseKey:"C",shape:[-1,3,1,0,0,0]},{suffix:F.maj,baseKey:"A",shape:[-1,0,2,2,2,0]},{suffix:F.min,baseKey:"A",shape:[-1,0,2,2,1,0]},{suffix:F.sus2,baseKey:"A",shape:[-1,0,2,2,0,0]},{suffix:F.sus4,baseKey:"A",shape:[-1,0,2,2,3,0]},{suffix:F.dim,baseKey:"A",shape:[-1,0,1,2,1,0]},{suffix:F.halfDim,baseKey:"A",shape:[-1,0,1,0,1,-1]},{suffix:F.aug,baseKey:"A",shape:[-1,0,3,2,2,0]},{suffix:F[5],baseKey:"A",shape:[-1,0,2,-1,-1,-1]},{suffix:F[6],baseKey:"A",shape:[-1,0,2,2,2,2]},{suffix:F[7],baseKey:"A",shape:[-1,0,2,0,2,0]},{suffix:F.maj7,baseKey:"A",shape:[-1,0,2,1,2,0]},{suffix:F.min7,baseKey:"A",shape:[-1,0,2,0,1,0]},{suffix:F.mM7,baseKey:"A",shape:[-1,0,2,1,1,0]},{suffix:F.maj,baseKey:"G",shape:[3,2,0,0,0,3]},{suffix:F.min,baseKey:"G",shape:[3,1,0,0,-1,-1]},{suffix:F.sus2,baseKey:"G",shape:[3,2,0,2,0,3]},{suffix:F.sus4,baseKey:"G",shape:[3,2,0,0,1,3]},{suffix:F[6],baseKey:"G",shape:[3,2,0,0,1,0]},{suffix:F[7],baseKey:"G",shape:[3,2,0,0,0,1]},{suffix:F.maj7,baseKey:"G",shape:[3,2,0,0,0,2]},{suffix:F.maj,baseKey:"E",shape:[0,2,2,1,0,0]},{suffix:F.min,baseKey:"E",shape:[0,2,2,0,0,0]},{suffix:F.sus2,baseKey:"E",shape:[0,2,2,1,0,0]},{suffix:F.sus4,baseKey:"E",shape:[0,2,4,1,0,0]},{suffix:F.dim,baseKey:"E",shape:[0,1,2,0,4,0]},{suffix:F.halfDim,baseKey:"E",shape:[0,1,0,0,3,0]},{suffix:F.aug,baseKey:"E",shape:[0,3,2,1,1,0]},{suffix:F[5],baseKey:"E",shape:[0,2,-1,-1,-1,-1]},{suffix:F[6],baseKey:"E",shape:[0,2,2,1,2,0]},{suffix:F[7],baseKey:"E",shape:[0,2,0,1,0,0]},{suffix:F.maj7,baseKey:"E",shape:[0,2,1,1,0,0]},{suffix:F.min7,baseKey:"E",shape:[0,2,0,0,0,0]},{suffix:F.mM7,baseKey:"E",shape:[0,2,1,0,0,0]},{suffix:F.maj,baseKey:"D",shape:[-1,-1,0,2,3,2]},{suffix:F.min,baseKey:"D",shape:[-1,-1,0,2,3,1]},{suffix:F.sus2,baseKey:"D",shape:[-1,-1,0,2,3,0]},{suffix:F.sus4,baseKey:"D",shape:[-1,-1,0,2,3,3]},{suffix:F.dim,baseKey:"D",shape:[-1,-1,0,1,3,1]},{suffix:F.halfDim,baseKey:"D",shape:[-1,-1,0,1,1,1]},{suffix:F.aug,baseKey:"D",shape:[-1,-1,0,3,3,2]},{suffix:F[6],baseKey:"D",shape:[-1,-1,0,2,0,2]},{suffix:F[7],baseKey:"D",shape:[-1,-1,0,2,1,2]},{suffix:F.maj7,baseKey:"D",shape:[-1,-1,0,2,2,2]},{suffix:F.min7,baseKey:"D",shape:[-1,-1,0,2,1,1]},{suffix:F.mM7,baseKey:"D",shape:[-1,-1,0,2,2,1]}],getChords(s,t="maj"){return s.includes("b")&&(s=_c[s]),s?this.chordShapes.filter(e=>e.suffix.includes(t)).map(({baseKey:e,shape:r})=>{let n=Cr.indexOf(s)-Cr.indexOf(e);return n<0&&(n=Cr.length+n),{baseFret:n,frets:n===0?r:r.map(a=>a>=0?a+1:a)}}).sort((e,r)=>(e.baseFret||0)-(r.baseFret||0)):[]}};function si(s){let t,e,r=s[9].join(", ")+"",n;return{c(){t=ye("- "),e=Q("span"),n=ye(r),this.h()},l(a){t=_e(a,"- "),e=ee(a,"SPAN",{class:!0});var l=k(e);n=_e(l,r),l.forEach(x),this.h()},h(){w(e,"class","text-gray-500")},m(a,l){J(a,t,l),J(a,e,l),P(e,n)},p(a,l){l&512&&r!==(r=a[9].join(", ")+"")&&et(n,r)},d(a){a&&x(t),a&&x(e)}}}function vc(s){let t,e,r,n,a;return{c(){t=Q("button"),e=fe("svg"),r=fe("path"),this.h()},l(l){t=ee(l,"BUTTON",{class:!0,title:!0});var d=k(t);e=ue(d,"svg",{xmlns:!0,fill:!0,viewBox:!0});var b=k(e);r=ue(b,"path",{d:!0}),k(r).forEach(x),b.forEach(x),d.forEach(x),this.h()},h(){w(r,"d","M320 224H416c17.67 0 32-14.33 32-32s-14.33-32-32-32h-95.1c-17.67 0-32 14.33-32 32S302.3 224 320 224zM320 352H480c17.67 0 32-14.33 32-32s-14.33-32-32-32h-159.1c-17.67 0-32 14.33-32 32S302.3 352 320 352zM320 96h32c17.67 0 31.1-14.33 31.1-32s-14.33-32-31.1-32h-32c-17.67 0-32 14.33-32 32S302.3 96 320 96zM544 416h-223.1c-17.67 0-32 14.33-32 32s14.33 32 32 32H544c17.67 0 32-14.33 32-32S561.7 416 544 416zM192.4 330.7L160 366.1V64.03C160 46.33 145.7 32 128 32S96 46.33 96 64.03v302L63.6 330.7c-6.312-6.883-14.94-10.38-23.61-10.38c-7.719 0-15.47 2.781-21.61 8.414c-13.03 11.95-13.9 32.22-1.969 45.27l87.1 96.09c12.12 13.26 35.06 13.26 47.19 0l87.1-96.09c11.94-13.05 11.06-33.31-1.969-45.27C224.6 316.8 204.4 317.7 192.4 330.7z"),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"fill","#fff"),w(e,"viewBox","0 0 576 512"),w(t,"class","w-10 h-10 rounded bg-green-500 text-white p-3"),w(t,"title","Auto-scroll")},m(l,d){J(l,t,d),P(t,e),P(e,r),n||(a=De(t,"click",s[21]),n=!0)},p:it,d(l){l&&x(t),n=!1,a()}}}function wc(s){let t,e,r,n,a,l,d,b,p,f,$,C,S,j;return{c(){t=Q("button"),e=fe("svg"),r=fe("path"),a=Pe(),l=Q("b"),d=ye("x"),b=ye(s[2]),p=Pe(),f=Q("button"),$=fe("svg"),C=fe("path"),this.h()},l(M){t=ee(M,"BUTTON",{class:!0,title:!0});var G=k(t);e=ue(G,"svg",{xmlns:!0,fill:!0,viewBox:!0});var se=k(e);r=ue(se,"path",{d:!0}),k(r).forEach(x),se.forEach(x),G.forEach(x),a=je(M),l=ee(M,"B",{class:!0});var K=k(l);d=_e(K,"x"),b=_e(K,s[2]),K.forEach(x),p=je(M),f=ee(M,"BUTTON",{class:!0,title:!0});var q=k(f);$=ue(q,"svg",{xmlns:!0,fill:!0,viewBox:!0});var V=k($);C=ue(V,"path",{d:!0}),k(C).forEach(x),V.forEach(x),q.forEach(x),this.h()},h(){w(r,"d","M169.4 278.6C175.6 284.9 183.8 288 192 288s16.38-3.125 22.62-9.375l160-160c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0L192 210.8L54.63 73.38c-12.5-12.5-32.75-12.5-45.25 0s-12.5 32.75 0 45.25L169.4 278.6zM329.4 265.4L192 402.8L54.63 265.4c-12.5-12.5-32.75-12.5-45.25 0s-12.5 32.75 0 45.25l160 160C175.6 476.9 183.8 480 192 480s16.38-3.125 22.62-9.375l160-160c12.5-12.5 12.5-32.75 0-45.25S341.9 252.9 329.4 265.4z"),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"fill","#fff"),w(e,"viewBox","0 0 384 512"),t.disabled=n=s[2]>=4,w(t,"class","w-10 h-10 rounded bg-green-500 text-white p-4"),w(t,"title","Speed Up"),w(l,"class","text-center"),w(C,"d","M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM352 328c0 13.2-10.8 24-24 24h-144C170.8 352 160 341.2 160 328v-144C160 170.8 170.8 160 184 160h144C341.2 160 352 170.8 352 184V328z"),w($,"xmlns","http://www.w3.org/2000/svg"),w($,"fill","#fff"),w($,"viewBox","0 0 512 512"),w(f,"class","w-10 h-10 rounded bg-green-500 text-white p-3"),w(f,"title","Speed Up")},m(M,G){J(M,t,G),P(t,e),P(e,r),J(M,a,G),J(M,l,G),P(l,d),P(l,b),J(M,p,G),J(M,f,G),P(f,$),P($,C),S||(j=[De(t,"click",s[19]),De(f,"click",s[20])],S=!0)},p(M,G){G&4&&n!==(n=M[2]>=4)&&(t.disabled=n),G&4&&et(b,M[2])},d(M){M&&x(t),M&&x(a),M&&x(l),M&&x(p),M&&x(f),S=!1,er(j)}}}function Cc(s){let t=!1,e=()=>{t=!1},r,n,a,l,d,b,p,f,$,C,S,j,M,G,se,K,q,V,ie,ve,oe,W,Ae,I,U,Y,Te,pe,Me,Ce;ha(s[15]);let he=s[9]&&si(s);function me(Z,de){return Z[2]>0?wc:vc}let ke=me(s),ge=ke(s);function We(Z){s[23](Z)}function Ke(Z){s[24](Z)}let Ge={instrument:s[11],open:s[6]};return s[4]!==void 0&&(Ge.chordsInfo=s[4]),s[5]!==void 0&&(Ge.chordDisplay=s[5]),U=new yc({props:Ge}),Vs.push(()=>dn(U,"chordsInfo",We)),Vs.push(()=>dn(U,"chordDisplay",Ke)),U.$on("close",s[25]),{c(){n=Q("div"),a=Q("div"),l=Q("span"),d=ye(s[8]),b=Pe(),he&&he.c(),p=Pe(),f=Q("div"),$=Q("article"),C=Q("div"),S=Pe(),j=Q("div"),M=Q("div"),G=Q("button"),se=ye("♭"),K=Pe(),q=Q("button"),V=ye(s[7]),ve=Pe(),oe=Q("button"),W=ye("♯"),Ae=Pe(),ge.c(),I=Pe(),Dt(U.$$.fragment),this.h()},l(Z){n=ee(Z,"DIV",{class:!0});var de=k(n);a=ee(de,"DIV",{class:!0});var Ie=k(a);l=ee(Ie,"SPAN",{class:!0});var at=k(l);d=_e(at,s[8]),at.forEach(x),b=je(Ie),he&&he.l(Ie),Ie.forEach(x),p=je(de),f=ee(de,"DIV",{class:!0,style:!0});var Ze=k(f);$=ee(Ze,"ARTICLE",{class:!0});var tt=k($);C=ee(tt,"DIV",{});var Ct=k(C);Ct.forEach(x),tt.forEach(x),S=je(Ze),j=ee(Ze,"DIV",{class:!0});var mt=k(j);M=ee(mt,"DIV",{class:!0});var Ne=k(M);G=ee(Ne,"BUTTON",{class:!0});var dt=k(G);se=_e(dt,"♭"),dt.forEach(x),K=je(Ne),q=ee(Ne,"BUTTON",{class:!0});var Xe=k(q);V=_e(Xe,s[7]),Xe.forEach(x),ve=je(Ne),oe=ee(Ne,"BUTTON",{class:!0});var qe=k(oe);W=_e(qe,"♯"),qe.forEach(x),Ae=je(Ne),ge.l(Ne),Ne.forEach(x),mt.forEach(x),Ze.forEach(x),de.forEach(x),I=je(Z),Ot(U.$$.fragment,Z),this.h()},h(){w(l,"class","text-bold"),w(a,"class","p-2"),w($,"class","grow"),w(G,"class","w-10 h-10 rounded bg-letkwet-500 text-white font-bold text-xl"),w(q,"class","w-10 h-10 rounded bg-gray-500 text-white font-bold text-xl"),q.disabled=ie=s[7]==0,w(oe,"class","w-10 h-10 rounded bg-letkwet-500 text-white font-bold text-xl"),w(M,"class","sticky top-2 gap-2 flex flex-col"),w(j,"class","pr-2"),w(f,"class","flex"),Gs(f,"align-items","stretch"),w(n,"class","flex flex-col mt-4")},m(Z,de){J(Z,n,de),P(n,a),P(a,l),P(l,d),P(a,b),he&&he.m(a,null),P(n,p),P(n,f),P(f,$),P($,C),C.innerHTML=s[10],P(f,S),P(f,j),P(j,M),P(M,G),P(G,se),P(M,K),P(M,q),P(q,V),P(M,ve),P(M,oe),P(oe,W),P(M,Ae),ge.m(M,null),s[22](n),J(Z,I,de),Rt(U,Z,de),pe=!0,Me||(Ce=[De(window,"scroll",()=>{t=!0,clearTimeout(r),r=setTimeout(e,100),s[15]()}),De($,"click",s[12]),De(G,"click",s[16]),De(q,"click",s[17]),De(oe,"click",s[18])],Me=!0)},p(Z,[de]){de&2&&!t&&(t=!0,clearTimeout(r),scrollTo(window.pageXOffset,Z[1]),r=setTimeout(e,100)),(!pe||de&256)&&et(d,Z[8]),Z[9]?he?he.p(Z,de):(he=si(Z),he.c(),he.m(a,null)):he&&(he.d(1),he=null),(!pe||de&1024)&&(C.innerHTML=Z[10]),(!pe||de&128)&&et(V,Z[7]),(!pe||de&128&&ie!==(ie=Z[7]==0))&&(q.disabled=ie),ke===(ke=me(Z))&&ge?ge.p(Z,de):(ge.d(1),ge=ke(Z),ge&&(ge.c(),ge.m(M,null)));const Ie={};de&64&&(Ie.open=Z[6]),!Y&&de&16&&(Y=!0,Ie.chordsInfo=Z[4],bn(()=>Y=!1)),!Te&&de&32&&(Te=!0,Ie.chordDisplay=Z[5],bn(()=>Te=!1)),U.$set(Ie)},i(Z){pe||(be(U.$$.fragment,Z),pe=!0)},o(Z){Se(U.$$.fragment,Z),pe=!1},d(Z){Z&&x(n),he&&he.d(),ge.d(),s[22](null),Z&&x(I),zt(U,Z),Me=!1,er(Ce)}}}const Ec=/(([A-G][\#b]?)([A-Za-z\d\#\/]{0,9}))/m;function xc(s){const t=Ec.exec(s);if(t){const[e,r,n,a]=t;return[n,a||""]}return[s,""]}function Sc(s,t,e){let r,n;const{ChordProParser:a,HtmlDivFormatter:l}=ql;let{song:d}=t,b=[],p,f=!1,$=0,C,S,j=0,M;const G=new a,se=new l;let K,q;const V=ti.instrument,ie={};function ve(me){const ke=me.target;if(ke instanceof HTMLElement){if((ke==null?void 0:ke.className.split(" ").indexOf("chord"))<0)return;const ge=ke.innerText;if(ie[ge])e(4,b=ie[ge]),e(6,f=!0);else{const[We,Ke]=xc(ge),Ge=ti.getChords(We,Ke);Ge.length>0&&(e(4,b=Ge),ie[ge]=Ge,e(6,f=!0))}}}function oe(){e(1,S=window.pageYOffset)}const W=()=>{e(3,r=r.transposeDown()),e(7,$--,$)},Ae=()=>{e(3,r=r.transpose($*-1)),e(7,$=0)},I=()=>{e(3,r=r.transposeUp()),e(7,$++,$)},U=()=>e(2,j++,j),Y=()=>e(2,j=0),Te=()=>e(2,j++,j);function pe(me){Vs[me?"unshift":"push"](()=>{C=me,e(0,C)})}function Me(me){b=me,e(4,b)}function Ce(me){p=me,e(5,p)}const he=()=>e(6,f=!1);return s.$$set=me=>{"song"in me&&e(13,d=me.song)},s.$$.update=()=>{if(s.$$.dirty&8192&&d&&e(7,$=0),s.$$.dirty&8192&&e(3,r=G.parse(d)),s.$$.dirty&8&&r&&(e(8,K=r.title),r.artist===void 0||Array.isArray(r.artist)?e(9,q=r.artist):e(9,q=[r.artist])),s.$$.dirty&8&&e(10,n=se.format(r).replace(/<h1>.+<\/h1>/,"")),s.$$.dirty&16391)if(j>0){M&&clearInterval(M);const me=C.scrollHeight/(420-j*60)/5;e(14,M=setInterval(()=>{e(1,S+=me),S>=C.scrollHeight&&clearInterval(M)},100))}else clearInterval(M)},[C,S,j,r,b,p,f,$,K,q,n,V,ve,d,M,oe,W,Ae,I,U,Y,Te,pe,Me,Ce,he]}class Ac extends _t{constructor(t){super(),vt(this,t,Sc,Cc,wt,{song:13})}}function Lc(s){let t,e;return{c(){t=Q("div"),e=ye("Please select a chordpro file (.cho, .chopro., .cpro) by clicking browse."),this.h()},l(r){t=ee(r,"DIV",{class:!0});var n=k(t);e=_e(n,"Please select a chordpro file (.cho, .chopro., .cpro) by clicking browse."),n.forEach(x),this.h()},h(){w(t,"class","h-40 px-4 py-10 text-gray-400")},m(r,n){J(r,t,n),P(t,e)},p:it,i:it,o:it,d(r){r&&x(t)}}}function Tc(s){let t,e;return t=new Ac({props:{song:s[1]}}),{c(){Dt(t.$$.fragment)},l(r){Ot(t.$$.fragment,r)},m(r,n){Rt(t,r,n),e=!0},p(r,n){const a={};n&2&&(a.song=r[1]),t.$set(a)},i(r){e||(be(t.$$.fragment,r),e=!0)},o(r){Se(t.$$.fragment,r),e=!1},d(r){zt(t,r)}}}function Mc(s){let t,e,r,n,a,l,d,b,p,f,$,C,S,j,M,G;const se=[Tc,Lc],K=[];function q(V,ie){return V[1]?0:1}return C=q(s),S=K[C]=se[C](s),{c(){t=Q("main"),e=Q("nav"),r=Q("div"),n=Q("div"),a=Q("img"),d=Pe(),b=Q("div"),p=Q("input"),f=Pe(),$=Q("div"),S.c(),this.h()},l(V){t=ee(V,"MAIN",{class:!0});var ie=k(t);e=ee(ie,"NAV",{});var ve=k(e);r=ee(ve,"DIV",{class:!0});var oe=k(r);n=ee(oe,"DIV",{});var W=k(n);a=ee(W,"IMG",{src:!0,class:!0,alt:!0}),W.forEach(x),d=je(oe),b=ee(oe,"DIV",{});var Ae=k(b);p=ee(Ae,"INPUT",{class:!0,type:!0,accept:!0}),Ae.forEach(x),oe.forEach(x),ve.forEach(x),f=je(ie),$=ee(ie,"DIV",{});var I=k($);S.l(I),I.forEach(x),ie.forEach(x),this.h()},h(){ma(a.src,l="/letkwet.svg")||w(a,"src",l),w(a,"class","w-8"),w(a,"alt","Letkwet"),w(p,"class","w-20"),w(p,"type","file"),w(p,"accept",".cho,.chopro,.chord"),w(r,"class","flex gap-10 p-2 items-center"),w(t,"class","container mx-auto")},m(V,ie){J(V,t,ie),P(t,e),P(e,r),P(r,n),P(n,a),P(r,d),P(r,b),P(b,p),P(t,f),P(t,$),K[C].m($,null),j=!0,M||(G=De(p,"change",s[2]),M=!0)},p(V,[ie]){let ve=C;C=q(V),C===ve?K[C].p(V,ie):(ns(),Se(K[ve],1,1,()=>{K[ve]=null}),is(),S=K[C],S?S.p(V,ie):(S=K[C]=se[C](V),S.c()),be(S,1),S.m($,null))},i(V){j||(be(S),j=!0)},o(V){Se(S),j=!1},d(V){V&&x(t),K[C].d(),M=!1,G()}}}function Pc(s,t,e){let r,n;function a(){r=this.files,e(0,r)}return s.$$.update=()=>{if(s.$$.dirty&1&&r&&r.length>0){const[l]=r;l.size<512e3&&l.text().then(d=>e(1,n=d))}},[r,n,a]}class Ic extends _t{constructor(t){super(),vt(this,t,Pc,Mc,wt,{})}}export{Ic as default};
