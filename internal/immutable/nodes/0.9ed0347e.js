var vc=Object.defineProperty;var _c=(r,t,e)=>t in r?vc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var X=(r,t,e)=>(_c(r,typeof t!="symbol"?t+"":t,e),e);import{r as $c,u as wc,v as ts,w as Ec,s as mt,e as $e,i as Y,d as j,x as Nn,b as xc,y as kc,t as Cc,z as mi,q as ys,A as Uo,B as U,f as Q,a as je,g as J,h as W,c as Ie,j as S,C as z,D as ir,l as pe,m as be,n as Ze,E as Wt,F as Ue,G as Sc,H as Ac,I as Pc,J as Tc,K as jc,L as Ns,M as Le,N as Oe,k as vs,p as _s,O as Ic,P as Lc,Q as Oc,R as Na,S as Dc,T as Fa}from"../chunks/scheduler.e86c4733.js";import{g as qt,t as ve,c as Ut,a as he,S as dt,i as pt,b as ct,d as Et,m as ut,e as ft,f as Ka}from"../chunks/index.1e60aee8.js";import{d as Go,r as Mc,w as Nc,b as us}from"../chunks/paths.fcf74e99.js";import{$ as Fc}from"../chunks/ChordModal.svelte_svelte_type_style_lang.69c02d9f.js";function vr(r,t){const e=t.token={};function n(s,i,a,o){if(t.token!==e)return;t.resolved=o;let l=t.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const f=s&&(t.current=s)(l);let u=!1;t.block&&(t.blocks?t.blocks.forEach((m,d)=>{d!==i&&m&&(qt(),ve(m,1,1,()=>{t.blocks[d]===m&&(t.blocks[d]=null)}),Ut())}):t.block.d(1),f.c(),he(f,1),f.m(t.mount(),t.anchor),u=!0),t.block=f,t.blocks&&(t.blocks[i]=f),u&&Ec()}if($c(r)){const s=wc();if(r.then(i=>{ts(s),n(t.then,1,t.value,i),ts(null)},i=>{if(ts(s),n(t.catch,2,t.error,i),ts(null),!t.hasCatch)throw i}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,r),!0;t.resolved=r}}function Cn(r,t,e){const n=t.slice(),{resolved:s}=r;r.current===r.then&&(n[r.value]=s),r.current===r.catch&&(n[r.error]=s),r.block.p(n,e)}function Ge(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Wo(r,t){const e={},n={},s={$$scope:1};let i=r.length;for(;i--;){const a=r[i],o=t[i];if(o){for(const l in a)l in o||(n[l]=1);for(const l in o)s[l]||(e[l]=o[l],s[l]=1);r[i]=o}else for(const l in a)s[l]=1}for(const a in n)a in e||(e[a]=void 0);return e}function Ho(r){return typeof r=="object"&&r!==null?r:{}}const Pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ze=Object.keys,Xe=Array.isArray;function et(r,t){return typeof t!="object"||ze(t).forEach(function(e){r[e]=t[e]}),r}typeof Promise>"u"||Pe.Promise||(Pe.Promise=Promise);const Sn=Object.getPrototypeOf,Kc={}.hasOwnProperty;function ht(r,t){return Kc.call(r,t)}function Jr(r,t){typeof t=="function"&&(t=t(Sn(r))),(typeof Reflect>"u"?ze:Reflect.ownKeys)(t).forEach(e=>{zt(r,e,t[e])})}const Yo=Object.defineProperty;function zt(r,t,e,n){Yo(r,t,et(e&&ht(e,"get")&&typeof e.get=="function"?{get:e.get,set:e.set,configurable:!0}:{value:e,configurable:!0,writable:!0},n))}function qr(r){return{from:function(t){return r.prototype=Object.create(t.prototype),zt(r.prototype,"constructor",r),{extend:Jr.bind(null,r.prototype)}}}}const Rc=Object.getOwnPropertyDescriptor;function Wi(r,t){let e;return Rc(r,t)||(e=Sn(r))&&Wi(e,t)}const Bc=[].slice;function $s(r,t,e){return Bc.call(r,t,e)}function Xo(r,t){return t(r)}function yn(r){if(!r)throw new Error("Assertion Failed")}function Zo(r){Pe.setImmediate?setImmediate(r):setTimeout(r,0)}function Qo(r,t){return r.reduce((e,n,s)=>{var i=t(n,s);return i&&(e[i[0]]=i[1]),e},{})}function Vt(r,t){if(ht(r,t))return r[t];if(!t)return r;if(typeof t!="string"){for(var e=[],n=0,s=t.length;n<s;++n){var i=Vt(r,t[n]);e.push(i)}return e}var a=t.indexOf(".");if(a!==-1){var o=r[t.substr(0,a)];return o===void 0?void 0:Vt(o,t.substr(a+1))}}function wt(r,t,e){if(r&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(r)))if(typeof t!="string"&&"length"in t){yn(typeof e!="string"&&"length"in e);for(var n=0,s=t.length;n<s;++n)wt(r,t[n],e[n])}else{var i=t.indexOf(".");if(i!==-1){var a=t.substr(0,i),o=t.substr(i+1);if(o==="")e===void 0?Xe(r)&&!isNaN(parseInt(a))?r.splice(a,1):delete r[a]:r[a]=e;else{var l=r[a];l&&ht(r,a)||(l=r[a]={}),wt(l,o,e)}}else e===void 0?Xe(r)&&!isNaN(parseInt(t))?r.splice(t,1):delete r[t]:r[t]=e}}function Jo(r){var t={};for(var e in r)ht(r,e)&&(t[e]=r[e]);return t}const zc=[].concat;function el(r){return zc.apply([],r)}const tl="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(el([8,16,32,64].map(r=>["Int","Uint","Float"].map(t=>t+r+"Array")))).filter(r=>Pe[r]),Vc=tl.map(r=>Pe[r]);Qo(tl,r=>[r,!0]);let er=null;function Fn(r){er=typeof WeakMap<"u"&&new WeakMap;const t=di(r);return er=null,t}function di(r){if(!r||typeof r!="object")return r;let t=er&&er.get(r);if(t)return t;if(Xe(r)){t=[],er&&er.set(r,t);for(var e=0,n=r.length;e<n;++e)t.push(di(r[e]))}else if(Vc.indexOf(r.constructor)>=0)t=r;else{const i=Sn(r);for(var s in t=i===Object.prototype?{}:Object.create(i),er&&er.set(r,t),r)ht(r,s)&&(t[s]=di(r[s]))}return t}const{toString:qc}={};function pi(r){return qc.call(r).slice(8,-1)}const bi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Uc=typeof bi=="symbol"?function(r){var t;return r!=null&&(t=r[bi])&&t.apply(r)}:function(){return null},Br={};function Rt(r){var t,e,n,s;if(arguments.length===1){if(Xe(r))return r.slice();if(this===Br&&typeof r=="string")return[r];if(s=Uc(r)){for(e=[];!(n=s.next()).done;)e.push(n.value);return e}if(r==null)return[r];if(typeof(t=r.length)=="number"){for(e=new Array(t);t--;)e[t]=r[t];return e}return[r]}for(t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return e}const Hi=typeof Symbol<"u"?r=>r[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Pt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function rl(r,t){Pt=r,nl=t}var nl=()=>!0;const Gc=!new Error("").stack;function Tr(){if(Gc)try{throw Tr.arguments,new Error}catch(r){return r}return new Error}function gi(r,t){var e=r.stack;return e?(t=t||0,e.indexOf(r.name)===0&&(t+=(r.name+r.message).split(`
`).length),e.split(`
`).slice(t).filter(nl).map(n=>`
`+n).join("")):""}var sl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(sl),Wc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ur(r,t){this._e=Tr(),this.name=r,this.message=t}function il(r,t){return r+". Errors: "+Object.keys(t).map(e=>t[e].toString()).filter((e,n,s)=>s.indexOf(e)===n).join(`
`)}function ws(r,t,e,n){this._e=Tr(),this.failures=t,this.failedKeys=n,this.successCount=e,this.message=il(r,t)}function _n(r,t){this._e=Tr(),this.name="BulkError",this.failures=Object.keys(t).map(e=>t[e]),this.failuresByPos=t,this.message=il(r,t)}qr(Ur).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+gi(this._e,2))}},toString:function(){return this.name+": "+this.message}}),qr(ws).from(Ur),qr(_n).from(Ur);var Xi=Yi.reduce((r,t)=>(r[t]=t+"Error",r),{});const Hc=Ur;var oe=Yi.reduce((r,t)=>{var e=t+"Error";function n(s,i){this._e=Tr(),this.name=e,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=Wc[t]||e,this.inner=null)}return qr(n).from(Hc),r[t]=n,r},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var Ra=sl.reduce((r,t)=>(r[t+"Error"]=oe[t],r),{}),fs=Yi.reduce((r,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(r[t+"Error"]=oe[t]),r),{});function Ae(){}function An(r){return r}function Yc(r,t){return r==null||r===An?t:function(e){return t(r(e))}}function Sr(r,t){return function(){r.apply(this,arguments),t.apply(this,arguments)}}function Xc(r,t){return r===Ae?t:function(){var e=r.apply(this,arguments);e!==void 0&&(arguments[0]=e);var n=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Sr(n,this.onsuccess):n),s&&(this.onerror=this.onerror?Sr(s,this.onerror):s),i!==void 0?i:e}}function Zc(r,t){return r===Ae?t:function(){r.apply(this,arguments);var e=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?Sr(e,this.onsuccess):e),n&&(this.onerror=this.onerror?Sr(n,this.onerror):n)}}function Qc(r,t){return r===Ae?t:function(e){var n=r.apply(this,arguments);et(e,n);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Sr(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Sr(i,this.onerror):i),n===void 0?a===void 0?void 0:a:et(n,a)}}function Jc(r,t){return r===Ae?t:function(){return t.apply(this,arguments)!==!1&&r.apply(this,arguments)}}function Zi(r,t){return r===Ae?t:function(){var e=r.apply(this,arguments);if(e&&typeof e.then=="function"){for(var n=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return e.then(function(){return t.apply(n,i)})}return t.apply(this,arguments)}}fs.ModifyError=ws,fs.DexieError=Ur,fs.BulkError=_n;var Pn={};const al=100,[yi,Es,vi]=typeof Promise>"u"?[]:(()=>{let r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,Sn(r),r];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Sn(t),r]})(),ol=Es&&Es.then,hs=yi&&yi.constructor,Qi=!!vi;var _i=!1,eu=vi?()=>{vi.then(rs)}:Pe.setImmediate?setImmediate.bind(null,rs):Pe.MutationObserver?()=>{var r=document.createElement("div");new MutationObserver(()=>{rs(),r=null}).observe(r,{attributes:!0}),r.setAttribute("i","1")}:()=>{setTimeout(rs,0)},$n=function(r,t){vn.push([r,t]),xs&&(eu(),xs=!1)},$i=!0,xs=!0,Er=[],ms=[],wi=null,Ei=An,Gr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Va,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(r=>{try{Va(r[0],r[1])}catch{}})}},ee=Gr,vn=[],xr=0,ds=[];function G(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ae,this._lib=!1;var t=this._PSD=ee;if(Pt&&(this._stackHolder=Tr(),this._prev=null,this._numPrev=0),typeof r!="function"){if(r!==Pn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ki(this,this._value))}this._state=null,this._value=null,++t.ref,cl(this,r)}const xi={get:function(){var r=ee,t=ks;function e(n,s){var i=!r.global&&(r!==ee||t!==ks);const a=i&&!Gt();var o=new G((l,f)=>{Ji(this,new ll(Cs(n,r,i,a),Cs(s,r,i,a),l,f,r))});return Pt&&hl(o,this),o}return e.prototype=Pn,e},set:function(r){zt(this,"then",r&&r.prototype===Pn?xi:{get:function(){return r},set:xi.set})}};function ll(r,t,e,n,s){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof t=="function"?t:null,this.resolve=e,this.reject=n,this.psd=s}function cl(r,t){try{t(e=>{if(r._state===null){if(e===r)throw new TypeError("A promise cannot be resolved with itself.");var n=r._lib&&Kn();e&&typeof e.then=="function"?cl(r,(s,i)=>{e instanceof G?e._then(s,i):e.then(s,i)}):(r._state=!0,r._value=e,ul(r)),n&&Rn()}},ki.bind(null,r))}catch(e){ki(r,e)}}function ki(r,t){if(ms.push(t),r._state===null){var e=r._lib&&Kn();t=Ei(t),r._state=!1,r._value=t,Pt&&t!==null&&typeof t=="object"&&!t._promise&&function(n,s,i){try{n.apply(null,i)}catch(a){s&&s(a)}}(()=>{var n=Wi(t,"stack");t._promise=r,zt(t,"stack",{get:()=>_i?n&&(n.get?n.get.apply(t):n.value):r.stack})}),function(n){Er.some(s=>s._value===n._value)||Er.push(n)}(r),ul(r),e&&Rn()}}function ul(r){var t=r._listeners;r._listeners=[];for(var e=0,n=t.length;e<n;++e)Ji(r,t[e]);var s=r._PSD;--s.ref||s.finalize(),xr===0&&(++xr,$n(()=>{--xr==0&&ea()},[]))}function Ji(r,t){if(r._state!==null){var e=r._state?t.onFulfilled:t.onRejected;if(e===null)return(r._state?t.resolve:t.reject)(r._value);++t.psd.ref,++xr,$n(tu,[e,r,t])}else r._listeners.push(t)}function tu(r,t,e){try{wi=t;var n,s=t._value;t._state?n=r(s):(ms.length&&(ms=[]),n=r(s),ms.indexOf(s)===-1&&function(i){for(var a=Er.length;a;)if(Er[--a]._value===i._value)return void Er.splice(a,1)}(t)),e.resolve(n)}catch(i){e.reject(i)}finally{wi=null,--xr==0&&ea(),--e.psd.ref||e.psd.finalize()}}function fl(r,t,e){if(t.length===e)return t;var n="";if(r._state===!1){var s,i,a=r._value;a!=null?(s=a.name||"Error",i=a.message||a,n=gi(a,0)):(s=a,i=""),t.push(s+(i?": "+i:"")+n)}return Pt&&((n=gi(r._stackHolder,2))&&t.indexOf(n)===-1&&t.push(n),r._prev&&fl(r._prev,t,e)),t}function hl(r,t){var e=t?t._numPrev+1:0;e<100&&(r._prev=t,r._numPrev=e)}function rs(){Kn()&&Rn()}function Kn(){var r=$i;return $i=!1,xs=!1,r}function Rn(){var r,t,e;do for(;vn.length>0;)for(r=vn,vn=[],e=r.length,t=0;t<e;++t){var n=r[t];n[0].apply(null,n[1])}while(vn.length>0);$i=!0,xs=!0}function ea(){var r=Er;Er=[],r.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var t=ds.slice(0),e=t.length;e;)t[--e]()}function ns(r){return new G(Pn,!1,r)}function Te(r,t){var e=ee;return function(){var n=Kn(),s=ee;try{return or(e,!0),r.apply(this,arguments)}catch(i){t&&t(i)}finally{or(s,!1),n&&Rn()}}}Jr(G.prototype,{then:xi,_then:function(r,t){Ji(this,new ll(null,null,r,t,ee))},catch:function(r){if(arguments.length===1)return this.then(null,r);var t=arguments[0],e=arguments[1];return typeof t=="function"?this.then(null,n=>n instanceof t?e(n):ns(n)):this.then(null,n=>n&&n.name===t?e(n):ns(n))},finally:function(r){return this.then(t=>(r(),t),t=>(r(),ns(t)))},stack:{get:function(){if(this._stack)return this._stack;try{_i=!0;var r=fl(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=r),r}finally{_i=!1}}},timeout:function(r,t){return r<1/0?new G((e,n)=>{var s=setTimeout(()=>n(new oe.Timeout(t)),r);this.then(e,n).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&zt(G.prototype,Symbol.toStringTag,"Dexie.Promise"),Gr.env=ml(),Jr(G,{all:function(){var r=Rt.apply(null,arguments).map(ss);return new G(function(t,e){r.length===0&&t([]);var n=r.length;r.forEach((s,i)=>G.resolve(s).then(a=>{r[i]=a,--n||t(r)},e))})},resolve:r=>{if(r instanceof G)return r;if(r&&typeof r.then=="function")return new G((e,n)=>{r.then(e,n)});var t=new G(Pn,!0,r);return hl(t,wi),t},reject:ns,race:function(){var r=Rt.apply(null,arguments).map(ss);return new G((t,e)=>{r.map(n=>G.resolve(n).then(t,e))})},PSD:{get:()=>ee,set:r=>ee=r},totalEchoes:{get:()=>ks},newPSD:ar,usePSD:nn,scheduler:{get:()=>$n,set:r=>{$n=r}},rejectionMapper:{get:()=>Ei,set:r=>{Ei=r}},follow:(r,t)=>new G((e,n)=>ar((s,i)=>{var a=ee;a.unhandleds=[],a.onunhandled=i,a.finalize=Sr(function(){(function(o){function l(){o(),ds.splice(ds.indexOf(l),1)}ds.push(l),++xr,$n(()=>{--xr==0&&ea()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},a.finalize),r()},t,e,n))}),hs&&(hs.allSettled&&zt(G,"allSettled",function(){const r=Rt.apply(null,arguments).map(ss);return new G(t=>{r.length===0&&t([]);let e=r.length;const n=new Array(e);r.forEach((s,i)=>G.resolve(s).then(a=>n[i]={status:"fulfilled",value:a},a=>n[i]={status:"rejected",reason:a}).then(()=>--e||t(n)))})}),hs.any&&typeof AggregateError<"u"&&zt(G,"any",function(){const r=Rt.apply(null,arguments).map(ss);return new G((t,e)=>{r.length===0&&e(new AggregateError([]));let n=r.length;const s=new Array(n);r.forEach((i,a)=>G.resolve(i).then(o=>t(o),o=>{s[a]=o,--n||e(new AggregateError(s))}))})}));const Ye={awaits:0,echoes:0,id:0};var ru=0,ps=[],ei=0,ks=0,nu=0;function ar(r,t,e,n){var s=ee,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++nu;var a=Gr.env;i.env=Qi?{Promise:G,PromiseProp:{value:G,configurable:!0,writable:!0},all:G.all,race:G.race,allSettled:G.allSettled,any:G.any,resolve:G.resolve,reject:G.reject,nthen:Ba(a.nthen,i),gthen:Ba(a.gthen,i)}:{},t&&et(i,t),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=nn(i,r,e,n);return i.ref===0&&i.finalize(),o}function rn(){return Ye.id||(Ye.id=++ru),++Ye.awaits,Ye.echoes+=al,Ye.id}function Gt(){return!!Ye.awaits&&(--Ye.awaits==0&&(Ye.id=0),Ye.echoes=Ye.awaits*al,!0)}function ss(r){return Ye.echoes&&r&&r.constructor===hs?(rn(),r.then(t=>(Gt(),t),t=>(Gt(),qe(t)))):r}function su(r){++ks,Ye.echoes&&--Ye.echoes!=0||(Ye.echoes=Ye.id=0),ps.push(ee),or(r,!0)}function iu(){var r=ps[ps.length-1];ps.pop(),or(r,!1)}function or(r,t){var e=ee;if((t?!Ye.echoes||ei++&&r===ee:!ei||--ei&&r===ee)||dl(t?su.bind(null,r):iu),r!==ee&&(ee=r,e===Gr&&(Gr.env=ml()),Qi)){var n=Gr.env.Promise,s=r.env;Es.then=s.nthen,n.prototype.then=s.gthen,(e.global||r.global)&&(Object.defineProperty(Pe,"Promise",s.PromiseProp),n.all=s.all,n.race=s.race,n.resolve=s.resolve,n.reject=s.reject,s.allSettled&&(n.allSettled=s.allSettled),s.any&&(n.any=s.any))}}function ml(){var r=Pe.Promise;return Qi?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(Pe,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject,nthen:Es.then,gthen:r.prototype.then}:{}}function nn(r,t,e,n,s){var i=ee;try{return or(r,!0),t(e,n,s)}finally{or(i,!1)}}function dl(r){ol.call(yi,r)}function Cs(r,t,e,n){return typeof r!="function"?r:function(){var s=ee;e&&rn(),or(t,!0);try{return r.apply(this,arguments)}finally{or(s,!1),n&&dl(Gt)}}}function Ba(r,t){return function(e,n){return r.call(this,Cs(e,t),Cs(n,t))}}(""+ol).indexOf("[native code]")===-1&&(rn=Gt=Ae);const za="unhandledrejection";function Va(r,t){var e;try{e=t.onuncatched(r)}catch{}if(e!==!1)try{var n,s={promise:t,reason:r};if(Pe.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(za,!0,!0),et(n,s)):Pe.CustomEvent&&et(n=new CustomEvent(za,{detail:s}),s),n&&Pe.dispatchEvent&&(dispatchEvent(n),!Pe.PromiseRejectionEvent&&Pe.onunhandledrejection))try{Pe.onunhandledrejection(n)}catch{}Pt&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${r.stack||r}`)}catch{}}var qe=G.reject;function Ci(r,t,e,n){if(r.idbdb&&(r._state.openComplete||ee.letThrough||r._vip)){var s=r._createTransaction(t,e,r._dbSchema);try{s.create(),r._state.PR1398_maxLoop=3}catch(i){return i.name===Xi.InvalidState&&r.isOpen()&&--r._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),r._close(),r.open().then(()=>Ci(r,t,e,n))):qe(i)}return s._promise(t,(i,a)=>ar(()=>(ee.trans=s,n(i,a,s)))).then(i=>s._completion.then(()=>i))}if(r._state.openComplete)return qe(new oe.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._options.autoOpen)return qe(new oe.DatabaseClosed);r.open().catch(Ae)}return r._state.dbReadyPromise.then(()=>Ci(r,t,e,n))}const qa="3.2.4",_r=String.fromCharCode(65535),Si=-1/0,Mt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",pl="String expected.",wn=[],Fs=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),au=Fs,ou=Fs,bl=r=>!/(dexie\.js|dexie\.min\.js)/.test(r),Ks="__dbnames",ti="readonly",ri="readwrite";function Ar(r,t){return r?t?function(){return r.apply(this,arguments)&&t.apply(this,arguments)}:r:t}const gl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function is(r){return typeof r!="string"||/\./.test(r)?t=>t:t=>(t[r]===void 0&&r in t&&delete(t=Fn(t))[r],t)}class lu{_trans(t,e,n){const s=this._tx||ee.trans,i=this.name;function a(l,f,u){if(!u.schema[i])throw new oe.NotFound("Table "+i+" not part of transaction");return e(u.idbtrans,u)}const o=Kn();try{return s&&s.db===this.db?s===ee.trans?s._promise(t,a,n):ar(()=>s._promise(t,a,n),{trans:s,transless:ee.transless||ee}):Ci(this.db,t,[this.name],a)}finally{o&&Rn()}}get(t,e){return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",n=>this.core.get({trans:n,key:t}).then(s=>this.hook.reading.fire(s))).then(e)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Xe(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const e=ze(t);if(e.length===1)return this.where(e[0]).equals(t[e[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(f=>f.compound&&e.every(u=>f.keyPath.indexOf(u)>=0)&&f.keyPath.every(u=>e.indexOf(u)>=0))[0];if(n&&this.db._maxKey!==_r)return this.where(n.name).equals(n.keyPath.map(f=>t[f]));!n&&Pt&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${e.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function a(f,u){try{return i.cmp(f,u)===0}catch{return!1}}const[o,l]=e.reduce(([f,u],m)=>{const d=s[m],y=t[m];return[f||d,f||!d?Ar(u,d&&d.multi?$=>{const _=Vt($,m);return Xe(_)&&_.some(P=>a(y,P))}:$=>a(y,Vt($,m))):u]},[null,null]);return o?this.where(o.name).equals(t[o.keyPath]).filter(l):n?this.filter(l):this.where(e).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Xe(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const e=n=>{if(!n)return n;const s=Object.create(t.prototype);for(var i in n)if(ht(n,i))try{s[i]=n[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t}defineClass(){return this.mapToClass(function(t){et(this,t)})}add(t,e){const{auto:n,keyPath:s}=this.schema.primKey;let i=t;return s&&n&&(i=is(s)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:e!=null?[e]:null,values:[i]})).then(a=>a.numFailures?G.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{wt(t,s,a)}catch{}return a})}update(t,e){if(typeof t!="object"||Xe(t))return this.where(":id").equals(t).modify(e);{const n=Vt(t,this.schema.primKey.keyPath);if(n===void 0)return qe(new oe.InvalidArgument("Given object does not contain its primary key"));try{typeof e!="function"?ze(e).forEach(s=>{wt(t,s,e[s])}):e(t,{value:t,primKey:n})}catch{}return this.where(":id").equals(n).modify(e)}}put(t,e){const{auto:n,keyPath:s}=this.schema.primKey;let i=t;return s&&n&&(i=is(s)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[i],keys:e!=null?[e]:null})).then(a=>a.numFailures?G.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{wt(t,s,a)}catch{}return a})}delete(t){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"delete",keys:[t]})).then(e=>e.numFailures?G.reject(e.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:gl})).then(t=>t.numFailures?G.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",e=>this.core.getMany({keys:t,trans:e}).then(n=>n.map(s=>this.hook.reading.fire(s))))}bulkAdd(t,e,n){const s=Array.isArray(e)?e:void 0,i=(n=n||(s?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:l}=this.schema.primKey;if(l&&s)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");const f=t.length;let u=l&&o?t.map(is(l)):t;return this.core.mutate({trans:a,type:"add",keys:s,values:u,wantResults:i}).then(({numFailures:m,results:d,lastResult:y,failures:$})=>{if(m===0)return i?d:y;throw new _n(`${this.name}.bulkAdd(): ${m} of ${f} operations failed`,$)})})}bulkPut(t,e,n){const s=Array.isArray(e)?e:void 0,i=(n=n||(s?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:l}=this.schema.primKey;if(l&&s)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");const f=t.length;let u=l&&o?t.map(is(l)):t;return this.core.mutate({trans:a,type:"put",keys:s,values:u,wantResults:i}).then(({numFailures:m,results:d,lastResult:y,failures:$})=>{if(m===0)return i?d:y;throw new _n(`${this.name}.bulkPut(): ${m} of ${f} operations failed`,$)})})}bulkDelete(t){const e=t.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:t})).then(({numFailures:n,lastResult:s,failures:i})=>{if(n===0)return s;throw new _n(`${this.name}.bulkDelete(): ${n} of ${e} operations failed`,i)})}}function En(r){var t={},e=function(a,o){if(o){for(var l=arguments.length,f=new Array(l-1);--l;)f[l-1]=arguments[l];return t[a].subscribe.apply(null,f),r}if(typeof a=="string")return t[a]};e.addEventType=i;for(var n=1,s=arguments.length;n<s;++n)i(arguments[n]);return e;function i(a,o,l){if(typeof a!="object"){var f;o||(o=Jc),l||(l=Ae);var u={subscribers:[],fire:l,subscribe:function(m){u.subscribers.indexOf(m)===-1&&(u.subscribers.push(m),u.fire=o(u.fire,m))},unsubscribe:function(m){u.subscribers=u.subscribers.filter(function(d){return d!==m}),u.fire=u.subscribers.reduce(o,l)}};return t[a]=e[a]=u,u}ze(f=a).forEach(function(m){var d=f[m];if(Xe(d))i(m,f[m][0],f[m][1]);else{if(d!=="asap")throw new oe.InvalidArgument("Invalid event config");var y=i(m,An,function(){for(var $=arguments.length,_=new Array($);$--;)_[$]=arguments[$];y.subscribers.forEach(function(P){Zo(function(){P.apply(null,_)})})})}})}}function gn(r,t){return qr(t).from({prototype:r}),t}function Kr(r,t){return!(r.filter||r.algorithm||r.or)&&(t?r.justLimit:!r.replayFilter)}function ni(r,t){r.filter=Ar(r.filter,t)}function si(r,t,e){var n=r.replayFilter;r.replayFilter=n?()=>Ar(n(),t()):t,r.justLimit=e&&!n}function bs(r,t){if(r.isPrimKey)return t.primaryKey;const e=t.getIndexByKeyPath(r.index);if(!e)throw new oe.Schema("KeyPath "+r.index+" on object store "+t.name+" is not indexed");return e}function Ua(r,t,e){const n=bs(r,t.schema);return t.openCursor({trans:e,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:n,range:r.range}})}function as(r,t,e,n){const s=r.replayFilter?Ar(r.filter,r.replayFilter()):r.filter;if(r.or){const i={},a=(o,l,f)=>{if(!s||s(l,f,d=>l.stop(d),d=>l.fail(d))){var u=l.primaryKey,m=""+u;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(u)),ht(i,m)||(i[m]=!0,t(o,l,f))}};return Promise.all([r.or._iterate(a,e),Ga(Ua(r,n,e),r.algorithm,a,!r.keysOnly&&r.valueMapper)])}return Ga(Ua(r,n,e),Ar(r.algorithm,s),t,!r.keysOnly&&r.valueMapper)}function Ga(r,t,e,n){var s=Te(n?(i,a,o)=>e(n(i),a,o):e);return r.then(i=>{if(i)return i.start(()=>{var a=()=>i.continue();t&&!t(i,o=>a=o,o=>{i.stop(o),a=Ae},o=>{i.fail(o),a=Ae})||s(i.value,i,o=>a=o),a()})})}function Qe(r,t){try{const e=Wa(r),n=Wa(t);if(e!==n)return e==="Array"?1:n==="Array"?-1:e==="binary"?1:n==="binary"?-1:e==="string"?1:n==="string"?-1:e==="Date"?1:n!=="Date"?NaN:-1;switch(e){case"number":case"Date":case"string":return r>t?1:r<t?-1:0;case"binary":return function(s,i){const a=s.length,o=i.length,l=a<o?a:o;for(let f=0;f<l;++f)if(s[f]!==i[f])return s[f]<i[f]?-1:1;return a===o?0:a<o?-1:1}(Ha(r),Ha(t));case"Array":return function(s,i){const a=s.length,o=i.length,l=a<o?a:o;for(let f=0;f<l;++f){const u=Qe(s[f],i[f]);if(u!==0)return u}return a===o?0:a<o?-1:1}(r,t)}}catch{}return NaN}function Wa(r){const t=typeof r;if(t!=="object")return t;if(ArrayBuffer.isView(r))return"binary";const e=pi(r);return e==="ArrayBuffer"?"binary":e}function Ha(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}class cu{_read(t,e){var n=this._ctx;return n.error?n.table._trans(null,qe.bind(null,n.error)):n.table._trans("readonly",t).then(e)}_write(t){var e=this._ctx;return e.error?e.table._trans(null,qe.bind(null,e.error)):e.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var e=this._ctx;e.algorithm=Ar(e.algorithm,t)}_iterate(t,e){return as(this._ctx,t,e,this._ctx.table.core)}clone(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&et(n,t),e._ctx=n,e}raw(){return this._ctx.valueMapper=null,this}each(t){var e=this._ctx;return this._read(n=>as(e,t,n,e.table.core))}count(t){return this._read(e=>{const n=this._ctx,s=n.table.core;if(Kr(n,!0))return s.count({trans:e,query:{index:bs(n,s.schema),range:n.range}}).then(a=>Math.min(a,n.limit));var i=0;return as(n,()=>(++i,!1),e,s).then(()=>i)}).then(t)}sortBy(t,e){const n=t.split(".").reverse(),s=n[0],i=n.length-1;function a(f,u){return u?a(f[n[u]],u-1):f[s]}var o=this._ctx.dir==="next"?1:-1;function l(f,u){var m=a(f,i),d=a(u,i);return m<d?-o:m>d?o:0}return this.toArray(function(f){return f.sort(l)}).then(e)}toArray(t){return this._read(e=>{var n=this._ctx;if(n.dir==="next"&&Kr(n,!0)&&n.limit>0){const{valueMapper:s}=n,i=bs(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return as(n,i=>s.push(i),e,n.table.core).then(()=>s)}},t)}offset(t){var e=this._ctx;return t<=0||(e.offset+=t,Kr(e)?si(e,()=>{var n=t;return(s,i)=>n===0||(n===1?(--n,!1):(i(()=>{s.advance(n),n=0}),!1))}):si(e,()=>{var n=t;return()=>--n<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),si(this._ctx,()=>{var e=t;return function(n,s,i){return--e<=0&&s(i),e>=0}},!0),this}until(t,e){return ni(this._ctx,function(n,s,i){return!t(n.value)||(s(i),e)}),this}first(t){return this.limit(1).toArray(function(e){return e[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var e,n;return ni(this._ctx,function(s){return t(s.value)}),e=this._ctx,n=t,e.isMatch=Ar(e.isMatch,n),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(n,s){t(s.key,s)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(n,s){t(s.primaryKey,s)})}keys(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(s,i){n.push(i.key)}).then(function(){return n}).then(t)}primaryKeys(t){var e=this._ctx;if(e.dir==="next"&&Kr(e,!0)&&e.limit>0)return this._read(s=>{var i=bs(e,e.table.core.schema);return e.table.core.query({trans:s,values:!1,limit:e.limit,query:{index:i,range:e.range}})}).then(({result:s})=>s).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(s,i){n.push(i.primaryKey)}).then(function(){return n}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(e){return e[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return ni(this._ctx,function(s){var i=s.primaryKey.toString(),a=ht(n,i);return n[i]=!0,!a}),this}modify(t){var e=this._ctx;return this._write(n=>{var s;if(typeof t=="function")s=t;else{var i=ze(t),a=i.length;s=function(_){for(var P=!1,k=0;k<a;++k){var E=i[k],L=t[E];Vt(_,E)!==L&&(wt(_,E,L),P=!0)}return P}}const o=e.table.core,{outbound:l,extractKey:f}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,m=[];let d=0;const y=[],$=(_,P)=>{const{failures:k,numFailures:E}=P;d+=_-E;for(let L of ze(k))m.push(k[L])};return this.clone().primaryKeys().then(_=>{const P=k=>{const E=Math.min(u,_.length-k);return o.getMany({trans:n,keys:_.slice(k,k+E),cache:"immutable"}).then(L=>{const T=[],I=[],O=l?[]:null,D=[];for(let F=0;F<E;++F){const V=L[F],q={value:Fn(V),primKey:_[k+F]};s.call(q,q.value,q)!==!1&&(q.value==null?D.push(_[k+F]):l||Qe(f(V),f(q.value))===0?(I.push(q.value),l&&O.push(_[k+F])):(D.push(_[k+F]),T.push(q.value)))}const N=Kr(e)&&e.limit===1/0&&(typeof t!="function"||t===ii)&&{index:e.index,range:e.range};return Promise.resolve(T.length>0&&o.mutate({trans:n,type:"add",values:T}).then(F=>{for(let V in F.failures)D.splice(parseInt(V),1);$(T.length,F)})).then(()=>(I.length>0||N&&typeof t=="object")&&o.mutate({trans:n,type:"put",keys:O,values:I,criteria:N,changeSpec:typeof t!="function"&&t}).then(F=>$(I.length,F))).then(()=>(D.length>0||N&&t===ii)&&o.mutate({trans:n,type:"delete",keys:D,criteria:N}).then(F=>$(D.length,F))).then(()=>_.length>k+E&&P(k+u))})};return P(0).then(()=>{if(m.length>0)throw new ws("Error modifying one or more objects",m,d,y);return _.length})})})}delete(){var t=this._ctx,e=t.range;return Kr(t)&&(t.isPrimKey&&!ou||e.type===3)?this._write(n=>{const{primaryKey:s}=t.table.core.schema,i=e;return t.table.core.count({trans:n,query:{index:s,range:i}}).then(a=>t.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(({failures:o,lastResult:l,results:f,numFailures:u})=>{if(u)throw new ws("Could not delete some values",Object.keys(o).map(m=>o[m]),a-u);return a-u}))}):this.modify(ii)}}const ii=(r,t)=>t.value=null;function uu(r,t){return r<t?-1:r===t?0:1}function fu(r,t){return r>t?-1:r===t?0:1}function lt(r,t,e){var n=r instanceof vl?new r.Collection(r):r;return n._ctx.error=e?new e(t):new TypeError(t),n}function Rr(r){return new r.Collection(r,()=>yl("")).limit(0)}function hu(r,t,e,n,s,i){for(var a=Math.min(r.length,n.length),o=-1,l=0;l<a;++l){var f=t[l];if(f!==n[l])return s(r[l],e[l])<0?r.substr(0,l)+e[l]+e.substr(l+1):s(r[l],n[l])<0?r.substr(0,l)+n[l]+e.substr(l+1):o>=0?r.substr(0,o)+t[o]+e.substr(o+1):null;s(r[l],f)<0&&(o=l)}return a<n.length&&i==="next"?r+e.substr(r.length):a<r.length&&i==="prev"?r.substr(0,e.length):o<0?null:r.substr(0,o)+n[o]+e.substr(o+1)}function os(r,t,e,n){var s,i,a,o,l,f,u,m=e.length;if(!e.every(_=>typeof _=="string"))return lt(r,pl);function d(_){s=function(k){return k==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(_),i=function(k){return k==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(_),a=_==="next"?uu:fu;var P=e.map(function(k){return{lower:i(k),upper:s(k)}}).sort(function(k,E){return a(k.lower,E.lower)});o=P.map(function(k){return k.upper}),l=P.map(function(k){return k.lower}),f=_,u=_==="next"?"":n}d("next");var y=new r.Collection(r,()=>Jt(o[0],l[m-1]+n));y._ondirectionchange=function(_){d(_)};var $=0;return y._addAlgorithm(function(_,P,k){var E=_.key;if(typeof E!="string")return!1;var L=i(E);if(t(L,l,$))return!0;for(var T=null,I=$;I<m;++I){var O=hu(E,L,o[I],l[I],a,f);O===null&&T===null?$=I+1:(T===null||a(T,O)>0)&&(T=O)}return P(T!==null?function(){_.continue(T+u)}:k),!1}),y}function Jt(r,t,e,n){return{type:2,lower:r,upper:t,lowerOpen:e,upperOpen:n}}function yl(r){return{type:1,lower:r,upper:r}}class vl{get Collection(){return this._ctx.table.db.Collection}between(t,e,n,s){n=n!==!1,s=s===!0;try{return this._cmp(t,e)>0||this._cmp(t,e)===0&&(n||s)&&(!n||!s)?Rr(this):new this.Collection(this,()=>Jt(t,e,!n,!s))}catch{return lt(this,Mt)}}equals(t){return t==null?lt(this,Mt):new this.Collection(this,()=>yl(t))}above(t){return t==null?lt(this,Mt):new this.Collection(this,()=>Jt(t,void 0,!0))}aboveOrEqual(t){return t==null?lt(this,Mt):new this.Collection(this,()=>Jt(t,void 0,!1))}below(t){return t==null?lt(this,Mt):new this.Collection(this,()=>Jt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?lt(this,Mt):new this.Collection(this,()=>Jt(void 0,t))}startsWith(t){return typeof t!="string"?lt(this,pl):this.between(t,t+_r,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):os(this,(e,n)=>e.indexOf(n[0])===0,[t],_r)}equalsIgnoreCase(t){return os(this,(e,n)=>e===n[0],[t],"")}anyOfIgnoreCase(){var t=Rt.apply(Br,arguments);return t.length===0?Rr(this):os(this,(e,n)=>n.indexOf(e)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Rt.apply(Br,arguments);return t.length===0?Rr(this):os(this,(e,n)=>n.some(s=>e.indexOf(s)===0),t,_r)}anyOf(){const t=Rt.apply(Br,arguments);let e=this._cmp;try{t.sort(e)}catch{return lt(this,Mt)}if(t.length===0)return Rr(this);const n=new this.Collection(this,()=>Jt(t[0],t[t.length-1]));n._ondirectionchange=i=>{e=i==="next"?this._ascending:this._descending,t.sort(e)};let s=0;return n._addAlgorithm((i,a,o)=>{const l=i.key;for(;e(l,t[s])>0;)if(++s,s===t.length)return a(o),!1;return e(l,t[s])===0||(a(()=>{i.continue(t[s])}),!1)}),n}notEqual(t){return this.inAnyRange([[Si,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=Rt.apply(Br,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return lt(this,Mt)}const e=t.reduce((n,s)=>n?n.concat([[n[n.length-1][1],s]]):[[Si,s]],null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,e){const n=this._cmp,s=this._ascending,i=this._descending,a=this._min,o=this._max;if(t.length===0)return Rr(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&s(E[0],E[1])<=0))return lt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);const l=!e||e.includeLowers!==!1,f=e&&e.includeUppers===!0;let u,m=s;function d(E,L){return m(E[0],L[0])}try{u=t.reduce(function(E,L){let T=0,I=E.length;for(;T<I;++T){const O=E[T];if(n(L[0],O[1])<0&&n(L[1],O[0])>0){O[0]=a(O[0],L[0]),O[1]=o(O[1],L[1]);break}}return T===I&&E.push(L),E},[]),u.sort(d)}catch{return lt(this,Mt)}let y=0;const $=f?E=>s(E,u[y][1])>0:E=>s(E,u[y][1])>=0,_=l?E=>i(E,u[y][0])>0:E=>i(E,u[y][0])>=0;let P=$;const k=new this.Collection(this,()=>Jt(u[0][0],u[u.length-1][1],!l,!f));return k._ondirectionchange=E=>{E==="next"?(P=$,m=s):(P=_,m=i),u.sort(d)},k._addAlgorithm((E,L,T)=>{for(var I=E.key;P(I);)if(++y,y===u.length)return L(T),!1;return!!function(O){return!$(O)&&!_(O)}(I)||(this._cmp(I,u[y][1])===0||this._cmp(I,u[y][0])===0||L(()=>{m===s?E.continue(u[y][0]):E.continue(u[y][1])}),!1)}),k}startsWithAnyOf(){const t=Rt.apply(Br,arguments);return t.every(e=>typeof e=="string")?t.length===0?Rr(this):this.inAnyRange(t.map(e=>[e,e+_r])):lt(this,"startsWithAnyOf() only works with strings")}}function At(r){return Te(function(t){return Tn(t),r(t.target.error),!1})}function Tn(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}const jn="storagemutated",tr="x-storagemutated-1",lr=En(null,jn);class mu{_lock(){return yn(!ee.global),++this._reculock,this._reculock!==1||ee.global||(ee.lockOwnerFor=this),this}_unlock(){if(yn(!ee.global),--this._reculock==0)for(ee.global||(ee.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{nn(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&ee.lockOwnerFor!==this}create(t){if(!this.mode)return this;const e=this.db.idbdb,n=this.db._state.dbOpenError;if(yn(!this.idbtrans),!t&&!e)switch(n&&n.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(n);case"MissingAPIError":throw new oe.MissingAPI(n.message,n);default:throw new oe.OpenFailed(n)}if(!this.active)throw new oe.TransactionInactive;return yn(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):e.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Te(s=>{Tn(s),this._reject(t.error)}),t.onabort=Te(s=>{Tn(s),this.active&&this._reject(new oe.Abort(t.error)),this.active=!1,this.on("abort").fire(s)}),t.oncomplete=Te(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&lr.storagemutated.fire(t.mutatedParts)}),this}_promise(t,e,n){if(t==="readwrite"&&this.mode!=="readwrite")return qe(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return qe(new oe.TransactionInactive);if(this._locked())return new G((i,a)=>{this._blockedFuncs.push([()=>{this._promise(t,e,n).then(i,a)},ee])});if(n)return ar(()=>{var i=new G((a,o)=>{this._lock();const l=e(a,o,this);l&&l.then&&l.then(a,o)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new G((i,a)=>{var o=e(i,a,this);o&&o.then&&o.then(i,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(t){var e=this._root();const n=G.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(()=>n);else{e._waitingFor=n,e._waitingQueue=[];var s=e.idbtrans.objectStore(e.storeNames[0]);(function a(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var i=e._waitingFor;return new G((a,o)=>{n.then(l=>e._waitingQueue.push(Te(a.bind(null,l))),l=>e._waitingQueue.push(Te(o.bind(null,l)))).finally(()=>{e._waitingFor===i&&(e._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))}table(t){const e=this._memoizedTables||(this._memoizedTables={});if(ht(e,t))return e[t];const n=this.schema[t];if(!n)throw new oe.NotFound("Table "+t+" not part of transaction");const s=new this.db.Table(t,n,this);return s.core=this.db.core.table(t),e[t]=s,s}}function Ai(r,t,e,n,s,i,a){return{name:r,keyPath:t,unique:e,multi:n,auto:s,compound:i,src:(e&&!a?"&":"")+(n?"*":"")+(s?"++":"")+_l(t)}}function _l(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function $l(r,t,e){return{name:r,primKey:t,indexes:e,mappedClass:null,idxByName:Qo(e,n=>[n.name,n])}}let In=r=>{try{return r.only([[]]),In=()=>[[]],[[]]}catch{return In=()=>_r,_r}};function Pi(r){return r==null?()=>{}:typeof r=="string"?function(t){return t.split(".").length===1?n=>n[t]:n=>Vt(n,t)}(r):t=>Vt(t,r)}function Ya(r){return[].slice.call(r)}let du=0;function xn(r){return r==null?":id":typeof r=="string"?r:`[${r.join("+")}]`}function pu(r,t,e){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:f,upper:u,lowerOpen:m,upperOpen:d}=l;return f===void 0?u===void 0?null:t.upperBound(u,!!d):u===void 0?t.lowerBound(f,!!m):t.bound(f,u,!!m,!!d)}const{schema:s,hasGetAll:i}=function(l,f){const u=Ya(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(m=>f.objectStore(m)).map(m=>{const{keyPath:d,autoIncrement:y}=m,$=Xe(d),_=d==null,P={},k={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:$,keyPath:d,autoIncrement:y,unique:!0,extractKey:Pi(d)},indexes:Ya(m.indexNames).map(E=>m.index(E)).map(E=>{const{name:L,unique:T,multiEntry:I,keyPath:O}=E,D={name:L,compound:Xe(O),keyPath:O,unique:T,multiEntry:I,extractKey:Pi(O)};return P[xn(O)]=D,D}),getIndexByKeyPath:E=>P[xn(E)]};return P[":id"]=k.primaryKey,d!=null&&(P[xn(d)]=k.primaryKey),k})},hasGetAll:u.length>0&&"getAll"in f.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(r,e),a=s.tables.map(l=>function(f){const u=f.name;return{name:u,schema:f,mutate:function({trans:m,type:d,keys:y,values:$,range:_}){return new Promise((P,k)=>{P=Te(P);const E=m.objectStore(u),L=E.keyPath==null,T=d==="put"||d==="add";if(!T&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:I}=y||$||{length:1};if(y&&$&&y.length!==$.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});let O;const D=[],N=[];let F=0;const V=H=>{++F,Tn(H)};if(d==="deleteRange"){if(_.type===4)return P({numFailures:F,failures:N,results:[],lastResult:void 0});_.type===3?D.push(O=E.clear()):D.push(O=E.delete(n(_)))}else{const[H,me]=T?L?[$,y]:[$,null]:[y,null];if(T)for(let ce=0;ce<I;++ce)D.push(O=me&&me[ce]!==void 0?E[d](H[ce],me[ce]):E[d](H[ce])),O.onerror=V;else for(let ce=0;ce<I;++ce)D.push(O=E[d](H[ce])),O.onerror=V}const q=H=>{const me=H.target.result;D.forEach((ce,_e)=>ce.error!=null&&(N[_e]=ce.error)),P({numFailures:F,failures:N,results:d==="delete"?y:D.map(ce=>ce.result),lastResult:me})};O.onerror=H=>{V(H),q(H)},O.onsuccess=q})},getMany:({trans:m,keys:d})=>new Promise((y,$)=>{y=Te(y);const _=m.objectStore(u),P=d.length,k=new Array(P);let E,L=0,T=0;const I=D=>{const N=D.target;k[N._pos]=N.result,++T===L&&y(k)},O=At($);for(let D=0;D<P;++D)d[D]!=null&&(E=_.get(d[D]),E._pos=D,E.onsuccess=I,E.onerror=O,++L);L===0&&y(k)}),get:({trans:m,key:d})=>new Promise((y,$)=>{y=Te(y);const _=m.objectStore(u).get(d);_.onsuccess=P=>y(P.target.result),_.onerror=At($)}),query:function(m){return d=>new Promise((y,$)=>{y=Te(y);const{trans:_,values:P,limit:k,query:E}=d,L=k===1/0?void 0:k,{index:T,range:I}=E,O=_.objectStore(u),D=T.isPrimaryKey?O:O.index(T.name),N=n(I);if(k===0)return y({result:[]});if(m){const F=P?D.getAll(N,L):D.getAllKeys(N,L);F.onsuccess=V=>y({result:V.target.result}),F.onerror=At($)}else{let F=0;const V=P||!("openKeyCursor"in D)?D.openCursor(N):D.openKeyCursor(N),q=[];V.onsuccess=H=>{const me=V.result;return me?(q.push(P?me.value:me.primaryKey),++F===k?y({result:q}):void me.continue()):y({result:q})},V.onerror=At($)}})}(i),openCursor:function({trans:m,values:d,query:y,reverse:$,unique:_}){return new Promise((P,k)=>{P=Te(P);const{index:E,range:L}=y,T=m.objectStore(u),I=E.isPrimaryKey?T:T.index(E.name),O=$?_?"prevunique":"prev":_?"nextunique":"next",D=d||!("openKeyCursor"in I)?I.openCursor(n(L),O):I.openKeyCursor(n(L),O);D.onerror=At(k),D.onsuccess=Te(N=>{const F=D.result;if(!F)return void P(null);F.___id=++du,F.done=!1;const V=F.continue.bind(F);let q=F.continuePrimaryKey;q&&(q=q.bind(F));const H=F.advance.bind(F),me=()=>{throw new Error("Cursor not stopped")};F.trans=m,F.stop=F.continue=F.continuePrimaryKey=F.advance=()=>{throw new Error("Cursor not started")},F.fail=Te(k),F.next=function(){let ce=1;return this.start(()=>ce--?this.continue():this.stop()).then(()=>this)},F.start=ce=>{const _e=new Promise((xe,ie)=>{xe=Te(xe),D.onerror=At(ie),F.fail=ie,F.stop=Fe=>{F.stop=F.continue=F.continuePrimaryKey=F.advance=me,xe(Fe)}}),Ee=()=>{if(D.result)try{ce()}catch(xe){F.fail(xe)}else F.done=!0,F.start=()=>{throw new Error("Cursor behind last entry")},F.stop()};return D.onsuccess=Te(xe=>{D.onsuccess=Ee,Ee()}),F.continue=V,F.continuePrimaryKey=q,F.advance=H,Ee(),_e},P(F)},k)})},count({query:m,trans:d}){const{index:y,range:$}=m;return new Promise((_,P)=>{const k=d.objectStore(u),E=y.isPrimaryKey?k:k.index(y.name),L=n($),T=L?E.count(L):E.count();T.onsuccess=Te(I=>_(I.target.result)),T.onerror=At(P)})}}}(l)),o={};return a.forEach(l=>o[l.name]=l),{stack:"dbcore",transaction:r.transaction.bind(r),table(l){if(!o[l])throw new Error(`Table '${l}' not found`);return o[l]},MIN_KEY:-1/0,MAX_KEY:In(t),schema:s}}function Ti({_novip:r},t){const e=t.db,n=function(s,i,{IDBKeyRange:a,indexedDB:o},l){return{dbcore:function(u,m){return m.reduce((d,{create:y})=>({...d,...y(d)}),u)}(pu(i,a,l),s.dbcore)}}(r._middlewares,e,r._deps,t);r.core=n.dbcore,r.tables.forEach(s=>{const i=s.name;r.core.schema.tables.some(a=>a.name===i)&&(s.core=r.core.table(i),r[i]instanceof r.Table&&(r[i].core=s.core))})}function Ss({_novip:r},t,e,n){e.forEach(s=>{const i=n[s];t.forEach(a=>{const o=Wi(a,s);(!o||"value"in o&&o.value===void 0)&&(a===r.Transaction.prototype||a instanceof r.Transaction?zt(a,s,{get(){return this.table(s)},set(l){Yo(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new r.Table(s,i))})})}function ji({_novip:r},t){t.forEach(e=>{for(let n in e)e[n]instanceof r.Table&&delete e[n]})}function bu(r,t){return r._cfg.version-t._cfg.version}function gu(r,t,e,n){const s=r._dbSchema,i=r._createTransaction("readwrite",r._storeNames,s);i.create(e),i._completion.catch(n);const a=i._reject.bind(i),o=ee.transless||ee;ar(()=>{ee.trans=i,ee.transless=o,t===0?(ze(s).forEach(l=>{ai(e,l,s[l].primKey,s[l].indexes)}),Ti(r,e),G.follow(()=>r.on.populate.fire(i)).catch(a)):function({_novip:l},f,u,m){const d=[],y=l._versions;let $=l._dbSchema=Li(l,l.idbdb,m),_=!1;const P=y.filter(E=>E._cfg.version>=f);function k(){return d.length?G.resolve(d.shift()(u.idbtrans)).then(k):G.resolve()}return P.forEach(E=>{d.push(()=>{const L=$,T=E._cfg.dbschema;Oi(l,L,m),Oi(l,T,m),$=l._dbSchema=T;const I=wl(L,T);I.add.forEach(D=>{ai(m,D[0],D[1].primKey,D[1].indexes)}),I.change.forEach(D=>{if(D.recreate)throw new oe.Upgrade("Not yet support for changing primary key");{const N=m.objectStore(D.name);D.add.forEach(F=>Ii(N,F)),D.change.forEach(F=>{N.deleteIndex(F.name),Ii(N,F)}),D.del.forEach(F=>N.deleteIndex(F))}});const O=E._cfg.contentUpgrade;if(O&&E._cfg.version>f){Ti(l,m),u._memoizedTables={},_=!0;let D=Jo(T);I.del.forEach(q=>{D[q]=L[q]}),ji(l,[l.Transaction.prototype]),Ss(l,[l.Transaction.prototype],ze(D),D),u.schema=D;const N=Hi(O);let F;N&&rn();const V=G.follow(()=>{if(F=O(u),F&&N){var q=Gt.bind(null,null);F.then(q,q)}});return F&&typeof F.then=="function"?G.resolve(F):V.then(()=>F)}}),d.push(L=>{(!_||!au)&&function(T,I){[].slice.call(I.db.objectStoreNames).forEach(O=>T[O]==null&&I.db.deleteObjectStore(O))}(E._cfg.dbschema,L),ji(l,[l.Transaction.prototype]),Ss(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),k().then(()=>{var E,L;L=m,ze(E=$).forEach(T=>{L.db.objectStoreNames.contains(T)||ai(L,T,E[T].primKey,E[T].indexes)})})}(r,t,i,e).catch(a)})}function wl(r,t){const e={del:[],add:[],change:[]};let n;for(n in r)t[n]||e.del.push(n);for(n in t){const s=r[n],i=t[n];if(s){const a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!Fs)a.recreate=!0,e.change.push(a);else{const o=s.idxByName,l=i.idxByName;let f;for(f in o)l[f]||a.del.push(f);for(f in l){const u=o[f],m=l[f];u?u.src!==m.src&&a.change.push(m):a.add.push(m)}(a.del.length>0||a.add.length>0||a.change.length>0)&&e.change.push(a)}}else e.add.push([n,i])}return e}function ai(r,t,e,n){const s=r.db.createObjectStore(t,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return n.forEach(i=>Ii(s,i)),s}function Ii(r,t){r.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Li(r,t,e){const n={};return $s(t.objectStoreNames,0).forEach(s=>{const i=e.objectStore(s);let a=i.keyPath;const o=Ai(_l(a),a||"",!1,!1,!!i.autoIncrement,a&&typeof a!="string",!0),l=[];for(let u=0;u<i.indexNames.length;++u){const m=i.index(i.indexNames[u]);a=m.keyPath;var f=Ai(m.name,a,!!m.unique,!!m.multiEntry,!1,a&&typeof a!="string",!1);l.push(f)}n[s]=$l(s,o,l)}),n}function Oi({_novip:r},t,e){const n=e.db.objectStoreNames;for(let s=0;s<n.length;++s){const i=n[s],a=e.objectStore(i);r._hasGetAll="getAll"in a;for(let o=0;o<a.indexNames.length;++o){const l=a.indexNames[o],f=a.index(l).keyPath,u=typeof f=="string"?f:"["+$s(f).join("+")+"]";if(t[i]){const m=t[i].idxByName[u];m&&(m.name=l,delete t[i].idxByName[u],t[i].idxByName[l]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Pe.WorkerGlobalScope&&Pe instanceof Pe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}class yu{_parseStoresSpec(t,e){ze(t).forEach(n=>{if(t[n]!==null){var s=t[n].split(",").map((a,o)=>{const l=(a=a.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Ai(l,f||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),Xe(f),o===0)}),i=s.shift();if(i.multi)throw new oe.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),e[n]=$l(n,i,s)}})}stores(t){const e=this.db;this._cfg.storesSource=this._cfg.storesSource?et(this._cfg.storesSource,t):t;const n=e._versions,s={};let i={};return n.forEach(a=>{et(s,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(s,i)}),e._dbSchema=i,ji(e,[e._allTables,e,e.Transaction.prototype]),Ss(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],ze(i),i),e._storeNames=ze(i),this}upgrade(t){return this._cfg.contentUpgrade=Zi(this._cfg.contentUpgrade||Ae,t),this}}function ta(r,t){let e=r._dbNamesDB;return e||(e=r._dbNamesDB=new kr(Ks,{addons:[],indexedDB:r,IDBKeyRange:t}),e.version(1).stores({dbnames:"name"})),e.table("dbnames")}function ra(r){return r&&typeof r.databases=="function"}function Di(r){return ar(function(){return ee.letThrough=!0,r()})}function vu(){var r;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var e=function(){return indexedDB.databases().finally(t)};r=setInterval(e,100),e()}).finally(function(){return clearInterval(r)}):Promise.resolve()}function _u(r){const t=r._state,{indexedDB:e}=r._deps;if(t.isBeingOpened||r.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?qe(t.dbOpenError):r);Pt&&(t.openCanceller._stackHolder=Tr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const n=t.openCanceller;function s(){if(t.openCanceller!==n)throw new oe.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,a=null,o=!1;return G.race([n,(typeof navigator>"u"?G.resolve():vu()).then(()=>new G((l,f)=>{if(s(),!e)throw new oe.MissingAPI;const u=r.name,m=t.autoSchema?e.open(u):e.open(u,Math.round(10*r.verno));if(!m)throw new oe.MissingAPI;m.onerror=At(f),m.onblocked=Te(r._fireOnBlocked),m.onupgradeneeded=Te(d=>{if(a=m.transaction,t.autoSchema&&!r._options.allowEmptyDB){m.onerror=Tn,a.abort(),m.result.close();const $=e.deleteDatabase(u);$.onsuccess=$.onerror=Te(()=>{f(new oe.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{a.onerror=At(f);var y=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;o=y<1,r._novip.idbdb=m.result,gu(r,y/10,a,f)}},f),m.onsuccess=Te(()=>{a=null;const d=r._novip.idbdb=m.result,y=$s(d.objectStoreNames);if(y.length>0)try{const _=d.transaction(($=y).length===1?$[0]:$,"readonly");t.autoSchema?function({_novip:P},k,E){P.verno=k.version/10;const L=P._dbSchema=Li(0,k,E);P._storeNames=$s(k.objectStoreNames,0),Ss(P,[P._allTables],ze(L),L)}(r,d,_):(Oi(r,r._dbSchema,_),function(P,k){const E=wl(Li(0,P.idbdb,k),P._dbSchema);return!(E.add.length||E.change.some(L=>L.add.length||L.change.length))}(r,_)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ti(r,_)}catch{}var $;wn.push(r),d.onversionchange=Te(_=>{t.vcFired=!0,r.on("versionchange").fire(_)}),d.onclose=Te(_=>{r.on("close").fire(_)}),o&&function({indexedDB:_,IDBKeyRange:P},k){!ra(_)&&k!==Ks&&ta(_,P).put({name:k}).catch(Ae)}(r._deps,u),l()},f)}))]).then(()=>(s(),t.onReadyBeingFired=[],G.resolve(Di(()=>r.on.ready.fire(r.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let f=t.onReadyBeingFired.reduce(Zi,Ae);return t.onReadyBeingFired=[],G.resolve(Di(()=>f(r.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>r).catch(l=>{t.dbOpenError=l;try{a&&a.abort()}catch{}return n===t.openCanceller&&r._close(),qe(l)}).finally(()=>{t.openComplete=!0,i()})}function Mi(r){var t=i=>r.next(i),e=s(t),n=s(i=>r.throw(i));function s(i){return a=>{var o=i(a),l=o.value;return o.done?l:l&&typeof l.then=="function"?l.then(e,n):Xe(l)?Promise.all(l).then(e,n):e(l)}}return s(t)()}function $u(r,t,e){var n=arguments.length;if(n<2)throw new oe.InvalidArgument("Too few arguments");for(var s=new Array(n-1);--n;)s[n-1]=arguments[n];return e=s.pop(),[r,el(s),e]}function El(r,t,e,n,s){return G.resolve().then(()=>{const i=ee.transless||ee,a=r._createTransaction(t,e,r._dbSchema,n),o={trans:a,transless:i};if(n)a.idbtrans=n.idbtrans;else try{a.create(),r._state.PR1398_maxLoop=3}catch(m){return m.name===Xi.InvalidState&&r.isOpen()&&--r._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),r._close(),r.open().then(()=>El(r,t,e,null,s))):qe(m)}const l=Hi(s);let f;l&&rn();const u=G.follow(()=>{if(f=s.call(a,a),f)if(l){var m=Gt.bind(null,null);f.then(m,m)}else typeof f.next=="function"&&typeof f.throw=="function"&&(f=Mi(f))},o);return(f&&typeof f.then=="function"?G.resolve(f).then(m=>a.active?m:qe(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>f)).then(m=>(n&&a._resolve(),a._completion.then(()=>m))).catch(m=>(a._reject(m),qe(m)))})}function ls(r,t,e){const n=Xe(r)?r.slice():[r];for(let s=0;s<e;++s)n.push(t);return n}const wu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(r){return{...r,table(t){const e=r.table(t),{schema:n}=e,s={},i=[];function a(u,m,d){const y=xn(u),$=s[y]=s[y]||[],_=u==null?0:typeof u=="string"?1:u.length,P=m>0,k={...d,isVirtual:P,keyTail:m,keyLength:_,extractKey:Pi(u),unique:!P&&d.unique};return $.push(k),k.isPrimaryKey||i.push(k),_>1&&a(_===2?u[0]:u.slice(0,_-1),m+1,d),$.sort((E,L)=>E.keyTail-L.keyTail),k}const o=a(n.primaryKey.keyPath,0,n.primaryKey);s[":id"]=[o];for(const u of n.indexes)a(u.keyPath,0,u);function l(u){const m=u.query.index;return m.isVirtual?{...u,query:{index:m,range:(d=u.query.range,y=m.keyTail,{type:d.type===1?2:d.type,lower:ls(d.lower,d.lowerOpen?r.MAX_KEY:r.MIN_KEY,y),lowerOpen:!0,upper:ls(d.upper,d.upperOpen?r.MIN_KEY:r.MAX_KEY,y),upperOpen:!0})}}:u;var d,y}return{...e,schema:{...n,primaryKey:o,indexes:i,getIndexByKeyPath:function(u){const m=s[xn(u)];return m&&m[0]}},count:u=>e.count(l(u)),query:u=>e.query(l(u)),openCursor(u){const{keyTail:m,isVirtual:d,keyLength:y}=u.query.index;return d?e.openCursor(l(u)).then($=>$&&function(_){return Object.create(_,{continue:{value:function(k){k!=null?_.continue(ls(k,u.reverse?r.MAX_KEY:r.MIN_KEY,m)):u.unique?_.continue(_.key.slice(0,y).concat(u.reverse?r.MIN_KEY:r.MAX_KEY,m)):_.continue()}},continuePrimaryKey:{value(k,E){_.continuePrimaryKey(ls(k,r.MAX_KEY,m),E)}},primaryKey:{get:()=>_.primaryKey},key:{get(){const k=_.key;return y===1?k[0]:k.slice(0,y)}},value:{get:()=>_.value}})}($)):e.openCursor(u)}}}}}};function na(r,t,e,n){return e=e||{},n=n||"",ze(r).forEach(s=>{if(ht(t,s)){var i=r[s],a=t[s];if(typeof i=="object"&&typeof a=="object"&&i&&a){const o=pi(i);o!==pi(a)?e[n+s]=t[s]:o==="Object"?na(i,a,e,n+s+"."):i!==a&&(e[n+s]=t[s])}else i!==a&&(e[n+s]=t[s])}else e[n+s]=void 0}),ze(t).forEach(s=>{ht(r,s)||(e[n+s]=t[s])}),e}const Eu={stack:"dbcore",name:"HooksMiddleware",level:2,create:r=>({...r,table(t){const e=r.table(t),{primaryKey:n}=e.schema;return{...e,mutate(i){const a=ee.trans,{deleting:o,creating:l,updating:f}=a.table(t).hook;switch(i.type){case"add":if(l.fire===Ae)break;return a._promise("readwrite",()=>u(i),!0);case"put":if(l.fire===Ae&&f.fire===Ae)break;return a._promise("readwrite",()=>u(i),!0);case"delete":if(o.fire===Ae)break;return a._promise("readwrite",()=>u(i),!0);case"deleteRange":if(o.fire===Ae)break;return a._promise("readwrite",()=>function(d){return m(d.trans,d.range,1e4)}(i),!0)}return e.mutate(i);function u(d){const y=ee.trans,$=d.keys||function(_,P){return P.type==="delete"?P.keys:P.keys||P.values.map(_.extractKey)}(n,d);if(!$)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:$}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(_,P,k){return P.type==="add"?Promise.resolve([]):_.getMany({trans:P.trans,keys:k,cache:"immutable"})}(e,d,$).then(_=>{const P=$.map((k,E)=>{const L=_[E],T={onerror:null,onsuccess:null};if(d.type==="delete")o.fire.call(T,k,L,y);else if(d.type==="add"||L===void 0){const I=l.fire.call(T,k,d.values[E],y);k==null&&I!=null&&(k=I,d.keys[E]=k,n.outbound||wt(d.values[E],n.keyPath,k))}else{const I=na(L,d.values[E]),O=f.fire.call(T,I,k,L,y);if(O){const D=d.values[E];Object.keys(O).forEach(N=>{ht(D,N)?D[N]=O[N]:wt(D,N,O[N])})}}return T});return e.mutate(d).then(({failures:k,results:E,numFailures:L,lastResult:T})=>{for(let I=0;I<$.length;++I){const O=E?E[I]:$[I],D=P[I];O==null?D.onerror&&D.onerror(k[I]):D.onsuccess&&D.onsuccess(d.type==="put"&&_[I]?d.values[I]:O)}return{failures:k,results:E,numFailures:L,lastResult:T}}).catch(k=>(P.forEach(E=>E.onerror&&E.onerror(k)),Promise.reject(k)))})}function m(d,y,$){return e.query({trans:d,values:!1,query:{index:n,range:y},limit:$}).then(({result:_})=>u({type:"delete",keys:_,trans:d}).then(P=>P.numFailures>0?Promise.reject(P.failures[0]):_.length<$?{failures:[],numFailures:0,lastResult:void 0}:m(d,{...y,lower:_[_.length-1],lowerOpen:!0},$)))}}}}})};function xl(r,t,e){try{if(!t||t.keys.length<r.length)return null;const n=[];for(let s=0,i=0;s<t.keys.length&&i<r.length;++s)Qe(t.keys[s],r[i])===0&&(n.push(e?Fn(t.values[s]):t.values[s]),++i);return n.length===r.length?n:null}catch{return null}}const xu={stack:"dbcore",level:-1,create:r=>({table:t=>{const e=r.table(t);return{...e,getMany:n=>{if(!n.cache)return e.getMany(n);const s=xl(n.keys,n.trans._cache,n.cache==="clone");return s?G.resolve(s):e.getMany(n).then(i=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Fn(i):i},i))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),e.mutate(n))}}})};function sa(r){return!("from"in r)}const Kt=function(r,t){if(!this){const e=new Kt;return r&&"d"in r&&et(e,r),e}et(this,arguments.length?{d:1,from:r,to:arguments.length>1?t:r}:{d:0})};function Ln(r,t,e){const n=Qe(t,e);if(isNaN(n))return;if(n>0)throw RangeError();if(sa(r))return et(r,{from:t,to:e,d:1});const s=r.l,i=r.r;if(Qe(e,r.from)<0)return s?Ln(s,t,e):r.l={from:t,to:e,d:1,l:null,r:null},Xa(r);if(Qe(t,r.to)>0)return i?Ln(i,t,e):r.r={from:t,to:e,d:1,l:null,r:null},Xa(r);Qe(t,r.from)<0&&(r.from=t,r.l=null,r.d=i?i.d+1:1),Qe(e,r.to)>0&&(r.to=e,r.r=null,r.d=r.l?r.l.d+1:1);const a=!r.r;s&&!r.l&&As(r,s),i&&a&&As(r,i)}function As(r,t){sa(t)||function e(n,{from:s,to:i,l:a,r:o}){Ln(n,s,i),a&&e(n,a),o&&e(n,o)}(r,t)}function ku(r,t){const e=Ni(t);let n=e.next();if(n.done)return!1;let s=n.value;const i=Ni(r);let a=i.next(s.from),o=a.value;for(;!n.done&&!a.done;){if(Qe(o.from,s.to)<=0&&Qe(o.to,s.from)>=0)return!0;Qe(s.from,o.from)<0?s=(n=e.next(o.from)).value:o=(a=i.next(s.from)).value}return!1}function Ni(r){let t=sa(r)?null:{s:0,n:r};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Qe(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Qe(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Xa(r){var t,e;const n=(((t=r.r)===null||t===void 0?void 0:t.d)||0)-(((e=r.l)===null||e===void 0?void 0:e.d)||0),s=n>1?"r":n<-1?"l":"";if(s){const i=s==="r"?"l":"r",a={...r},o=r[s];r.from=o.from,r.to=o.to,r[s]=o[s],a[s]=o[i],r[i]=a,a.d=Za(a)}r.d=Za(r)}function Za({r,l:t}){return(r?t?Math.max(r.d,t.d):r.d:t?t.d:0)+1}Jr(Kt.prototype,{add(r){return As(this,r),this},addKey(r){return Ln(this,r,r),this},addKeys(r){return r.forEach(t=>Ln(this,t,t)),this},[bi](){return Ni(this)}});const Cu={stack:"dbcore",level:0,create:r=>{const t=r.schema.name,e=new Kt(r.MIN_KEY,r.MAX_KEY);return{...r,table:n=>{const s=r.table(n),{schema:i}=s,{primaryKey:a}=i,{extractKey:o,outbound:l}=a,f={...s,mutate:d=>{const y=d.trans,$=y.mutatedParts||(y.mutatedParts={}),_=O=>{const D=`idb://${t}/${n}/${O}`;return $[D]||($[D]=new Kt)},P=_(""),k=_(":dels"),{type:E}=d;let[L,T]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const I=d.trans._cache;return s.mutate(d).then(O=>{if(Xe(L)){E!=="delete"&&(L=O.results),P.addKeys(L);const D=xl(L,I);D||E==="add"||k.addKeys(L),(D||T)&&function(N,F,V,q){function H(me){const ce=N(me.name||"");function _e(xe){return xe!=null?me.extractKey(xe):null}const Ee=xe=>me.multiEntry&&Xe(xe)?xe.forEach(ie=>ce.addKey(ie)):ce.addKey(xe);(V||q).forEach((xe,ie)=>{const Fe=V&&_e(V[ie]),Ke=q&&_e(q[ie]);Qe(Fe,Ke)!==0&&(Fe!=null&&Ee(Fe),Ke!=null&&Ee(Ke))})}F.indexes.forEach(H)}(_,i,D,T)}else if(L){const D={from:L.lower,to:L.upper};k.add(D),P.add(D)}else P.add(e),k.add(e),i.indexes.forEach(D=>_(D.name).add(e));return O})}},u=({query:{index:d,range:y}})=>{var $,_;return[d,new Kt(($=y.lower)!==null&&$!==void 0?$:r.MIN_KEY,(_=y.upper)!==null&&_!==void 0?_:r.MAX_KEY)]},m={get:d=>[a,new Kt(d.key)],getMany:d=>[a,new Kt().addKeys(d.keys)],count:u,query:u,openCursor:u};return ze(m).forEach(d=>{f[d]=function(y){const{subscr:$}=ee;if($){const _=T=>{const I=`idb://${t}/${n}/${T}`;return $[I]||($[I]=new Kt)},P=_(""),k=_(":dels"),[E,L]=m[d](y);if(_(E.name||"").add(L),!E.isPrimaryKey){if(d!=="count"){const T=d==="query"&&l&&y.values&&s.query({...y,values:!1});return s[d].apply(this,arguments).then(I=>{if(d==="query"){if(l&&y.values)return T.then(({result:D})=>(P.addKeys(D),I));const O=y.values?I.result.map(o):I.result;y.values?P.addKeys(O):k.addKeys(O)}else if(d==="openCursor"){const O=I,D=y.values;return O&&Object.create(O,{key:{get:()=>(k.addKey(O.primaryKey),O.key)},primaryKey:{get(){const N=O.primaryKey;return k.addKey(N),N}},value:{get:()=>(D&&P.addKey(O.primaryKey),O.value)}})}return I})}k.add(e)}}return s[d].apply(this,arguments)}}),f}}}};class kr{constructor(t,e){this._middlewares={},this.verno=0;const n=kr.dependencies;this._options=e={addons:kr.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...e},this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange};const{addons:s}=e;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ae,dbReadyPromise:null,cancelOpen:Ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new G(o=>{i.dbReadyResolve=o}),i.openCanceller=new G((o,l)=>{i.cancelOpen=l}),this._state=i,this.name=t,this.on=En(this,"populate","blocked","versionchange","close",{ready:[Zi,Ae]}),this.on.ready.subscribe=Xo(this.on.ready.subscribe,o=>(l,f)=>{kr.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||G.resolve().then(l),f&&o(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),f&&o(l);else{o(l);const m=this;f||o(function d(){m.on.ready.unsubscribe(l),m.on.ready.unsubscribe(d)})}})}),this.Collection=(a=this,gn(cu.prototype,function(o,l){this.db=a;let f=gl,u=null;if(l)try{f=l()}catch($){u=$}const m=o._ctx,d=m.table,y=d.hook.reading.fire;this._ctx={table:d,index:m.index,isPrimKey:!m.index||d.schema.primKey.keyPath&&m.index===d.schema.primKey.name,range:f,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:m.or,valueMapper:y!==An?y:null}})),this.Table=function(o){return gn(lu.prototype,function(l,f,u){this.db=o,this._tx=u,this.name=l,this.schema=f,this.hook=o._allTables[l]?o._allTables[l].hook:En(null,{creating:[Xc,Ae],reading:[Yc,An],updating:[Qc,Ae],deleting:[Zc,Ae]})})}(this),this.Transaction=function(o){return gn(mu.prototype,function(l,f,u,m,d){this.db=o,this.mode=l,this.storeNames=f,this.schema=u,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=En(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G((y,$)=>{this._resolve=y,this._reject=$}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},y=>{var $=this.active;return this.active=!1,this.on.error.fire(y),this.parent?this.parent._reject(y):$&&this.idbtrans&&this.idbtrans.abort(),qe(y)})})}(this),this.Version=function(o){return gn(yu.prototype,function(l){this.db=o,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(o){return gn(vl.prototype,function(l,f,u){this.db=o,this._ctx={table:l,index:f===":id"?null:f,or:u};const m=o._deps.indexedDB;if(!m)throw new oe.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(d,y)=>m.cmp(y,d),this._max=(d,y)=>m.cmp(d,y)>0?d:y,this._min=(d,y)=>m.cmp(d,y)<0?d:y,this._IDBKeyRange=o._deps.IDBKeyRange})}(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=In(e.IDBKeyRange),this._createTransaction=(o,l,f,u)=>new this.Transaction(o,l,f,this._options.chromeTransactionDurability,u),this._fireOnBlocked=o=>{this.on("blocked").fire(o),wn.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(o))},this.use(wu),this.use(Eu),this.use(Cu),this.use(xu),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(o=>o(this))}version(t){if(isNaN(t)||t<.1)throw new oe.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const e=this._versions;var n=e.filter(s=>s._cfg.version===t)[0];return n||(n=new this.Version(t),e.push(n),e.sort(bu),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(t){return this.idbdb&&(this._state.openComplete||ee.letThrough||this._vip)?t():new G((e,n)=>{if(this._state.openComplete)return n(new oe.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new oe.DatabaseClosed);this.open().catch(Ae)}this._state.dbReadyPromise.then(e,n)}).then(t)}use({stack:t,create:e,level:n,name:s}){s&&this.unuse({stack:t,name:s});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:e,level:n??10,name:s}),i.sort((a,o)=>a.level-o.level),this}unuse({stack:t,name:e,create:n}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(s=>n?s.create!==n:!!e&&s.name!==e)),this}open(){return _u(this)}_close(){const t=this._state,e=wn.indexOf(this);if(e>=0&&wn.splice(e,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new G(n=>{t.dbReadyResolve=n}),t.openCanceller=new G((n,s)=>{t.cancelOpen=s})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new oe.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,e=this._state;return new G((n,s)=>{const i=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=Te(()=>{(function({indexedDB:o,IDBKeyRange:l},f){!ra(o)&&f!==Ks&&ta(o,l).delete(f).catch(Ae)})(this._deps,this.name),n()}),a.onerror=At(s),a.onblocked=this._fireOnBlocked};if(t)throw new oe.InvalidArgument("Arguments not allowed in db.delete()");e.isBeingOpened?e.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ze(this._allTables).map(t=>this._allTables[t])}transaction(){const t=$u.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,e,n){let s=ee.trans;s&&s.db===this&&t.indexOf("!")===-1||(s=null);const i=t.indexOf("?")!==-1;let a,o;t=t.replace("!","").replace("?","");try{if(o=e.map(f=>{var u=f instanceof this.Table?f.name:f;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),t=="r"||t===ti)a=ti;else{if(t!="rw"&&t!=ri)throw new oe.InvalidArgument("Invalid transaction mode: "+t);a=ri}if(s){if(s.mode===ti&&a===ri){if(!i)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&o.forEach(f=>{if(s&&s.storeNames.indexOf(f)===-1){if(!i)throw new oe.SubTransaction("Table "+f+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(f){return s?s._promise(null,(u,m)=>{m(f)}):qe(f)}const l=El.bind(null,this,a,o,s,n);return s?s._promise(a,l,"lock"):ee.trans?nn(ee.transless,()=>this._whenReady(l)):this._whenReady(l)}table(t){if(!ht(this._allTables,t))throw new oe.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const Su=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Au{constructor(t){this._subscribe=t}subscribe(t,e,n){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:e,complete:n})}[Su](){return this}}function kl(r,t){return ze(t).forEach(e=>{As(r[e]||(r[e]=new Kt),t[e])}),r}function Pu(r){let t,e=!1;const n=new Au(s=>{const i=Hi(r);let a=!1,o={},l={};const f={get closed(){return a},unsubscribe:()=>{a=!0,lr.storagemutated.unsubscribe(y)}};s.start&&s.start(f);let u=!1,m=!1;function d(){return ze(l).some(_=>o[_]&&ku(o[_],l[_]))}const y=_=>{kl(o,_),d()&&$()},$=()=>{if(u||a)return;o={};const _={},P=function(k){i&&rn();const E=()=>ar(r,{subscr:k,trans:null}),L=ee.trans?nn(ee.transless,E):E();return i&&L.then(Gt,Gt),L}(_);m||(lr(jn,y),m=!0),u=!0,Promise.resolve(P).then(k=>{e=!0,t=k,u=!1,a||(d()?$():(o={},l=_,s.next&&s.next(k)))},k=>{u=!1,e=!1,s.error&&s.error(k),f.unsubscribe()})};return $(),f});return n.hasValue=()=>e,n.getValue=()=>t,n}let Fi;try{Fi={indexedDB:Pe.indexedDB||Pe.mozIndexedDB||Pe.webkitIndexedDB||Pe.msIndexedDB,IDBKeyRange:Pe.IDBKeyRange||Pe.webkitIDBKeyRange}}catch{Fi={indexedDB:null,IDBKeyRange:null}}const br=kr;function gs(r){let t=Bt;try{Bt=!0,lr.storagemutated.fire(r)}finally{Bt=t}}Jr(br,{...fs,delete:r=>new br(r,{addons:[]}).delete(),exists:r=>new br(r,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(r){try{return function({indexedDB:t,IDBKeyRange:e}){return ra(t)?Promise.resolve(t.databases()).then(n=>n.map(s=>s.name).filter(s=>s!==Ks)):ta(t,e).toCollection().primaryKeys()}(br.dependencies).then(r)}catch{return qe(new oe.MissingAPI)}},defineClass:()=>function(r){et(this,r)},ignoreTransaction:r=>ee.trans?nn(ee.transless,r):r(),vip:Di,async:function(r){return function(){try{var t=Mi(r.apply(this,arguments));return t&&typeof t.then=="function"?t:G.resolve(t)}catch(e){return qe(e)}}},spawn:function(r,t,e){try{var n=Mi(r.apply(e,t||[]));return n&&typeof n.then=="function"?n:G.resolve(n)}catch(s){return qe(s)}},currentTransaction:{get:()=>ee.trans||null},waitFor:function(r,t){const e=G.resolve(typeof r=="function"?br.ignoreTransaction(r):r).timeout(t||6e4);return ee.trans?ee.trans.waitFor(e):e},Promise:G,debug:{get:()=>Pt,set:r=>{rl(r,r==="dexie"?()=>!0:bl)}},derive:qr,extend:et,props:Jr,override:Xo,Events:En,on:lr,liveQuery:Pu,extendObservabilitySet:kl,getByKeyPath:Vt,setByKeyPath:wt,delByKeyPath:function(r,t){typeof t=="string"?wt(r,t,void 0):"length"in t&&[].map.call(t,function(e){wt(r,e,void 0)})},shallowClone:Jo,deepClone:Fn,getObjectDiff:na,cmp:Qe,asap:Zo,minKey:Si,addons:[],connections:wn,errnames:Xi,dependencies:Fi,semVer:qa,version:qa.split(".").map(r=>parseInt(r)).reduce((r,t,e)=>r+t/Math.pow(10,2*e))}),br.maxKey=In(br.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(lr(jn,r=>{if(!Bt){let t;Fs?(t=document.createEvent("CustomEvent"),t.initCustomEvent(tr,!0,!0,r)):t=new CustomEvent(tr,{detail:r}),Bt=!0,dispatchEvent(t),Bt=!1}}),addEventListener(tr,({detail:r})=>{Bt||gs(r)}));let Bt=!1;if(typeof BroadcastChannel<"u"){const r=new BroadcastChannel(tr);typeof r.unref=="function"&&r.unref(),lr(jn,t=>{Bt||r.postMessage(t)}),r.onmessage=t=>{t.data&&gs(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){lr(jn,t=>{try{Bt||(typeof localStorage<"u"&&localStorage.setItem(tr,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(e=>e.postMessage({type:tr,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===tr){const e=JSON.parse(t.newValue);e&&gs(e.changedParts)}});const r=self.document&&navigator.serviceWorker;r&&r.addEventListener("message",function({data:t}){t&&t.type===tr&&gs(t.changedParts)})}G.rejectionMapper=function(r,t){if(!r||r instanceof Ur||r instanceof TypeError||r instanceof SyntaxError||!r.name||!Ra[r.name])return r;var e=new Ra[r.name](t||r.message,r);return"stack"in r&&zt(e,"stack",{get:function(){return this.inner.stack}}),e},rl(Pt,bl);class Tu extends kr{constructor(){super("letkwet");X(this,"songs");X(this,"_meta");this.version(1).stores({songs:"&key,*artists,title",_meta:"last_modified"})}updateSongs(e,n){const s=this.songs.bulkPut(e),i=this._meta.add({last_modified:n});return Promise.all([s,i])}}let Cr=new Tu;function ju(r,t){if(r instanceof RegExp)return{keys:!1,pattern:r};var e,n,s,i,a=[],o="",l=r.split("/");for(l[0]||l.shift();s=l.shift();)e=s[0],e==="*"?(a.push("wild"),o+="/(.*)"):e===":"?(n=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~n?n:~i?i:s.length)),o+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~n?"?":"")+"\\"+s.substring(i))):o+="/"+s;return{keys:a,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}}function Iu(r){let t,e,n;const s=[r[2]];var i=r[0];function a(o){let l={};for(let f=0;f<s.length;f+=1)l=Uo(l,s[f]);return{props:l}}return i&&(t=ys(i,a()),t.$on("routeEvent",r[7])),{c(){t&&ct(t.$$.fragment),e=$e()},l(o){t&&Et(t.$$.fragment,o),e=$e()},m(o,l){t&&ut(t,o,l),Y(o,e,l),n=!0},p(o,l){const f=l&4?Wo(s,[Ho(o[2])]):{};if(l&1&&i!==(i=o[0])){if(t){qt();const u=t;ve(u.$$.fragment,1,0,()=>{ft(u,1)}),Ut()}i?(t=ys(i,a()),t.$on("routeEvent",o[7]),ct(t.$$.fragment),he(t.$$.fragment,1),ut(t,e.parentNode,e)):t=null}else i&&t.$set(f)},i(o){n||(t&&he(t.$$.fragment,o),n=!0)},o(o){t&&ve(t.$$.fragment,o),n=!1},d(o){o&&j(e),t&&ft(t,o)}}}function Lu(r){let t,e,n;const s=[{params:r[1]},r[2]];var i=r[0];function a(o){let l={};for(let f=0;f<s.length;f+=1)l=Uo(l,s[f]);return{props:l}}return i&&(t=ys(i,a()),t.$on("routeEvent",r[6])),{c(){t&&ct(t.$$.fragment),e=$e()},l(o){t&&Et(t.$$.fragment,o),e=$e()},m(o,l){t&&ut(t,o,l),Y(o,e,l),n=!0},p(o,l){const f=l&6?Wo(s,[l&2&&{params:o[1]},l&4&&Ho(o[2])]):{};if(l&1&&i!==(i=o[0])){if(t){qt();const u=t;ve(u.$$.fragment,1,0,()=>{ft(u,1)}),Ut()}i?(t=ys(i,a()),t.$on("routeEvent",o[6]),ct(t.$$.fragment),he(t.$$.fragment,1),ut(t,e.parentNode,e)):t=null}else i&&t.$set(f)},i(o){n||(t&&he(t.$$.fragment,o),n=!0)},o(o){t&&ve(t.$$.fragment,o),n=!1},d(o){o&&j(e),t&&ft(t,o)}}}function Ou(r){let t,e,n,s;const i=[Lu,Iu],a=[];function o(l,f){return l[1]?0:1}return t=o(r),e=a[t]=i[t](r),{c(){e.c(),n=$e()},l(l){e.l(l),n=$e()},m(l,f){a[t].m(l,f),Y(l,n,f),s=!0},p(l,[f]){let u=t;t=o(l),t===u?a[t].p(l,f):(qt(),ve(a[u],1,1,()=>{a[u]=null}),Ut(),e=a[t],e?e.p(l,f):(e=a[t]=i[t](l),e.c()),he(e,1),e.m(n.parentNode,n))},i(l){s||(he(e),s=!0)},o(l){ve(e),s=!1},d(l){l&&j(n),a[t].d(l)}}}function Qa(){const r=window.location.href.indexOf("#/");let t=r>-1?window.location.href.substr(r+1):"/";const e=t.indexOf("?");let n="";return e>-1&&(n=t.substr(e+1),t=t.substr(0,e)),{location:t,querystring:n}}const ia=Mc(null,function(t){t(Qa());const e=()=>{t(Qa())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}});Go(ia,r=>r.location);Go(ia,r=>r.querystring);const Ja=Nc(void 0);function Du(r){r?window.scrollTo(r.__svelte_spa_router_scrollX,r.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Mu(r,t,e){let{routes:n={}}=t,{prefix:s=""}=t,{restoreScrollState:i=!1}=t;class a{constructor(I,O){if(!O||typeof O!="function"&&(typeof O!="object"||O._sveltesparouter!==!0))throw Error("Invalid component object");if(!I||typeof I=="string"&&(I.length<1||I.charAt(0)!="/"&&I.charAt(0)!="*")||typeof I=="object"&&!(I instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:D,keys:N}=ju(I);this.path=I,typeof O=="object"&&O._sveltesparouter===!0?(this.component=O.component,this.conditions=O.conditions||[],this.userData=O.userData,this.props=O.props||{}):(this.component=()=>Promise.resolve(O),this.conditions=[],this.props={}),this._pattern=D,this._keys=N}match(I){if(s){if(typeof s=="string")if(I.startsWith(s))I=I.substr(s.length)||"/";else return null;else if(s instanceof RegExp){const F=I.match(s);if(F&&F[0])I=I.substr(F[0].length)||"/";else return null}}const O=this._pattern.exec(I);if(O===null)return null;if(this._keys===!1)return O;const D={};let N=0;for(;N<this._keys.length;){try{D[this._keys[N]]=decodeURIComponent(O[N+1]||"")||null}catch{D[this._keys[N]]=null}N++}return D}async checkConditions(I){for(let O=0;O<this.conditions.length;O++)if(!await this.conditions[O](I))return!1;return!0}}const o=[];n instanceof Map?n.forEach((T,I)=>{o.push(new a(I,T))}):Object.keys(n).forEach(T=>{o.push(new a(T,n[T]))});let l=null,f=null,u={};const m=Nn();async function d(T,I){await Cc(),m(T,I)}let y=null,$=null;i&&($=T=>{T.state&&(T.state.__svelte_spa_router_scrollY||T.state.__svelte_spa_router_scrollX)?y=T.state:y=null},window.addEventListener("popstate",$),xc(()=>{Du(y)}));let _=null,P=null;const k=ia.subscribe(async T=>{_=T;let I=0;for(;I<o.length;){const O=o[I].match(T.location);if(!O){I++;continue}const D={route:o[I].path,location:T.location,querystring:T.querystring,userData:o[I].userData,params:O&&typeof O=="object"&&Object.keys(O).length?O:null};if(!await o[I].checkConditions(D)){e(0,l=null),P=null,d("conditionsFailed",D);return}d("routeLoading",Object.assign({},D));const N=o[I].component;if(P!=N){N.loading?(e(0,l=N.loading),P=N,e(1,f=N.loadingParams),e(2,u={}),d("routeLoaded",Object.assign({},D,{component:l,name:l.name,params:f}))):(e(0,l=null),P=null);const F=await N();if(T!=_)return;e(0,l=F&&F.default||F),P=N}O&&typeof O=="object"&&Object.keys(O).length?e(1,f=O):e(1,f=null),e(2,u=o[I].props),d("routeLoaded",Object.assign({},D,{component:l,name:l.name,params:f})).then(()=>{Ja.set(f)});return}e(0,l=null),P=null,Ja.set(void 0)});kc(()=>{k(),$&&window.removeEventListener("popstate",$)});function E(T){mi.call(this,r,T)}function L(T){mi.call(this,r,T)}return r.$$set=T=>{"routes"in T&&e(3,n=T.routes),"prefix"in T&&e(4,s=T.prefix),"restoreScrollState"in T&&e(5,i=T.restoreScrollState)},r.$$.update=()=>{r.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[l,f,u,n,s,i,E,L]}class Nu extends dt{constructor(t){super(),pt(this,t,Mu,Ou,mt,{routes:3,prefix:4,restoreScrollState:5})}}function eo(r,t,e){const n=r.slice();return n[6]=t[e],n}function to(r,t,e){const n=r.slice();return n[10]=t[e],n}function ro(r){let t,e,n,s,i={ctx:r,current:null,token:null,hasCatch:!1,pending:zu,then:Ku,catch:Fu,value:9};vr(e=r[1],i);let a={ctx:r,current:null,token:null,hasCatch:!1,pending:Wu,then:qu,catch:Vu,value:5};return vr(s=r[2],a),{c(){t=Q("div"),i.block.c(),n=je(),a.block.c(),this.h()},l(o){t=J(o,"DIV",{class:!0});var l=W(t);i.block.l(l),n=Ie(l),a.block.l(l),l.forEach(j),this.h()},h(){S(t,"class","shadow-lg rounded absolute top-20 p-6 bg-white max-w-lg")},m(o,l){Y(o,t,l),i.block.m(t,i.anchor=null),i.mount=()=>t,i.anchor=n,z(t,n),a.block.m(t,a.anchor=null),a.mount=()=>t,a.anchor=null},p(o,l){r=o,i.ctx=r,l&2&&e!==(e=r[1])&&vr(e,i)||Cn(i,r,l),a.ctx=r,l&4&&s!==(s=r[2])&&vr(s,a)||Cn(a,r,l)},d(o){o&&j(t),i.block.d(),i.token=null,i=null,a.block.d(),a.token=null,a=null}}}function Fu(r){return{c:U,l:U,m:U,p:U,d:U}}function Ku(r){let t,e,n="Songs",s;function i(l,f){return l[9]&&l[9].length>0?Bu:Ru}let a=i(r),o=a(r);return{c(){t=Q("div"),e=Q("h3"),e.textContent=n,s=je(),o.c(),this.h()},l(l){t=J(l,"DIV",{});var f=W(t);e=J(f,"H3",{class:!0,["data-svelte-h"]:!0}),ir(e)!=="svelte-1e8sglw"&&(e.textContent=n),s=Ie(f),o.l(f),f.forEach(j),this.h()},h(){S(e,"class","text-md font-bold my-4")},m(l,f){Y(l,t,f),z(t,e),z(t,s),o.m(t,null)},p(l,f){a===(a=i(l))&&o?o.p(l,f):(o.d(1),o=a(l),o&&(o.c(),o.m(t,null)))},d(l){l&&j(t),o.d()}}}function Ru(r){let t,e,n,s;return{c(){t=Q("span"),e=pe('No song title starting with "'),n=pe(r[0]),s=pe('"'),this.h()},l(i){t=J(i,"SPAN",{class:!0});var a=W(t);e=be(a,'No song title starting with "'),n=be(a,r[0]),s=be(a,'"'),a.forEach(j),this.h()},h(){S(t,"class","text-gray-400")},m(i,a){Y(i,t,a),z(t,e),z(t,n),z(t,s)},p(i,a){a&1&&Ze(n,i[0])},d(i){i&&j(t)}}}function Bu(r){let t,e=Ge(r[9]),n=[];for(let s=0;s<e.length;s+=1)n[s]=no(to(r,e,s));return{c(){t=Q("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=J(s,"DIV",{class:!0});var i=W(t);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(j),this.h()},h(){S(t,"class","flex flex-col")},m(s,i){Y(s,t,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,i){if(i&10){e=Ge(s[9]);let a;for(a=0;a<e.length;a+=1){const o=to(s,e,a);n[a]?n[a].p(o,i):(n[a]=no(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=e.length}},d(s){s&&j(t),Wt(n,s)}}}function no(r){let t,e=r[10].title+"",n,s,i,a,o,l=r[10].artists.join(", ")+"",f,u,m,d,y;return{c(){t=Q("a"),n=pe(e),s=je(),i=Q("br"),a=pe(`
            (`),o=Q("span"),f=pe(l),u=pe(`)
            `),this.h()},l($){t=J($,"A",{href:!0,class:!0});var _=W(t);n=be(_,e),s=Ie(_),i=J(_,"BR",{}),a=be(_,`
            (`),o=J(_,"SPAN",{class:!0});var P=W(o);f=be(P,l),P.forEach(j),u=be(_,`)
            `),_.forEach(j),this.h()},h(){S(o,"class","text-letkwet-600"),S(t,"href",m=`#/song/${r[10].key}`),S(t,"class","border-t-2 py-4")},m($,_){Y($,t,_),z(t,n),z(t,s),z(t,i),z(t,a),z(t,o),z(o,f),z(t,u),d||(y=Ue(t,"click",r[3]),d=!0)},p($,_){_&2&&e!==(e=$[10].title+"")&&Ze(n,e),_&2&&l!==(l=$[10].artists.join(", ")+"")&&Ze(f,l),_&2&&m!==(m=`#/song/${$[10].key}`)&&S(t,"href",m)},d($){$&&j(t),d=!1,y()}}}function zu(r){return{c:U,l:U,m:U,p:U,d:U}}function Vu(r){return{c:U,l:U,m:U,p:U,d:U}}function qu(r){let t,e,n="Artists",s;function i(l,f){return l[5]&&l[5].length>0?Gu:Uu}let a=i(r),o=a(r);return{c(){t=Q("div"),e=Q("h3"),e.textContent=n,s=je(),o.c(),this.h()},l(l){t=J(l,"DIV",{});var f=W(t);e=J(f,"H3",{class:!0,["data-svelte-h"]:!0}),ir(e)!=="svelte-1s8qj2i"&&(e.textContent=n),s=Ie(f),o.l(f),f.forEach(j),this.h()},h(){S(e,"class","text-md font-bold my-4")},m(l,f){Y(l,t,f),z(t,e),z(t,s),o.m(t,null)},p(l,f){a===(a=i(l))&&o?o.p(l,f):(o.d(1),o=a(l),o&&(o.c(),o.m(t,null)))},d(l){l&&j(t),o.d()}}}function Uu(r){let t,e,n,s;return{c(){t=Q("span"),e=pe('No artist name starting with "'),n=pe(r[0]),s=pe('"'),this.h()},l(i){t=J(i,"SPAN",{class:!0});var a=W(t);e=be(a,'No artist name starting with "'),n=be(a,r[0]),s=be(a,'"'),a.forEach(j),this.h()},h(){S(t,"class","text-gray-400")},m(i,a){Y(i,t,a),z(t,e),z(t,n),z(t,s)},p(i,a){a&1&&Ze(n,i[0])},d(i){i&&j(t)}}}function Gu(r){let t,e=Ge(r[5]),n=[];for(let s=0;s<e.length;s+=1)n[s]=so(eo(r,e,s));return{c(){t=Q("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=J(s,"DIV",{class:!0});var i=W(t);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(j),this.h()},h(){S(t,"class","flex flex-col")},m(s,i){Y(s,t,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,i){if(i&12){e=Ge(s[5]);let a;for(a=0;a<e.length;a+=1){const o=eo(s,e,a);n[a]?n[a].p(o,i):(n[a]=so(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=e.length}},d(s){s&&j(t),Wt(n,s)}}}function so(r){let t,e=r[6]+"",n,s,i,a,o;return{c(){t=Q("a"),n=pe(e),s=je(),this.h()},l(l){t=J(l,"A",{href:!0,class:!0});var f=W(t);n=be(f,e),s=Ie(f),f.forEach(j),this.h()},h(){S(t,"href",i=`#/artist/${r[6]}`),S(t,"class","border-t-2 py-4")},m(l,f){Y(l,t,f),z(t,n),z(t,s),a||(o=Ue(t,"click",r[3]),a=!0)},p(l,f){f&4&&e!==(e=l[6]+"")&&Ze(n,e),f&4&&i!==(i=`#/artist/${l[6]}`)&&S(t,"href",i)},d(l){l&&j(t),a=!1,o()}}}function Wu(r){return{c:U,l:U,m:U,p:U,d:U}}function Hu(r){let t,e=r[1]!=null&&r[2]!=null&&ro(r);return{c(){e&&e.c(),t=$e()},l(n){e&&e.l(n),t=$e()},m(n,s){e&&e.m(n,s),Y(n,t,s)},p(n,[s]){n[1]!=null&&n[2]!=null?e?e.p(n,s):(e=ro(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:U,o:U,d(n){n&&j(t),e&&e.d(n)}}}function Yu(r,t,e){let{query:n}=t;const s=Nn();function i(){s("selected")}let a=null,o=null;return r.$$set=l=>{"query"in l&&e(0,n=l.query)},r.$$.update=()=>{r.$$.dirty&1&&(n.length>=3?(e(1,a=Cr.songs.where("title").startsWithIgnoreCase(n).limit(10).toArray()),e(2,o=Cr.songs.where("artists").startsWithIgnoreCase(n).toArray().then(l=>Object.keys(l.reduce((f,u)=>(u.artists.forEach(m=>f[m]=m),f),{}))))):(e(1,a=null),e(2,o=null)))},[n,a,o,i]}class Xu extends dt{constructor(t){super(),pt(this,t,Yu,Hu,mt,{query:0})}}function oi(r,t,e){return e=e||" ",r.length>t?r:(t-=r.length,e+=e.repeat(t),r+e.slice(0,t))}class Wr extends Error{static buildMessage(t,e){function n(f){return f.charCodeAt(0).toString(16).toUpperCase()}function s(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,u=>"\\x0"+n(u)).replace(/[\x10-\x1F\x7F-\x9F]/g,u=>"\\x"+n(u))}function i(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,u=>"\\x0"+n(u)).replace(/[\x10-\x1F\x7F-\x9F]/g,u=>"\\x"+n(u))}function a(f){switch(f.type){case"literal":return'"'+s(f.text)+'"';case"class":const u=f.parts.map(m=>Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m));return"["+(f.inverted?"^":"")+u+"]";case"any":return"any character";case"end":return"end of input";case"other":return f.description}}function o(f){const u=f.map(a);let m,d;if(u.sort(),u.length>0){for(m=1,d=1;m<u.length;m++)u[m-1]!==u[m]&&(u[d]=u[m],d++);u.length=d}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function l(f){return f?'"'+s(f)+'"':"end of input"}return"Expected "+o(t)+" but "+l(e)+" found."}constructor(t,e,n,s){super(),this.message=t,this.expected=e,this.found=n,this.location=s,this.name="PeggySyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,Wr.prototype):this.__proto__=Wr.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Wr)}format(t){let e="Error: "+this.message;if(this.location){let n=null,s;for(s=0;s<t.length;s++)if(t[s].grammarSource===this.location.source){n=t[s].text.split(/\r\n|\n|\r/g);break}let i=this.location.start,a=this.location.source+":"+i.line+":"+i.column;if(n){let o=this.location.end,l=oi("",i.line.toString().length," "),f=n[i.line-1],u=i.line===o.line?o.column:f.length+1;e+=`
 --> `+a+`
`+l+` |
`+i.line+" | "+f+`
`+l+" | "+oi("",i.column-1," ")+oi("",u-i.column,"^")}else e+=`
 at `+a}return e}}function Zu(r,t){t=t!==void 0?t:{};const e={},n=t.grammarSource,s={Chord:mr};let i=mr;const a=function(w){return{type:"chord",...w,column:jr().start.column}},o="#",l=Ne("#",!1),f="b",u=Ne("b",!1),m=/^[a-zA-Z0-9()#+]/,d=ur([["a","z"],["A","Z"],["0","9"],"(",")","#","+"],!1,!1),y=function(w,R,M,te){return{base:w,modifier:R,suffix:M,...te,chordType:"symbol"}},$=/^[A-Ga-g]/,_=ur([["A","G"],["a","g"]],!1,!1),P="/",k=Ne("/",!1),E=function(w,R){return{bassBase:w,bassModifier:R}},L=function(w,R,M,te){return{base:R,modifier:w,suffix:M,...te,chordType:"numeral"}},T="III",I=Ne("III",!1),O="iii",D=Ne("iii",!1),N="VII",F=Ne("VII",!1),V="vii",q=Ne("vii",!1),H="II",me=Ne("II",!1),ce="ii",_e=Ne("ii",!1),Ee="IV",xe=Ne("IV",!1),ie="iv",Fe=Ne("iv",!1),Ke="VI",De=Ne("VI",!1),tt="vi",gt=Ne("vi",!1),Tt="I",ue=Ne("I",!1),Se="i",We=Ne("i",!1),jt="V",bt=Ne("V",!1),Ht="v",Yt=Ne("v",!1),xt=function(w,R){return{bassBase:R,bassModifier:w}},rt=function(w,R,M,te){return{base:R,modifier:w,suffix:M,...te,chordType:"numeric"}},yt=/^[1-7]/,Xt=ur([["1","7"]],!1,!1);let K=0,it=0;const It=[{line:1,column:1}];let nt=0,cr=[],Lt;if(t.startRule!==void 0){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function jr(){return hr(it,K)}function Ne(w,R){return{type:"literal",text:w,ignoreCase:R}}function ur(w,R,M){return{type:"class",parts:w,inverted:R,ignoreCase:M}}function Ir(){return{type:"end"}}function fr(w){let R=It[w],M;if(R)return R;for(M=w-1;!It[M];)M--;for(R=It[M],R={line:R.line,column:R.column};M<w;)r.charCodeAt(M)===10?(R.line++,R.column=1):R.column++,M++;return It[w]=R,R}function hr(w,R){const M=fr(w),te=fr(R);return{source:n,start:{offset:w,line:M.line,column:M.column},end:{offset:R,line:te.line,column:te.column}}}function ke(w){K<nt||(K>nt&&(nt=K,cr=[]),cr.push(w))}function sn(w,R,M){return new Wr(Wr.buildMessage(w,R),w,R,M)}function mr(){let w,R;return w=K,R=on(),R===e&&(R=v(),R===e&&(R=dr())),R!==e&&(it=w,R=a(R)),w=R,w}function vt(){let w;return r.charCodeAt(K)===35?(w=o,K++):(w=e,ke(l)),w===e&&(r.charCodeAt(K)===98?(w=f,K++):(w=e,ke(u))),w}function Zt(){let w,R;for(w=[],m.test(r.charAt(K))?(R=r.charAt(K),K++):(R=e,ke(d));R!==e;)w.push(R),m.test(r.charAt(K))?(R=r.charAt(K),K++):(R=e,ke(d));return w}function dr(){let w,R,M,te,ye;return w=K,R=pr(),R!==e?(M=vt(),M===e&&(M=null),M!==e?(te=K,ye=Zt(),ye!==e?te=r.substring(te,K):te=ye,te!==e?(ye=an(),ye===e&&(ye=null),ye!==e?(it=w,R=y(R,M,te,ye),w=R):(K=w,w=e)):(K=w,w=e)):(K=w,w=e)):(K=w,w=e),w}function pr(){let w;return $.test(r.charAt(K))?(w=r.charAt(K),K++):(w=e,ke(_)),w}function an(){let w,R,M,te;return w=K,r.charCodeAt(K)===47?(R=P,K++):(R=e,ke(k)),R!==e?(M=pr(),M!==e?(te=vt(),te===e&&(te=null),te!==e?(it=w,R=E(M,te),w=R):(K=w,w=e)):(K=w,w=e)):(K=w,w=e),w}function on(){let w,R,M,te,ye;return w=K,R=vt(),R===e&&(R=null),R!==e?(M=Lr(),M!==e?(te=K,ye=Zt(),ye!==e?te=r.substring(te,K):te=ye,te!==e?(ye=ln(),ye===e&&(ye=null),ye!==e?(it=w,R=L(R,M,te,ye),w=R):(K=w,w=e)):(K=w,w=e)):(K=w,w=e)):(K=w,w=e),w}function Lr(){let w;return r.substr(K,3)===T?(w=T,K+=3):(w=e,ke(I)),w===e&&(r.substr(K,3)===O?(w=O,K+=3):(w=e,ke(D)),w===e&&(r.substr(K,3)===N?(w=N,K+=3):(w=e,ke(F)),w===e&&(r.substr(K,3)===V?(w=V,K+=3):(w=e,ke(q)),w===e&&(r.substr(K,2)===H?(w=H,K+=2):(w=e,ke(me)),w===e&&(r.substr(K,2)===ce?(w=ce,K+=2):(w=e,ke(_e)),w===e&&(r.substr(K,2)===Ee?(w=Ee,K+=2):(w=e,ke(xe)),w===e&&(r.substr(K,2)===ie?(w=ie,K+=2):(w=e,ke(Fe)),w===e&&(r.substr(K,2)===Ke?(w=Ke,K+=2):(w=e,ke(De)),w===e&&(r.substr(K,2)===tt?(w=tt,K+=2):(w=e,ke(gt)),w===e&&(r.charCodeAt(K)===73?(w=Tt,K++):(w=e,ke(ue)),w===e&&(r.charCodeAt(K)===105?(w=Se,K++):(w=e,ke(We)),w===e&&(r.charCodeAt(K)===86?(w=jt,K++):(w=e,ke(bt)),w===e&&(r.charCodeAt(K)===118?(w=Ht,K++):(w=e,ke(Yt))))))))))))))),w}function ln(){let w,R,M,te;return w=K,r.charCodeAt(K)===47?(R=P,K++):(R=e,ke(k)),R!==e?(M=vt(),M===e&&(M=null),M!==e?(te=Lr(),te!==e?(it=w,R=xt(M,te),w=R):(K=w,w=e)):(K=w,w=e)):(K=w,w=e),w}function v(){let w,R,M,te,ye;return w=K,R=vt(),R===e&&(R=null),R!==e?(M=fe(),M!==e?(te=K,ye=Zt(),ye!==e?te=r.substring(te,K):te=ye,te!==e?(ye=Ot(),ye===e&&(ye=null),ye!==e?(it=w,R=rt(R,M,te,ye),w=R):(K=w,w=e)):(K=w,w=e)):(K=w,w=e)):(K=w,w=e),w}function fe(){let w;return yt.test(r.charAt(K))?(w=r.charAt(K),K++):(w=e,ke(Xt)),w}function Ot(){let w,R,M,te;return w=K,r.charCodeAt(K)===47?(R=P,K++):(R=e,ke(k)),R!==e?(M=vt(),M===e&&(M=null),M!==e?(te=fe(),te!==e?(it=w,R=xt(M,te),w=R):(K=w,w=e)):(K=w,w=e)):(K=w,w=e),w}if(Lt=i(),Lt!==e&&K===r.length)return Lt;throw Lt!==e&&K<r.length&&ke(Ir()),sn(cr,nt<r.length?r.charAt(nt):null,nt<r.length?hr(nt,nt+1):hr(nt,nt))}const Qu=Zu,Pr="verse",nr="chorus",sr="none",aa="indeterminate",Ki="tab",Hr="symbol",Yr="numeric",$r="numeral",Ri=["I","II","III","IV","V","VI","VII"],Ju="A".charCodeAt(0),ef="G".charCodeAt(0),io={1:0,2:2,3:4,4:5,5:7,6:9,7:11},ao={1:0,2:2,3:3,4:5,5:7,6:8,7:11};function tf(r){return r.toUpperCase().charCodeAt(0)}function oo(r,t,e){let n=r;return n<t?n+=7:n>e&&(n-=7),n}function rf(r){for(let t=0,e=Ri.length;t<e;t+=1){const n=Ri[t];if(n===r||n.toLowerCase()===r)return t+1}return null}function nf(r){return Ri[r-1]}class zr{constructor({note:t,type:e,minor:n=!1}){X(this,"minor",!1);this._note=t,this.type=e,this.minor=n}static parse(t){const e=t.toString();if(/^[A-Ga-g]$/.test(e))return new zr({note:e.toUpperCase(),type:Hr});if(/^[1-7]$/.test(e))return new zr({note:parseInt(e,10),type:Yr});const n=rf(e);if(n)return new zr({note:n,type:$r,minor:e.toLowerCase()===t});throw new Error(`Invalid note ${t}`)}toNumeral(){if(this.isNumeral())return this.clone();if(this.isNumeric())return this.set({type:$r});throw new Error(`Converting a ${this.type} note to numeral is not supported`)}toNumeric(){if(this.isNumeric())return this.clone();if(this.isNumeral())return this.set({type:Yr});throw new Error(`Converting a ${this.type} note to numeric is not supported`)}isMinor(){return this.minor}equals(t){return this._note===t._note&&this.type===t.type&&this.minor===t.minor}clone(){return this.set({})}up(){return this.change(1)}down(){return this.change(-1)}isOneOf(...t){return t.includes(this._note)}isNumeric(){return this.is(Yr)}isChordSymbol(){return this.is(Hr)}isNumeral(){return this.is($r)}is(t){return this.type===t}getTransposeDistance(t){if(typeof this._note=="number"){if(t&&this._note in ao)return ao[this._note];if(this._note in io)return io[this._note]}return 0}change(t){if(this.isChordSymbol()){let n;return n=tf(this._note),n+=t,n=oo(n,Ju,ef),this.set({note:String.fromCharCode(n)})}let e=oo(this._note+t,1,7);return e<1?e+=7:e>7&&(e-=7),this.set({note:e})}get note(){if(this.isNumeral()){const t=nf(this._note);return this.isMinor()?t.toLowerCase():t}return this._note}toString(){const t=this.note;switch(this.type){case $r:return`${this.minor?t.toLowerCase():t.toUpperCase()}`;default:return`${this.note}`}}set(t){return new zr({note:this._note,type:this.type,minor:this.minor,...t})}}var lo=zr;const sf={Ab:{B:"Cb"},Cb:{B:"Cb","A#":"Bb",E:"Fb"},C:{"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},"C#":{Eb:"D#",Bb:"A#"},Db:{B:"Cb","F#":"Gb"},D:{"D#":"Eb","A#":"Bb",Gb:"F#"},Eb:{"D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},E:{Ab:"G#","A#":"Bb","D#":"Eb",Db:"C#",Eb:"D#"},F:{"A#":"Bb","F#":"Gb","C#":"Db","D#":"Eb","G#":"Ab"},"F#":{Bb:"A#",Eb:"D#"},Gb:{"A#":"Bb","D#":"Eb","G#":"Ab",B:"Cb",E:"Fb"},G:{"A#":"Bb","D#":"Eb","G#":"Ab","C#":"Db"},"G#":{"A#":"Bb","D#":"Eb",Cb:"B#"},Am:{Gb:"G","G#":"Ab","F#":"Gb","C#":"Db","D#":"Eb","A#":"Bb"},Bbm:{Cb:"B",Gb:"F#"},Bm:{"A#":"Bb","D#":"Eb"},"C#m":{"A#":"Bb","D#":"Eb",Gb:"F#"},Cm:{"G#":"Ab","A#":"Bb","D#":"Eb","F#":"Gb","C#":"Db"},Dm:{"A#":"Bb","D#":"Eb","F#":"Gb","G#":"Ab","C#":"Db"},Em:{"A#":"Bb","D#":"Eb","C#":"Db"},"F#m":{"A#":"Bb","D#":"Eb",Gb:"F#",Ab:"G#",Db:"C#"},Fm:{"G#":"Ab","A#":"Bb","D#":"Eb","F#":"Gb","C#":"Db"},Gm:{"G#":"Ab","A#":"Bb","D#":"Eb","C#":"Db","F#":"Gb"},"G#m":{"A#":"Bb","D#":"Eb"},B:{Eb:"D#"}};var af=sf;const Cl=r=>r.items.some(t=>t instanceof Je&&!!t.chords),oa=r=>"evaluate"in r&&typeof r.evaluate=="function",co=(r,t)=>{let e=r;for(let n=r.length;n<t;n+=1,e+=" ");return e};function of(r){return r.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function lf(r,t=""){return Object.entries(r).map(([e,n])=>{const s=Object.entries(n).map(([a,o])=>`${of(a)}: ${o};`).join(`
  `);return`
${`${t} ${e}`.trim()} {
  ${s}
}`.substring(1)}).join(`

`)}function Sl(r){try{throw new Error(`DEPRECATION: ${r}`)}catch(t){const e=t,n=globalThis.process;typeof n=="object"&&typeof n.emitWarning=="function"?n.emitWarning(`${r}
${e.stack}`):console.warn(`${r}
${e.stack}`)}}function uo(r){throw new Error(`BREAKING CHANGE: ${r}`)}function Rs(r){return r==null||r===""}function cf(r){return typeof r!="string"?!1:r[0]==="m"&&r.substring(0,3).toLowerCase()!=="maj"}function Al(r){return r.replace(/\r\n?/g,`
`)}const Nt="b",Ft="#",uf=/^(?<note>[A-G])(?<modifier>#|b)?(?<minor>m)?$/i,ff=/^(?<modifier>#|b)?(?<note>[1-7])(?<minor>m)?$/,hf=/^(?<modifier>#|b)?(?<note>I{1,3}|IV|VI{0,2}|i{1,3}|iv|vi{0,2})$/,fo=[uf,ff,hf];function mf(r){switch(r){case Ft:return 1;case Nt:return-1;default:return 0}}class St{constructor({note:t,modifier:e=null,minor:n=!1}){X(this,"modifier",null);X(this,"minor",!1);this.note=t instanceof lo?t:lo.parse(t),this.modifier=e||null,this.minor=n||!1,this.minor&&(this.note.minor=!0)}get unicodeModifier(){switch(this.modifier){case Nt:return"♭";case Ft:return"♯";default:return null}}static parse(t){if(!t||Rs(t))return null;for(let e=0,n=fo.length;e<n;e+=1){const s=t.match(fo[e]);if(s){const{note:i,modifier:a,minor:o}=s.groups;return new St({note:i,modifier:a,minor:!!o})}}return null}static parseOrFail(t){const e=this.parse(t);if(!e)throw new Error(`Failed to parse ${t}`);return e}static wrap(t){return t instanceof St?t:this.parse(t)}static wrapOrFail(t=null){if(t===null)throw new Error("Unexpected null key");const e=this.wrap(t);if(e===null)throw new Error(`Failed: invalid key ${t}`);return e}static toString(t){return`${St.wrapOrFail(t)}`}static distance(t,e){return this.wrapOrFail(t).distanceTo(e)}distanceTo(t){const e=St.wrapOrFail(t);let n=this.useModifier(e.modifier),s=0;for(;!n.equals(e)&&s<20;)n=n.transposeUp().useModifier(e.modifier),s+=1;return s}isMinor(){return this.minor||this.note.isMinor()}clone(){return this.set({})}toChordSymbol(t){if(this.is(Hr))return this.clone();const e=this.note.getTransposeDistance(t.minor)+mf(this.modifier);return t.transpose(e).normalize().useModifier(t.modifier)}toChordSymbolString(t){return this.toChordSymbol(t).toString()}is(t){return this.note.is(t)}isNumeric(){return this.is(Yr)}isChordSymbol(){return this.is(Hr)}isNumeral(){return this.is($r)}equals(t){return this.note.equals(t.note)&&this.modifier===t.modifier}toNumeric(t=null){if(this.isNumeric())return this.clone();if(this.isNumeral())return this.set({note:this.note.toNumeric()});if(!t)throw new Error("key is required");return this.transposeNoteUpToKey(1,t)}toNumericString(t=null){return this.toNumeric(t).toString()}toNumeral(t=null){return this.isNumeral()?this.clone():this.isNumeric()?this.set({note:this.note.toNumeral()}):t?this.transposeNoteUpToKey("I",t):this.clone()}toNumeralString(t=null){return this.toNumeral(t).toString()}toString({showMinor:t=!0,useUnicodeModifier:e=!1}={}){switch(this.note.type){case Hr:return this.formatChordSymbolString(t,e);case Yr:return this.formatNumericString(t);case $r:return this.formatNumeralString();default:throw new Error(`Unexpected note type ${this.note.type}`)}}formatChordSymbolString(t,e){const n=e?this.unicodeModifier:this.modifier;return`${this.note}${n||""}${this.minor&&t?"m":""}`}formatNumericString(t){return`${this.modifier||""}${this.note}${this.minor&&t?"m":""}`}formatNumeralString(){return`${this.modifier||""}${this.note}`}transpose(t){if(t===0)return this;const e=this.modifier;let n=this.clone();const s=t<0?"transposeDown":"transposeUp";for(let i=0,a=Math.abs(t);i<a;i+=1)n=n[s]();return n.useModifier(e)}transposeUp(){return this.modifier===Nt?this.set({modifier:null}):this.note.isOneOf(3,7,"E","B")?this.set({note:this.note.up()}):this.modifier===Ft?this.set({note:this.note.up(),modifier:null}):this.set({modifier:Ft})}transposeDown(){return this.modifier===Ft?this.set({modifier:null}):this.note.isOneOf(1,4,"C","F")?this.set({note:this.note.down()}):this.modifier===Nt?this.set({note:this.note.down(),modifier:null}):this.set({modifier:Nt})}useModifier(t){return this.modifier===Nt&&t===Ft?this.set({note:this.note.down(),modifier:Ft}):this.modifier===Ft&&t===Nt?this.set({note:this.note.up(),modifier:Nt}):this.clone()}normalize(){return this.modifier===Ft&&this.note.isOneOf(3,7,"E","B")?this.set({note:this.note.up(),modifier:null}):this.modifier===Nt&&this.note.isOneOf(1,4,"C","F")?this.set({note:this.note.down(),modifier:null}):this.clone()}removeMinor(){return this.set({minor:!1})}normalizeEnharmonics(t){if(t){const e=St.wrapOrFail(t).toString({showMinor:!0}),n=af[e],s=this.toString({showMinor:!1});if(n&&n[s])return St.parseOrFail(n[s])}return this.clone()}set(t){return new St({note:this.note.clone(),modifier:this.modifier,minor:this.minor,...t})}transposeNoteUpToKey(t,e){let n=new St({note:t}),s=e.clone();const i=this.clone().normalize().useModifier(e.modifier).normalizeEnharmonics(e);for(;!s.equals(i);)n=n.transposeUp().useModifier(e.modifier),s=s.transposeUp().normalize().useModifier(e.modifier).normalizeEnharmonics(e);return n}}var $t=St;const df={2:"2",4:"sus",5:"5",6:"6",7:"7",9:"9",11:"11",13:"13",42:"4(2)",69:"6(9)","(#4)":"(#4)","#4":"(#4)","+4":"(#4)","(+4)":"(#4)","(11)":"(11)",add11:"(11)","(add11)":"(11)","(13)":"(13)",add13:"(13)","(add13)":"(13)","(2)":"(2)",add2:"(2)","(add2)":"(2)","(4)":"(4)",add4:"(4)","(add4)":"(4)","sus(4)":"(4)","(6)":"(6)",add6:"(6)","(add6)":"(6)","(7)":"(7)","(9)":"(9)",add9:"(9)","(add9)":"(9)","(b5)":"(b5)","-5":"(b5)","(-5)":"(b5)",b5:"(b5)","2(6)":"2(6)","(b6)":"(b6)","(unis)":"(unis)",unis:"(unis)","[blank]":"[blank]",maj:"[blank]",major:"[blank]",M:"[blank]",ma:"[blank]",Ma:"[blank]",Majj:"[blank]","+":"+",aug:"+","(#5)":"+","#5":"+","+5":"+","(+5)":"+",x:"+",dom11:"11","dom 11":"11","11(#5)":"11(#5)","11#5":"11(#5)","11+5":"11(#5)","11(+5)":"11(#5)","11(#9)":"11(#9)","11#9":"11(#9)","11+9":"11(#9)","11(+9)":"11(#9)","11(b13)":"11(b13)","11b13":"11(b13)","11-13":"11(b13)","11(-13)":"11(b13)","11(b5)":"11(b5)","11b5":"11(b5)","11-5":"11(b5)","11(-5)":"11(b5)","11(b9)":"11(b9)","11b9":"11(b9)","11-9":"11(b9)","11(-9)":"11(b9)","11sus4":"11sus4","11sus":"11sus4",m11sus4:"11sus4",m11sus:"11sus4",dom13:"13","dom 13":"13","13(#11)":"13(#11)","13#11":"13(#11)","13+11":"13(#11)","13(+11)":"13(#11)","13(#5)":"13(#5)","13#5":"13(#5)","13+5":"13(#5)","13(+5)":"13(#5)","13(#9)":"13(#9)","13#9":"13(#9)","13(+9)":"13(#9)","13+9":"13(#9)","13(#9#5)":"13(#9#5)","13#9#5":"13(#9#5)","13(+9+5)":"13(#9#5)","13+9+5":"13(#9#5)","13(#9b5)":"13(#9b5)","13#9b5":"13(#9b5)","13(+9-5)":"13(#9b5)","13+9-5":"13(#9b5)","13(add4)":"13(add4)","13(b5)":"13(b5)","13b5":"13(b5)","13-5":"13(b5)","13(-5)":"13(b5)","13(b9)":"13(b9)","13b9":"13(b9)","13-9":"13(b9)","13(-9)":"13(b9)","13(b9#5)":"13(b9#5)","13b9#5":"13(b9#5)","13-9+5":"13(b9#5)","13(-9+5)":"13(b9#5)","13(b9b5)":"13(b9b5)","13b9b5":"13(b9b5)","13-9-5":"13(b9b5)","13(-9-5)":"13(b9b5)","13sus4":"13sus4","13sus":"13sus4",m13sus4:"13sus4",m13sus:"13sus4",sus2:"2","add9(no3)":"2","2(#11)":"2(#11)","2(#4)":"2(#4)","2+4":"2(#4)","2#4":"2(#4)","2(+4)":"2(#4)","(#4)2":"2(#4)","2(#4)(#42)(2#4)":"2(#4)(#42)(2#4)","2(+7)":"2(+7)","2(4)":"2(4)","sus2(4)":"2(4)","2(ma7)":"2(ma7)","2(no3)":"2(no3)","4(2)":"4(2)",sus42:"4(2)",no3:"5","(no3)":"5","(no 3)":"5","(no 3rd)":"5","5(no3)":"5","6(2)":"6(2)","6(b9)":"6(b9)","6(no3)":"6(no3)","6(9)":"6(9)","6(add9)":"6(9)",dom7:"7","dom 7":"7","dom 7th":"7","7(#11)":"7(#11)","7#11":"7(#11)","7+11":"7(#11)","7(+11)":"7(#11)","7(#5)":"7(#5)",aug7:"7(#5)","7#5":"7(#5)","7+5":"7(#5)","7(+5)":"7(#5)",x7:"7(#5)","aug 7":"7(#5)","aug 7th":"7(#5)","7(#5#11)":"7(#5#11)","7#5#11":"7(#5#11)","7+5+11":"7(#5#11)","7(+5+11)":"7(#5#11)","7(#9)":"7(#9)","7#9":"7(#9)","7+9":"7(#9)","7(+9)":"7(#9)","7(#9#5)":"7(#9#5)","7(#5#9)":"7(#9#5)","7#5#9":"7(#9#5)","7+5+9":"7(#9#5)","7(+5+9)":"7(#9#5)","7(#9b13)":"7(#9b13)","7#9b13":"7(#9b13)","7(+9-13)":"7(#9b13)","7+9-13":"7(#9b13)","7(b13#9)":"7(#9b13)","7b13#9":"7(#9b13)","7-13+9":"7(#9b13)","7(-13+9)":"7(#9b13)","7(#9b5)":"7(#9b5)","7(6)":"7(6)","7(b13)":"7(b13)","7b13":"7(b13)","7-13":"7(b13)","7(-13)":"7(b13)","7(b5)":"7(b5)","7b5":"7(b5)","7-5":"7(b5)","7(-5)":"7(b5)","7(b5#11)":"7(b5#11)","7b5#11":"7(b5#11)","7-5+11":"7(b5#11)","7(-5+11)":"7(b5#11)","7(b5#9)":"7(b5#9)","7b5#9":"7(b5#9)","7-5+9":"7(b5#9)","7(-5+9)":"7(b5#9)","7(b5b9)":"7(b5b9)","7b5b9":"7(b5b9)","7-5-9":"7(b5b9)","7(-5-9)":"7(b5b9)","7(b9)":"7(b9)","7b9":"7(b9)","7-9":"7(b9)","7(-9)":"7(b9)","7(b9#5)":"7(b9#5)","7(#5b9)":"7(b9#5)","7#5b9":"7(b9#5)","7+5-9":"7(b9#5)","7(+5-9)":"7(b9#5)","7(b9b13)":"7(b9b13)","7b9b13":"7(b9b13)","7-9-13":"7(b9b13)","7(-9-13)":"7(b9b13)","7(b13b9)":"7(b9b13)","7b13b9":"7(b9b13)","7-13-9":"7(b9b13)","7(-13-9)":"7(b9b13)","7(b9b5)":"7(b9b5)","7(no3)":"7(no3)","7aug5":"7aug5","7b9sus4":"7b9sus4","7sus(6)":"7sus(6)","7sus(b9)":"7sus(b9)","7sus4":"7sus4","7sus":"7sus4",dom9:"9","dom 9":"9","9(#11)":"9(#11)","9#11":"9(#11)","9+11":"9(#11)","9(+11)":"9(#11)","9(#5)":"9(#5)","9#5":"9(#5)","9+5":"9(#5)","9(+5)":"9(#5)",aug9:"9(#5)",x9:"9(#5)","9(b13)":"9(b13)","9b13":"9(b13)","9-13":"9(b13)","9(-13)":"9(b13)","9(b5)":"9(b5)","9b5":"9(b5)","9-5":"9(b5)","9(-5)":"9(b5)","9aug":"9aug","9sus4":"9sus4","9sus":"9sus4",m9sus4:"9sus4",m9sus:"9sus4","b69(#11)":"b69(#11)",b69sus:"b69sus",b9sus:"b9sus",dim:"dim","m(b5)":"dim",mb5:"dim","m-5":"dim","m(-5)":"dim","-(b5)":"dim","-b5":"dim",dim7:"dim7",o7:"dim7","dim 7":"dim7","dim 7th":"dim7",m:"m",mi:"m",min:"m",minor:"m","-":"m","m(11)":"m(11)","m(add11)":"m(11)","m(4)":"m(4)","m(add4)":"m(4)","m(9)":"m(9)","m(add9)":"m(9)","m(ma7)":"m(ma7)","m(M7)":"m(ma7)","mi(maj7)":"m(ma7)","min(maj7)":"m(ma7)","m(maj7)":"m(ma7)","m(+7)":"m(ma7)","m+7":"m(ma7)","m(ma9)":"m(ma9)","m(M9)":"m(ma9)","mi(maj9)":"m(ma9)","min(maj9)":"m(ma9)","m(maj9)":"m(ma9)","m(+9)":"m(ma9)","m+9":"m(ma9)","m(no5)":"m(no5)",m11:"m11",mi11:"m11",min11:"m11","-11":"m11","m11(#5)":"m11(#5)","m11#5":"m11(#5)","m11+5":"m11(#5)","m11(+5)":"m11(#5)","-11(#5)":"m11(#5)","-11#5":"m11(#5)","m9+5":"m9(#5)","-11(+5)":"m11(#5)","m11(#9)":"m11(#9)","m11#9":"m11(#9)","m11+9":"m11(#9)","m11(+9)":"m11(#9)","-11(#9)":"m11(#9)","-11#9":"m11(#9)","-11+9":"m11(#9)","-11(+9)":"m11(#9)","m11(#9#5)":"m11(#9#5)","m11(#5#9)":"m11(#9#5)","m11#5#9":"m11(#9#5)","m11+5+9":"m11(#9#5)","m11(+5+9)":"m11(#9#5)","-11(#5#9)":"m11(#9#5)","-11#5#9":"m11(#9#5)","m9+5+9":"m11(#9#5)","-11(+5+9)":"m11(#9#5)","m11(#9b13)":"m11(#9b13)","m11#9b13":"m11(#9b13)","m11+9-13":"m11(#9b13)","m11(+9-13)":"m11(#9b13)","-11(#9b13)":"m11(#9b13)","-11#9b13":"m11(#9b13)","-11+9-13":"m11(#9b13)","-11(+9-13)":"m11(#9b13)","m11(b13)":"m11(b13)",m11b13:"m11(b13)","m11-13":"m11(b13)","m11(-13)":"m11(b13)","-11(b13)":"m11(b13)","-11b13":"m11(b13)","-11-13":"m11(b13)","-11(-13)":"m11(b13)","m11(b13#5)":"m11(b13#5)","m11(#5b13)":"m11(b13#5)","m11#5b13":"m11(b13#5)","m11+5-13":"m11(b13#5)","m11(+5-13)":"m11(b13#5)","-11(#5b13)":"m11(b13#5)","-11#5b13":"m11(b13#5)","-11+5-13":"m11(b13#5)","-11(+5-13)":"m11(b13#5)","m11(b5)":"m11(b5)",m11b5:"m11(b5)","m11-5":"m11(b5)","m11(-5)":"m11(b5)","-11(b5)":"m11(b5)","-11b5":"m11(b5)","-9-5":"m9(b5)","-11(-5)":"m11(b5)","m11(b5#9)":"m11(b5#9)","m11b5#9":"m11(b5#9)","m11-5+9":"m11(b5#9)","m11(-5+9)":"m11(b5#9)","-11(b5#9)":"m11(b5#9)","-11b5#9":"m11(b5#9)","-11-5+9":"m11(b5#9)","-11(-5+9)":"m11(b5#9)","m11(b5b13)":"m11(b5b13)",m11b5b13:"m11(b5b13)","m11(-5-13)":"m11(b5b13)","m11-5-13":"m11(b5b13)","-11(b5b13)":"m11(b5b13)","-11b5b13":"m11(b5b13)","-11(-5-13)":"m11(b5b13)","-11-5-13":"m11(b5b13)","m11(b5b9)":"m11(b5b9)",m11b5b9:"m11(b5b9)","m11-5-9":"m11(b5b9)","m11(-5-9)":"m11(b5b9)","-11(b5b9)":"m11(b5b9)","-11b5b9":"m11(b5b9)","-11-5-9":"m11(b5b9)","-11(-5-9)":"m11(b5b9)","m11(b9)":"m11(b9)",m11b9:"m11(b9)","m11(-9)":"m11(b9)","m11-9":"m11(b9)","-11(b9)":"m11(b9)","-11b9":"m11(b9)","-11(-9)":"m11(b9)","-11-9":"m11(b9)","m11(b9#5)":"m11(b9#5)","m11(#5b9)":"m11(b9#5)","m11#5b9":"m11(b9#5)","m11+5-9":"m11(b9#5)","m11(+5-9)":"m11(b9#5)","-11(#5b9)":"m11(b9#5)","-11#5b9":"m11(b9#5)","m9+5-9":"m11(b9#5)","-11(+5-9)":"m11(b9#5)","m11(b9b13)":"m11(b9b13)",m11b9b13:"m11(b9b13)","m11(-9-13)":"m11(b9b13)","m11-9-13":"m11(b9b13)","-11(b9b13)":"m11(b9b13)","-11b9b13":"m11(b9b13)","-11(-9-13)":"m11(b9b13)","-11-9-13":"m11(b9b13)",m13:"m13",mi13:"m13",min13:"m13","-13":"m13","m13(#11)":"m13(#11)","m13#11":"m13(#11)","m13+11":"m13(#11)","m13(+11)":"m13(#11)","-13(#11)":"m13(#11)","-13#11":"m13(#11)","-13+11":"m13(#11)","-13(+11)":"m13(#11)","m13(#5)":"m13(#5)","m13#5":"m13(#5)","m13+5":"m13(#5)","m13(+5)":"m13(#5)","-13(#5)":"m13(#5)","-13#5":"m13(#5)","-13(+5)":"m13(#5)","m13(#9)":"m13(#9)","m13#9":"m13(#9)","m13(+9)":"m13(#9)","m13+9":"m13(#9)","-13(#9)":"m13(#9)","-13#9":"m13(#9)","-13(+9)":"m13(#9)","-13+9":"m13(#9)","m13(b5)":"m13(b5)",m13b5:"m13(b5)","m13-5":"m13(b5)","m13(-5)":"m13(b5)","-13(b5)":"m13(b5)","-13b5":"m13(b5)","-13-5":"m13(b5)","-13(-5)":"m13(b5)","m13(b9)":"m13(b9)",m13b9:"m13(b9)","m13-9":"m13(b9)","m13(-9)":"m13(b9)","-13(b13)":"m13(b9)","-13b13":"m13(b9)","-13-13":"m13(b9)","-13(-13)":"m13(b9)",m2:"m2",mi2:"m2",min2:"m2","m(add2)":"m2",madd2:"m2",m4:"m4",m6:"m6",mi6:"m6",min6:"m6","-6":"m6","m6(#5)":"m6(#5)","m6(9)":"m6(9)",m6add9:"m6(9)","m6(add9)":"m6(9)",m69:"m6(9)","m6(ma7)":"m6(ma7)","m6(M7)":"m6(ma7)","m6(+7)":"m6(ma7)",m6M7:"m6(ma7)","m6+7":"m6(ma7)",m7:"m7",mi7:"m7",min7:"m7","-7":"m7","m7(#11)":"m7(#11)","m7#11":"m7(#11)","m7+11":"m7(#11)","m7(+11)":"m7(#11)","-7(#11)":"m7(#11)","-7#11":"m7(#11)","-7+11":"m7(#11)","-7(+11)":"m7(#11)","m7(#5)":"m7(#5)","m7#5":"m7(#5)","m7+5":"m7(#5)","m7(+5)":"m7(#5)","-7(#5)":"m7(#5)","-7#5":"m7(#5)","-7(+5)":"m7(#5)","m7(#9)":"m7(#9)","m7#9":"m7(#9)","m7+9":"m7(#9)","m7(+9)":"m7(#9)","-7(#9)":"m7(#9)","-7#9":"m7(#9)","-7(+9)":"m7(#9)","m7(11)":"m7(11)","m7(4)":"m7(4)","m7(add4)":"m7(4)","m7(add11)":"m7(4)",m74:"m7(4)","m7(6)":"m7(6)","m7(add6)":"m7(add6)","m7(b13)":"m7(b13)",m7b13:"m7(b13)","m7-13":"m7(b13)","m7(-13)":"m7(b13)","-7(b13)":"m7(b13)","-7b13":"m7(b13)","-7-13":"m7(b13)","-7(-13)":"m7(b13)","m7(b5)":"m7(b5)",m7b5:"m7(b5)","m7-5":"m7(b5)","m7(-5)":"m7(b5)","-7(b5)":"m7(b5)","-7b5":"m7(b5)","-7(-5)":"m7(b5)","m7(b9)":"m7(b9)",m7b9:"m7(b9)","m7-9":"m7(b9)","m7(-9)":"m7(b9)","-7(b9)":"m7(b9)","-7b9":"m7(b9)","-7(-9)":"m7(b9)","m7(no3)":"m7(no3)","min7(no3)":"m7(no3)",m7sus4:"m7sus4",m7sus:"m7sus4",m9:"m9",mi9:"m9",min9:"m9","-9":"m9","m9(#11)":"m9(#11)","m9#11":"m9(#11)","m9+11":"m9(#11)","m9(+11)":"m9(#11)","-9(#11)":"m9(#11)","-9#11":"m9(#11)","-9+11":"m9(#11)","-9(+11)":"m9(#11)","m9(#5)":"m9(#5)","m9#5":"m9(#5)","m9(+5)":"m9(#5)","-9(#5)":"m9(#5)","-9#5":"m9(#5)","-9(+5)":"m9(#5)","m9(#7)":"m9(#7)","m9(b13)":"m9(b13)",m9b13:"m9(b13)","m9-13":"m9(b13)","m9(-13)":"m9(b13)","-9(b13)":"m9(b13)","-9b13":"m9(b13)","-9-13":"m9(b13)","-9(-13)":"m9(b13)","m9(b5)":"m9(b5)",m9b5:"m9(b5)","m9-5":"m9(b5)","m9(-5)":"m9(b5)","-9(b5)":"m9(b5)","-9b5":"m9(b5)","-9(-5)":"m9(b5)","m9(ma7)":"m9(ma7)","m9(maj7)":"m9(ma7)","m9(+7)":"m9(ma7)","m9(M7)":"m9(ma7)",m9M7:"m9(ma7)",ma9:"ma9",maj9:"ma9",ma11:"ma11","11(#7)":"ma11","11#7":"ma11","11+7":"ma11","11(+7)":"ma11","+11":"ma11",M11:"ma11","ma11(#5)":"ma11(#5)","maj11#5":"ma11(#5)","maj11+5":"ma11(#5)","maj11(+5)":"ma11(#5)","+11(#5)":"ma11(#5)","+11#5":"ma11(#5)","M11+5":"ma11(#5)","+11(+5)":"ma11(#5)","maj11(#5)":"ma11(#5)","ma11#5":"ma11(#5)","ma11+5":"ma11(#5)","ma11(+5)":"ma11(#5)","ma11(#9)":"ma11(#9)","maj11#9":"ma11(#9)","maj11+9":"ma11(#9)","maj11(+9)":"ma11(#9)","+11(#9)":"ma11(#9)","+11#9":"ma11(#9)","M11+9":"ma11(#9)","+11(+9)":"ma11(#9)","maj11(#9)":"ma11(#9)","ma11#9":"ma11(#9)","ma11+9":"ma11(#9)","ma11(+9)":"ma11(#9)","ma11(b13)":"ma11(b13)",maj11b13:"ma11(b13)","maj11-13":"ma11(b13)","maj11(-13)":"ma11(b13)","+11(b13)":"ma11(b13)","+11b13":"ma11(b13)","M11-13":"ma11(b13)","+11(-13)":"ma11(b13)","maj11(b13)":"ma11(b13)",ma11b13:"ma11(b13)","ma11-13":"ma11(b13)","ma11(-13)":"ma11(b13)","ma11(b5)":"ma11(b5)",maj11b5:"ma11(b5)","maj11-5":"ma11(b5)","maj11(-5)":"ma11(b5)","+11(b5)":"ma11(b5)","+11b5":"ma11(b5)","M11-5":"ma11(b5)","+11(-5)":"ma11(b5)","maj11(b5)":"ma11(b5)",ma11b5:"ma11(b5)","ma11-5":"ma11(b5)","ma11(-5)":"ma11(b5)","ma11(b9)":"ma11(b9)",maj11b9:"ma11(b9)","maj11(-9)":"ma11(b9)","maj11-9":"ma11(b9)","+11(b9)":"ma11(b9)","+11b9":"ma11(b9)","M11(-9)":"ma11(b9)","+11-9":"ma11(b9)","maj11(b9)":"ma11(b9)",ma11b9:"ma11(b9)","ma11(-9)":"ma11(b9)","ma11-9":"ma11(b9)",ma13:"ma13","13(#7)":"ma13","+13":"ma13",M13:"ma13","ma13(#11)":"ma13(#11)","maj13#11":"ma13(#11)","maj13+11":"ma13(#11)","maj13(+11)":"ma13(#11)","+13(#11)":"ma13(#11)","+13#11":"ma13(#11)","M13+11":"ma13(#11)","+13(+11)":"ma13(#11)","maj13(#11)":"ma13(#11)","ma7#11":"ma9(#11)","ma13+11":"ma13(#11)","ma13(+11)":"ma13(#11)","ma13(#11#5)":"ma13(#11#5)","maj13#11#5":"ma13(#11#5)","maj13+11+5":"ma13(#11#5)","maj13(+11+5)":"ma13(#11#5)","+13(#11#5)":"ma13(#11#5)","+13#11#5":"ma13(#11#5)","M13+11+5":"ma13(#11#5)","+13(+11+5)":"ma13(#11#5)","maj13(#11#5)":"ma13(#11#5)","ma7#11#5":"ma9(#11#5)","ma13+11+5":"ma13(#11#5)","ma13(+11+5)":"ma13(#11#5)","ma13(#5)":"ma13(#5)","maj13#5":"ma13(#5)","maj13+5":"ma13(#5)","maj13(+5)":"ma13(#5)","+13(#5)":"ma13(#5)","+13#5":"ma13(#5)","M13+5":"ma13(#5)","+13(+5)":"ma13(#5)","maj13(#5)":"ma13(#5)","ma13#5":"ma13(#5)","ma13+5":"ma13(#5)","ma13(+5)":"ma13(#5)","ma13(#9)":"ma13(#9)","maj13#9":"ma13(#9)","maj13(+9)":"ma13(#9)","maj13+9":"ma13(#9)","+13(#9)":"ma13(#9)","+13#9":"ma13(#9)","M13(+9)":"ma13(#9)","+13+9":"ma13(#9)","maj13(#9)":"ma13(#9)","ma13#9":"ma13(#9)","ma13(+9)":"ma13(#9)","ma13+9":"ma13(#9)","ma13(#9#5)":"ma13(#9#5)","maj13#9#5":"ma13(#9#5)","maj13(+9+5)":"ma13(#9#5)","maj13+9+5":"ma13(#9#5)","+13(#9#5)":"ma13(#9#5)","+13#9#5":"ma13(#9#5)","M13(+9+5)":"ma13(#9#5)","+13+9+5":"ma13(#9#5)","maj13(#9#5)":"ma13(#9#5)","ma7#9#5":"ma13(#9#5)","ma13(+9+5)":"ma13(#9#5)","ma13+9+5":"ma13(#9#5)","ma13(b5)":"ma13(b5)",maj13b5:"ma13(b5)","maj13-5":"ma13(b5)","maj13(-5)":"ma13(b5)","+13(b5)":"ma13(b5)","+13b5":"ma13(b5)","M13-5":"ma13(b5)","+13(-5)":"ma13(b5)","maj13(b5)":"ma13(b5)",ma13b5:"ma13(b5)","ma13-5":"ma13(b5)","ma13(-5)":"ma13(b5)","ma13(b9)":"ma13(b9)",maj13b9:"ma13(b9)","maj13-9":"ma13(b9)","maj13(-9)":"ma13(b9)","+13(b9)":"ma13(b9)","+13b9":"ma13(b9)","M13-9":"ma13(b9)","+13(-9)":"ma13(b9)","maj13(b9)":"ma13(b9)",ma13b9:"ma13(b9)","ma13-9":"ma13(b9)","ma13(-9)":"ma13(b9)","ma13(b9#5)":"ma13(b9#5)","maj13b9#5":"ma13(b9#5)","maj13-9+5":"ma13(b9#5)","maj13(-9+5)":"ma13(b9#5)","+13(b9#5)":"ma13(b9#5)","+13b9#5":"ma13(b9#5)","M13-9+5":"ma13(b9#5)","+13(-9+5)":"ma13(b9#5)","maj13(b9#5)":"ma13(b9#5)","ma7b9#5":"ma13(b9#5)","ma13-9+5":"ma13(b9#5)","ma13(-9+5)":"ma13(b9#5)",ma6:"ma6","ma6(9)":"ma6(9)",ma69:"ma6(9)",ma7:"ma7","+7":"ma7","#7":"ma7",M7:"ma7",Maj7:"ma7",maj7:"ma7","(triangle)":"ma7","ma7(#11)":"ma7(#11)","maj7#11":"ma7(#11)","maj7+11":"ma7(#11)","maj7(+11)":"ma7(#11)","+7(#11)":"ma7(#11)","+7#11":"ma7(#11)","M7+11":"ma7(#11)","+7(+11)":"ma7(#11)","maj7(#11)":"ma7(#11)","ma7+11":"ma7(#11)","ma7(+11)":"ma7(#11)","ma7(#4)":"ma7(#4)","ma7(#5)":"ma7(#5)","maj7#5":"ma7(#5)","maj7+5":"ma7(#5)","maj7(+5)":"ma7(#5)","+7(#5)":"ma7(#5)","+7#5":"ma7(#5)","M7+5":"ma7(#5)","+7(+5)":"ma7(#5)","maj7(#5)":"ma7(#5)","ma7#5":"ma7(#5)","ma7+5":"ma7(#5)","ma7(+5)":"ma7(#5)","aug(M7)":"ma7(#5)","aug(+7)":"ma7(#5)","aug(ma7)":"ma7(#5)","aug(maj7)":"ma7(#5)","ma7(#9)":"ma7(#9)","maj7#9":"ma7(#9)","maj7+9":"ma7(#9)","maj7(+9)":"ma7(#9)","+7(#9)":"ma7(#9)","+7#9":"ma7(#9)","M7+9":"ma7(#9)","+7(+9)":"ma7(#9)","maj7(#9)":"ma7(#9)","ma7#9":"ma7(#9)","ma7+9":"ma7(#9)","ma7(+9)":"ma7(#9)","ma7(b13)":"ma7(b13)",maj7b13:"ma7(b13)","maj7-13":"ma7(b13)","maj7(-13)":"ma7(b13)","+7(b13)":"ma7(b13)","+7b13":"ma7(b13)","M7-13":"ma7(b13)","+7(-13)":"ma7(b13)","maj7(b13)":"ma7(b13)",ma7b13:"ma9(b13)","ma7-13":"ma7(b13)","ma7(-13)":"ma7(b13)","ma7(b5)":"ma7(b5)",maj7b5:"ma7(b5)","maj7-5":"ma7(b5)","maj7(-5)":"ma7(b5)","+7(b5)":"ma7(b5)","+7b5":"ma7(b5)","M7-5":"ma7(b5)","+7(-5)":"ma7(b5)","maj7(b5)":"ma7(b5)",ma7b5:"ma7(b5)","ma7-5":"ma7(b5)","ma7(-5)":"ma7(b5)","ma7(b9)":"ma7(b9)",maj7b9:"ma7(b9)","maj7-9":"ma7(b9)","maj7(-9)":"ma7(b9)","+7(b9)":"ma7(b9)","+7b9":"ma7(b9)","M7-9":"ma7(b9)","+7(-9)":"ma7(b9)","maj7(b9)":"ma7(b9)",ma7b9:"ma7(b9)","ma7-9":"ma7(b9)","ma7(-9)":"ma7(b9)","ma7(no3)":"ma7(no3)","9(#7)":"ma9","+9":"ma9",M9:"ma9","ma9(#11)":"ma9(#11)","maj9#11":"ma9(#11)","maj9+11":"ma9(#11)","maj9(+11)":"ma9(#11)","+9(#11)":"ma9(#11)","+9#11":"ma9(#11)","M9+11":"ma9(#11)","+9(+11)":"ma9(#11)","maj9(#11)":"ma9(#11)","ma9+11":"ma9(#11)","ma9(+11)":"ma9(#11)","ma9(#11#5)":"ma9(#11#5)","maj9#11#5":"ma9(#11#5)","maj9+11+5":"ma9(#11#5)","maj9(+11+5)":"ma9(#11#5)","+9(#11#5)":"ma9(#11#5)","+9#11#5":"ma9(#11#5)","M9+11+5":"ma9(#11#5)","+9(+11+5)":"ma9(#11#5)","maj9(#11#5)":"ma9(#11#5)","ma9+11+5":"ma9(#11#5)","ma9(+11+5)":"ma9(#11#5)","ma9(#4)":"ma9(#4)","ma9(#5)":"ma9(#5)","maj9#5":"ma9(#5)","maj9+5":"ma9(#5)","maj9(+5)":"ma9(#5)","+9(#5)":"ma9(#5)","+9#5":"ma9(#5)","M9+5":"ma9(#5)","+9(+5)":"ma9(#5)","maj9(#5)":"ma9(#5)","ma9#5":"ma9(#5)","ma9+5":"ma9(#5)","ma9(+5)":"ma9(#5)","ma9(13)":"ma9(13)","ma9(b13)":"ma9(b13)",maj9b13:"ma9(b13)","maj9-13":"ma9(b13)","maj9(-13)":"ma9(b13)","+9(b13)":"ma9(b13)","+9b13":"ma9(b13)","M9-13":"ma9(b13)","+9(-13)":"ma9(b13)","maj9(b13)":"ma9(b13)","ma9-13":"ma9(b13)","ma9(-13)":"ma9(b13)","ma9(b13#5)":"ma9(b13#5)","maj9b13#5":"ma9(b13#5)","maj9-13+5":"ma9(b13#5)","maj9(-13+5)":"ma9(b13#5)","+9(b13#5)":"ma9(b13#5)","+9b13#5":"ma9(b13#5)","M9-13+5":"ma9(b13#5)","+9(-13+5)":"ma9(b13#5)","maj9(b13#5)":"ma9(b13#5)","ma7b13#5":"ma9(b13#5)","ma9-13+5":"ma9(b13#5)","ma9(-13+5)":"ma9(b13#5)","ma9(b5)":"ma9(b5)",maj9b5:"ma9(b5)","maj9-5":"ma9(b5)","maj9(-5)":"ma9(b5)","+9(b5)":"ma9(b5)","+9b5":"ma9(b5)","M9-5":"ma9(b5)","+9(-5)":"ma9(b5)","maj9(b5)":"ma9(b5)",ma9b5:"ma9(b5)","ma9-5":"ma9(b5)","ma9(-5)":"ma9(b5)",sus:"sus",sus4:"sus","sus(no5)":"sus(no5)","sus#42":"sus#42"};var ho=df;function cs(r){return r===null||ho[r]==="[blank]"?null:ho[r]||r}class gr{static parse(t){try{return this.parseOrFail(t)}catch{return null}}static parseOrFail(t){const e=Qu(t.trim());return new gr(e)}clone(){return this.set({})}toChordSymbol(t=null){var s;if(this.isChordSymbol())return this.clone();const e=$t.wrapOrFail(t);let n=new gr({suffix:this.suffix?cs(this.suffix):null,root:this.root.toChordSymbol(e),bass:((s=this.bass)==null?void 0:s.toChordSymbol(e))||null});return this.root.isMinor()&&(n=n.makeMinor()),n=n.normalize(t),n}toChordSymbolString(t=null){return this.toChordSymbol(t).toString()}isChordSymbol(){return this.is(Hr)}toNumeric(t=null){var n;if(this.isNumeric())return this.clone();if(this.isNumeral())return this.transform(s=>s.toNumeric());const e=$t.wrapOrFail(t);return new gr({suffix:cs(this.suffix),root:this.root.toNumeric(e),bass:((n=this.bass)==null?void 0:n.toNumeric(e))||null})}toNumeral(t=null){var n;if(this.isNumeral())return this.clone();if(this.isNumeric())return this.transform(s=>s.toNumeral());const e=$t.wrapOrFail(t);return new gr({suffix:cs(this.suffix),root:e?this.root.toNumeral(e):null,bass:((n=this.bass)==null?void 0:n.toNumeral(e))||null})}toNumeralString(t=null){return this.toNumeral(t).toString()}isNumeric(){return this.is(Yr)}toNumericString(t=null){return this.toNumeric(t).toString()}isNumeral(){return this.is($r)}toString({useUnicodeModifier:t=!1}={}){const e=this.root.toString({showMinor:!1,useUnicodeModifier:t})+(this.suffix||"");return this.bass?`${e}/${this.bass.toString({useUnicodeModifier:t})}`:e}normalize(t=null,{normalizeSuffix:e=!0}={}){const n=e?cs(this.suffix):this.suffix;let s=this.root.normalize().normalizeEnharmonics(t);return this.root.isMinor()&&this.bass&&(s=this.root.transpose(3).removeMinor().normalize()),this.set({suffix:n,root:this.root.normalize().normalizeEnharmonics(t),bass:this.bass?this.bass.normalize().normalizeEnharmonics(s):null})}useModifier(t){return this.transform(e=>e.useModifier(t))}transposeUp(){return this.transform(t=>t.transposeUp())}transposeDown(){return this.transform(t=>t.transposeDown())}transpose(t){return this.transform(e=>e.transpose(t))}constructor({base:t=null,modifier:e=null,suffix:n=null,bassBase:s=null,bassModifier:i=null,root:a=null,bass:o=null}){this.suffix=n||null,this.root=this.determineRoot(a,t,e,n),this.bass=this.determineBass(o,s,i)}determineRoot(t,e,n,s){if(t)return t;if(!e)throw new Error("Expected base");return new $t({note:e,modifier:n,minor:cf(s)})}determineBass(t,e,n){return t||(e?new $t({note:e,modifier:n||null,minor:!1}):null)}makeMinor(){return!this.suffix||this.suffix[0]!=="m"?this.set({suffix:`m${this.suffix||""}`}):this.clone()}set(t){var e;return new gr({root:this.root.clone(),suffix:this.suffix,bass:((e=this.bass)==null?void 0:e.clone())||null,...t})}is(t){return this.root.is(t)&&(!this.bass||this.bass.is(t))}transform(t){return this.set({root:t(this.root),bass:this.bass?t(this.bass):null})}}var Bs=gr;class Ps{constructor(t="",e=null){this.chords=t||"",this.lyrics=e||""}isRenderable(){return!0}clone(){return new Ps(this.chords,this.lyrics)}toString(){return`ChordLyricsPair(chords=${this.chords}, lyrics=${this.lyrics})`}set({chords:t,lyrics:e}){return new Ps(t||this.chords,e||this.lyrics)}setLyrics(t){return this.set({lyrics:t})}transpose(t,e=null,{normalizeChordSuffix:n}={normalizeChordSuffix:!1}){const s=Bs.parse(this.chords.trim());if(s){let i=s.transpose(t);return e&&(i=i.normalize(e,{normalizeSuffix:n})),this.set({chords:i.toString()})}return this.clone()}}var Je=Ps;const pf={separator:","};class bf{constructor(t=pf){this.separator=t.separator}}var gf=bf;const mo={evaluate:!1,metadata:{separator:","},key:null,expandChorusDirective:!1,useUnicodeModifiers:!1,normalizeChords:!0};class yf{constructor(t=mo){const e={...mo,...t};this.evaluate=!!e.evaluate,this.expandChorusDirective=!!e.expandChorusDirective,this.useUnicodeModifiers=!!e.useUnicodeModifiers,this.normalizeChords=!!e.normalizeChords,this.metadata=new gf(t.metadata),this.key=t.key?$t.wrap(t.key):null,this.configuration=t}get(t){return Fc(this,t)}}var vf=yf;class _f{constructor(t=null){this.configuration=new vf(t||{})}}var la=_f;class $f{constructor(t=null){X(this,"line",null);X(this,"column",null);X(this,"offset",null);t&&(this.line=t.line||null,this.column=t.column||null,this.offset=t.offset||null)}}var Pl=$f;const Tl="album",jl="artist",Bn="capo",ca="comment",Il="composer",Ll="copyright",Ol="duration",On="end_of_chorus",ua="end_of_tab",fa="end_of_verse",Xr="key",Dl="_key",Ml="lyricist",wf="start_of_bridge",en="start_of_chorus",zs="start_of_tab",Vs="start_of_verse",ha="subtitle",Nl="tempo",Fl="time",ma="title",Ef="transpose",Kl="new_key",Rl="year",Ts="chordfont",js="chordsize",Bi="chordcolour",Is="textfont",Ls="textsize",zi="textcolour",Bl="chorus",xf="t",kf="st",Cf="c",Sf="soc",Af="eoc",Pf="sot",Tf="eot",jf="nk",If="cf",Lf="cs",Of="tf",Df="ts",Mf=[ca],Nf=[Tl,jl,Bn,Il,Ll,Ol,Xr,Ml,Nl,Fl,ma,ha,Rl],Ff=[Dl],Kf=[en,On,zs,ua,Vs,fa],Rf=[Ts,js,Bi,Is,Ls,zi],Bf=[Vs,en,wf,zs,Bl],po={[xf]:ma,[kf]:ha,[Cf]:ca,[Sf]:en,[Af]:On,[Pf]:zs,[Tf]:ua,[jf]:Kl,[If]:Ts,[Lf]:js,[Of]:Is,[Df]:Ls},zf=/^([^:\s]+)(:?\s*(.+))?$/,Vf=/^x_(.+)$/;function bo(r){return Ff.includes(r)}const qf=r=>{if(!r)return r;const t=r.trim();return t in po?po[t]:t};class Vr extends Pl{constructor(e,n=null,s=null){super(s);X(this,"_originalName","");X(this,"_name","");X(this,"_value","");X(this,"_isMetaTag",!1);this.parseNameValue(e,n)}parseNameValue(e,n){e==="meta"?this.parseMetaTag(n):(this.name=e,this.value=n||"")}parseMetaTag(e){if(!e)throw new Error("Expected value");const[n,s]=e.split(/\s(.+)/);this.name=n,this.value=s||"",this._isMetaTag=!0}static parse(e){return e instanceof Vr?e:this.parseWithRegex(e,zf)}static parseWithRegex(e,n){const s=e.match(n);return s!==null?new Vr(s[1],s[3]||null):null}static parseOrFail(e){const n=this.parse(e);if(!n)throw new Error(`Failed to parse ${e}`);return n}isSectionDelimiter(){return Kf.includes(this.name)}isInlineFontTag(){return Rf.includes(this.name)}set name(e){this._name=qf(e),this._originalName=e}get name(){return this._name.trim()}get originalName(){return this._originalName.trim()}set value(e){this._value=e||""}get value(){return`${this._value}`.trim()}hasValue(){return this.value.length>0}isRenderable(){return Mf.includes(this.name)||this.hasRenderableLabel()}hasRenderableLabel(){return Bf.includes(this.name)&&this.hasValue()}isMetaTag(){return this._isMetaTag||Vf.test(this.name)||Nf.indexOf(this.name)!==-1}clone(){return new Vr(this._originalName,this.value)}toString(){return`Tag(name=${this.name}, value=${this.value})`}set({value:e}){return new Vr(this._originalName,e)}}var Me=Vr;class Uf extends Error{constructor(e,n=null,s=null,i=null){super(`${e} on line ${n} column ${s}`);X(this,"line",null);X(this,"column",null);X(this,"offset",null);this.name="ExpressionError",this.line=n,this.column=s,this.offset=i}}var Gf=Uf;class Wf extends Pl{}var da=Wf;class pa extends da{constructor(e,n=null){super();X(this,"expressions",[]);this.expressions=e,this.variable=n}evaluate(e,n){return this.expressions.map(s=>s.evaluate(e,n,this.variable)).join("")}isRenderable(){return!0}clone(){return new pa(this.expressions.map(e=>e.clone()),this.variable)}}var Vi=pa;class ba extends da{constructor({variable:e=null,valueTest:n=null,trueExpression:s=[],falseExpression:i=[],line:a=null,column:o=null,offset:l=null}){super({line:a,column:o,offset:l});X(this,"trueExpression",[]);X(this,"falseExpression",[]);this.variable=e||null,this.valueTest=n||null,this.trueExpression=s,this.falseExpression=i}evaluate(e,n,s=null){if(this.variable)return this.evaluateWithVariable(e,n);if(!s)throw new Gf("Unexpected empty expression",this.line,this.column,this.offset);return this.evaluateToString(e.get(s)||"",n)}evaluateToString(e,n){return Array.isArray(e)?e.join(n):e}evaluateWithVariable(e,n){if(!this.variable)throw new Error("Expected this.variable to be present");const s=e.get(this.variable);return s&&(Rs(this.valueTest)||s===this.valueTest)?this.evaluateForTruthyValue(e,n,s):this.falseExpression.length?new Vi(this.falseExpression,this.variable).evaluate(e,n):""}evaluateForTruthyValue(e,n,s){return this.trueExpression.length?new Vi(this.trueExpression,this.variable).evaluate(e,n):this.evaluateToString(s,n)}isRenderable(){return!0}clone(){return new ba({variable:this.variable,valueTest:this.valueTest,trueExpression:this.trueExpression.map(e=>e.clone()),falseExpression:this.falseExpression.map(e=>e.clone()),line:this.line,column:this.column,offset:this.offset})}}var Dn=ba;class ga extends da{constructor(t){super(),this.string=t}evaluate(){return this.string}isRenderable(){return!0}clone(){return new ga(this.string)}}var Mn=ga;const Hf=`
`;class Yf extends la{format(t){const{lines:e,metadata:n}=t;return e.map(s=>this.formatLine(s,n)).join(Hf)}formatLine(t,e){return t.items.map(n=>this.formatItem(n,e)).join("")}formatItem(t,e){if(t instanceof Me)return this.formatTag(t);if(t instanceof Je)return this.formatChordLyricsPair(t);if("evaluate"in t)return this.formatOrEvaluateItem(t,e);throw new Error(`Don't know how to format a ${t.constructor.name}`)}formatOrEvaluateItem(t,e){if(this.configuration.evaluate)return t.evaluate(e,this.configuration.get("metadata.separator"));if(t instanceof Dn)return this.formatTernary(t);if(t instanceof Mn)return t.evaluate();throw new Error(`Don't know how to format a ${t.constructor.name}`)}formatTernary(t){const{variable:e,valueTest:n,trueExpression:s,falseExpression:i}=t;return["%{",e||"",this.formatValueTest(n),this.formatExpressionRange(s),this.formatExpressionRange(i),"}"].join("")}formatValueTest(t){return t?`=${t}`:""}formatExpressionRange(t){return t.length?`|${t.map(e=>this.formatExpression(e)).join("")}`:""}formatExpression(t){return t instanceof Dn?this.formatTernary(t):t instanceof Mn?t.string:""}formatTag(t){return t.hasValue()?`{${t.originalName}: ${t.value}}`:`{${t.originalName}}`}formatChordLyricsPair(t){return[this.formatChordLyricsPairChords(t),this.formatChordLyricsPairLyrics(t)].join("")}formatChordLyricsPairChords(t){return t.chords?`[${t.chords}]`:""}formatChordLyricsPairLyrics(t){return t.lyrics||""}}var Xf=Yf;class ya{constructor(t){this.content=t}isRenderable(){return!1}clone(){return new ya(this.content)}toString(){return`Comment(content=${this.content})`}}var kn=ya;class va{constructor({font:t,size:e,colour:n}={font:null,size:null,colour:null}){X(this,"font",null);X(this,"size",null);X(this,"colour",null);this.font=t?t.replace(/"/g,"'"):null,this.size=e||null,this.colour=n||null}clone(){return new va({font:this.font,size:this.size,colour:this.colour})}toCssString(){const t={};return this.colour&&(t.color=this.colour),this.font&&this.size?t.font=`${this.size} ${this.font}`:this.font?t["font-family"]=this.font:this.size&&(t["font-size"]=`${this.size}`),Object.keys(t).map(e=>`${e}: ${t[e]}`).join("; ")}}var Os=va;class Ds{constructor({type:t,items:e}={type:sr,items:[]}){X(this,"items",[]);X(this,"type",sr);X(this,"currentChordLyricsPair",new Je);X(this,"key",null);X(this,"transposeKey",null);X(this,"lineNumber",null);X(this,"textFont",new Os);X(this,"chordFont",new Os);this.type=t,this.items=e}isEmpty(){return this.items.length===0}isNotEmpty(){return!this.isEmpty()}addItem(t){t instanceof Me?this.addTag(t):t instanceof Je?this.addChordLyricsPair(t):t instanceof kn?this.addComment(t):this.items.push(t)}hasRenderableItems(){return this.items.some(t=>t.isRenderable())}clone(){return this.mapItems(null)}mapItems(t){const e=new Ds;return e.items=this.items.map(n=>{const s=n.clone();return t?t(s):s}).filter(n=>n!==null),e.type=this.type,e}isVerse(){return this.type===Pr}isChorus(){return this.type===nr}hasContent(){return this.hasRenderableItems()}addChordLyricsPair(t=null,e=null){return t instanceof Je?this.currentChordLyricsPair=t:this.currentChordLyricsPair=new Je(t||"",e||""),this.items.push(this.currentChordLyricsPair),this.currentChordLyricsPair}ensureChordLyricsPair(){this.currentChordLyricsPair||this.addChordLyricsPair()}chords(t){this.ensureChordLyricsPair(),this.currentChordLyricsPair.chords+=t}lyrics(t){this.ensureChordLyricsPair(),this.currentChordLyricsPair.lyrics+=t}addTag(t,e=null){const n=t instanceof Me?t:new Me(t,e);return this.items.push(n),n}addComment(t){const e=t instanceof kn?t:new kn(t);return this.items.push(e),e}set(t){return new Ds({type:this.type,items:this.items,...t})}}var qi=Ds;class Zf{constructor(){X(this,"lines",[])}addLine(t){this.lines.push(t)}get type(){const t=this.lines.map(n=>n.type),e=[...new Set(t)];return e.length===1?e[0]:aa}hasRenderableItems(){return this.lines.some(t=>t.hasRenderableItems())}}var Ui=Zf;class Qf{get key(){return this.getSingleMetadata(Xr)}get title(){return this.getSingleMetadata(ma)}get subtitle(){return this.getSingleMetadata(ha)}get capo(){return this.getMetadata(Bn)}get duration(){return this.getSingleMetadata(Ol)}get tempo(){return this.getSingleMetadata(Nl)}get time(){return this.getMetadata(Fl)}get year(){return this.getSingleMetadata(Rl)}get album(){return this.getMetadata(Tl)}get copyright(){return this.getSingleMetadata(Ll)}get lyricist(){return this.getMetadata(Ml)}get artist(){return this.getMetadata(jl)}get composer(){return this.getMetadata(Il)}}var zl=Qf;function Jf(r,t){r.includes(t)||r.push(t)}class _a extends zl{constructor(e={}){super();X(this,"metadata",{});e&&this.assign(e)}merge(e){const n=this.clone();return n.assign(e),n}contains(e){return e in this.metadata}add(e,n){if(bo(e))return;if(!(e in this.metadata)){this.metadata[e]=n;return}const s=this.metadata[e];if(s!==n){if(s instanceof Array){Jf(s,n);return}this.metadata[e]=[s,n]}}set(e,n){n?this.metadata[e]=n:delete this.metadata[e]}getMetadata(e){return this.get(e)}getSingleMetadata(e){return this.getSingle(e)}get(e){return e===Dl?this.calculateKeyFromCapo():e in this.metadata?this.metadata[e]:this.getArrayItem(e)}getSingle(e){const n=this.get(e);return Array.isArray(n)?n[0]:n}parseArrayKey(e){const n=e.match(/(.+)\.(-?\d+)$/);if(!n)return null;const s=n[1],i=parseInt(n[2],10);return[s,i]}getArrayItem(e){const n=this.parseArrayKey(e);if(n===null)return;const[s,i]=n,a=this.metadata[s]||[];let o=i;return o<0?o=a.length+o:o>0&&(o-=1),a[o]}clone(){return new _a(this.metadata)}calculateKeyFromCapo(){const e=this.getSingle(Bn),n=this.getSingle(Xr);if(e&&n){const s=Bs.parse(n);if(!s)throw new Error(`Could not parse ${n}`);return s.transpose(parseInt(e,10)).toString()}}assign(e){Object.keys(e).filter(n=>!bo(n)).forEach(n=>{const s=e[n];s instanceof Array?this.metadata[n]=[...s]:this.metadata[n]=s})}}var Vl=_a;class eh{constructor(t,e,n){X(this,"lineNumber",null);X(this,"column",null);this.message=t,this.lineNumber=e,this.column=n}toString(){return`Warning: ${this.message} on line ${this.lineNumber||"?"} column ${this.column||"?"}`}}var th=eh;class yr{constructor(t,e){this.fontSize=t,this.unit=e}clone(){return new yr(this.fontSize,this.unit)}multiply(t){return new yr(this.fontSize*t/100,this.unit)}toString(){return`${this.fontSize}${this.unit}`}static parse(t,e){const n=t.trim(),s=parseFloat(n);return Number.isNaN(s)?this.parseNotANumber(e):n.slice(-1)==="%"?this.parsePercentage(s,e):new yr(s,"px")}static parseNotANumber(t){return t?t.clone():new yr(100,"%")}static parsePercentage(t,e){return e?e.multiply(t):new yr(t,"%")}}var rh=yr;class nh{constructor(){X(this,"fontAndColourStacks",{[Bi]:[],[Ts]:[],[zi]:[],[Is]:[]});X(this,"sizeStacks",{[js]:[],[Ls]:[]});X(this,"textFont",new Os);X(this,"chordFont",new Os)}applyTag(t){switch(t.name){case Is:this.textFont.font=this.pushOrPopTag(t);break;case Ls:this.textFont.size=this.pushOrPopSizeTag(t);break;case zi:this.textFont.colour=this.pushOrPopTag(t);break;case Ts:this.chordFont.font=this.pushOrPopTag(t);break;case js:this.chordFont.size=this.pushOrPopSizeTag(t);break;case Bi:this.chordFont.colour=this.pushOrPopTag(t);break}}pushOrPopTag(t){let{value:e}=t;return t.hasValue()?this.fontAndColourStacks[t.name].push(e):(this.fontAndColourStacks[t.name].pop(),e=this.fontAndColourStacks[t.name].slice(-1)[0]||null),e}pushOrPopSizeTag(t){const{value:e}=t;if(t.hasValue()){const n=this.sizeStacks[t.name].slice(-1)[0]||null,s=rh.parse(e,n);return this.sizeStacks[t.name].push(s),s}return this.sizeStacks[t.name].pop(),this.sizeStacks[t.name].slice(-1)[0]||null}}var sh=nh;class Ms extends zl{constructor(e={}){super();X(this,"lines",[]);X(this,"currentLine",null);X(this,"warnings",[]);X(this,"sectionType",sr);X(this,"fontStack",new sh);X(this,"currentKey",null);X(this,"transposeKey",null);X(this,"_bodyParagraphs",null);X(this,"_bodyLines",null);this.metadata=new Vl(e)}get previousLine(){const e=this.lines.length;return e>=2?this.lines[e-2]:null}get bodyLines(){return this._bodyLines||(this._bodyLines=this.selectRenderableItems(this.lines)),this._bodyLines}get bodyParagraphs(){return this._bodyParagraphs||(this._bodyParagraphs=this.selectRenderableItems(this.paragraphs)),this._bodyParagraphs}selectRenderableItems(e){const n=[...e];for(;n.length&&!n[0].hasRenderableItems();)n.shift();return n}chords(e){if(!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.chords(e)}lyrics(e){if(this.ensureLine(),!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.lyrics(e)}addLine(e){return e?this.currentLine=e:(this.currentLine=new qi,this.lines.push(this.currentLine)),this.setCurrentProperties(this.sectionType),this.currentLine.transposeKey=this.transposeKey??this.currentKey,this.currentLine.key=this.currentKey||this.metadata.getSingle(Xr),this.currentLine.lineNumber=this.lines.length-1,this.currentLine}expandLine(e){const n=e.items.flatMap(s=>s instanceof Me&&s.name===Bl?this.getLastChorusBefore(e.lineNumber):[]);return[e,...n]}getLastChorusBefore(e){const n=[];if(!e)return n;for(let s=e-1;s>=0;s-=1){const i=this.lines[s];if(i.type===nr){const a=this.filterChorusStartEndDirectives(i);i.isNotEmpty()&&a.isEmpty()||n.unshift(i)}else if(n.length>0)break}return n}filterChorusStartEndDirectives(e){return e.mapItems(n=>n instanceof Me&&(n.name===en||n.name===On)?null:n)}get paragraphs(){return this.linesToParagraphs(this.lines)}get expandedBodyParagraphs(){return this.selectRenderableItems(this.linesToParagraphs(this.lines.flatMap(e=>this.expandLine(e))))}linesToParagraphs(e){let n=new Ui;const s=[n];return e.forEach(i=>{i.isEmpty()?(n=new Ui,s.push(n)):i.hasRenderableItems()&&n.addLine(i)}),s}setCurrentProperties(e){if(!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.type=e,this.currentLine.textFont=this.fontStack.textFont.clone(),this.currentLine.chordFont=this.fontStack.chordFont.clone()}ensureLine(){this.currentLine===null&&this.addLine()}addTag(e){const n=Me.parseOrFail(e);return this.applyTagOnSong(n),this.applyTagOnLine(n),n}applyTagOnLine(e){if(this.ensureLine(),!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.addTag(e)}applyTagOnSong(e){e.isMetaTag()?this.setMetadata(e.name,e.value||""):e.name===Ef?this.transposeKey=e.value:e.name===Kl?this.currentKey=e.value:e.isSectionDelimiter()?this.setSectionTypeFromTag(e):e.isInlineFontTag()&&this.fontStack.applyTag(e)}setSectionTypeFromTag(e){switch(e.name){case en:this.startSection(nr,e);break;case On:this.endSection(nr,e);break;case zs:this.startSection(Ki,e);break;case ua:this.endSection(Ki,e);break;case Vs:this.startSection(Pr,e);break;case fa:this.endSection(Pr,e);break}}startSection(e,n){this.checkCurrentSectionType(sr,n),this.sectionType=e,this.setCurrentProperties(e)}endSection(e,n){this.checkCurrentSectionType(e,n),this.sectionType=sr}checkCurrentSectionType(e,n){this.sectionType!==e&&this.addWarning(`Unexpected tag {${n.originalName}, current section is: ${this.sectionType}`,n)}addWarning(e,{line:n,column:s}){const i=new th(e,n||null,s||null);this.warnings.push(i)}addItem(e){if(e instanceof Me)this.addTag(e);else{if(this.ensureLine(),!this.currentLine)throw new Error("Expected this.currentLine to be present");this.currentLine.addItem(e)}}clone(){return this.mapItems(e=>e)}setMetadata(e,n){this.metadata.add(e,n)}get metaData(){return Sl('metaData has been deprecated, please use metadata instead (notice the lowercase "d")'),this.metadata}getMetadata(e){return this.metadata.getMetadata(e)}getSingleMetadata(e){return this.metadata.getSingleMetadata(e)}setKey(e){const n=e?e.toString():null;return this.changeMetadata(Xr,n)}setCapo(e){const n=e?e.toString():null;return this.changeMetadata(Bn,n)}setDirective(e,n){return n===null?this.removeItem(s=>s instanceof Me&&s.name===e):this.updateItem(s=>s instanceof Me&&s.name===e,s=>"set"in s?s.set({value:n}):s,s=>s.insertDirective(e,n))}transpose(e,{normalizeChordSuffix:n=!1}={}){const s=$t.wrap(this.key);let i=null,a=this;return s&&(i=s.transpose(e),a=a.setKey(i.toString())),a.mapItems(o=>o instanceof Je?o.transpose(e,i,{normalizeChordSuffix:n}):o)}transposeUp({normalizeChordSuffix:e=!1}={}){return this.transpose(1,{normalizeChordSuffix:e})}transposeDown({normalizeChordSuffix:e=!1}={}){return this.transpose(-1,{normalizeChordSuffix:e})}changeKey(e){const n=this.getTransposeDistance(e),s=this.mapItems(i=>i instanceof Me&&i.name===Xr?i.set({value:e.toString()}):i instanceof Je?i.transpose(n,e):i);return this.setKey(e.toString()),s}getTransposeDistance(e){const n=$t.wrap(this.key);if(!n)throw new Error(`
Cannot change song key, the original key is unknown.

Either ensure a key directive is present in the song (when using chordpro):
  \`{key: C}\`

Or set the song key before changing key:
  \`song.setKey('C');\``.substring(1));return n.distanceTo(e)}changeMetadata(e,n){const s=this.setDirective(e,n);return s.metadata.set(e,n),s}insertDirective(e,n,{after:s=null}={}){const i=this.lines.findIndex(f=>f.items.some(u=>!(u instanceof Me)||s&&u instanceof Me&&u.name===s)),a=new qi;a.addTag(e,n);const o=this.clone(),{lines:l}=o;return o.lines=[...l.slice(0,i),a,...l.slice(i)],o}mapItems(e){const n=new Ms;return this.lines.forEach(s=>{n.addLine(),s.items.forEach(i=>{const a=e(i);a&&n.addItem(a)})}),n}mapLines(e){const n=new Ms;return this.lines.forEach(s=>{const i=e(s);i&&(n.addLine(),i.items.forEach(a=>n.addItem(a)))}),n}updateItem(e,n,s){let i=!1;const a=this.mapItems(o=>e(o)?(i=!0,n(o)):o);return i?a:s(a)}removeItem(e){return this.mapLines(n=>{const{items:s}=n,i=s.findIndex(e);return i===-1?n:s.length===1?null:n.set({items:[...s.slice(0,i),...s.slice(i+1)]})})}}var tn=Ms;const go="chordSheet",yo="chordLyricsPair",vo="tag",ih="comment",_o="ternary",ah="line";class oh{constructor(){X(this,"song",new tn)}serialize(t){return{type:go,lines:t.lines.map(e=>this.serializeLine(e))}}serializeLine(t){return{type:ah,items:t.items.map(e=>this.serializeItem(e))}}serializeItem(t){if(t instanceof Me)return this.serializeTag(t);if(t instanceof Je)return this.serializeChordLyricsPair(t);if(t instanceof Dn)return this.serializeTernary(t);if(t instanceof Mn)return this.serializeLiteral(t);throw new Error(`Don't know how to serialize ${t.constructor.name}`)}serializeTag(t){return{type:vo,name:t.originalName,value:t.value}}serializeChordLyricsPair(t){return{type:yo,chords:t.chords,chord:null,lyrics:t.lyrics}}serializeTernary(t){return{type:_o,variable:t.variable,valueTest:t.valueTest,trueExpression:this.serializeExpression(t.trueExpression),falseExpression:this.serializeExpression(t.falseExpression)}}serializeLiteral(t){return t.string}serializeExpression(t){return t.map(e=>this.serializeItem(e))}deserialize(t){return this.parseAstComponent(t),this.song}parseAstComponent(t){if(!t)return null;if(typeof t=="string")return new Mn(t);const{type:e}=t;switch(e){case go:this.parseChordSheet(t);break;case yo:return this.parseChordLyricsPair(t);case vo:return this.parseTag(t);case ih:return this.parseComment(t);case _o:return this.parseTernary(t);default:console.warn(`Unhandled AST component "${e}"`,t)}return null}parseChordSheet(t){const{lines:e}=t;this.song=new tn,e.forEach(n=>this.parseLine(n))}parseLine(t){const{items:e}=t;this.song.addLine(),e.forEach(n=>{const s=this.parseAstComponent(n);this.song.addItem(s)})}parseChordLyricsPair(t){const{chord:e,chords:n,lyrics:s}=t;return new Je(e?new Bs(e).toString():n,s)}parseTag(t){const{name:e,value:n,location:{offset:s=null,line:i=null,column:a=null}={}}=t;return new Me(e,n,{line:i,column:a,offset:s})}parseComment(t){const{comment:e}=t;return new kn(e)}parseTernary(t){const{variable:e,valueTest:n,trueExpression:s,falseExpression:i,location:{offset:a=null,line:o=null,column:l=null}={}}=t;return new Dn({variable:e,valueTest:n,trueExpression:this.parseExpression(s),falseExpression:this.parseExpression(i),offset:a,line:o,column:l})}parseExpression(t){return(t||[]).map(e=>this.parseAstComponent(e)).filter(e=>e!==null)}}var ql=oh;class lh{constructor(){X(this,"song",new tn)}get warnings(){return this.song.warnings}parseWithParser(t,e){const n=e(Al(t));return this.song=new ql().deserialize(n),this.song}}var Ul=lh;function li(r,t,e){return e=e||" ",r.length>t?r:(t-=r.length,e+=e.repeat(t),r+e.slice(0,t))}class Zr extends Error{static buildMessage(t,e){function n(f){return f.charCodeAt(0).toString(16).toUpperCase()}function s(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,u=>"\\x0"+n(u)).replace(/[\x10-\x1F\x7F-\x9F]/g,u=>"\\x"+n(u))}function i(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,u=>"\\x0"+n(u)).replace(/[\x10-\x1F\x7F-\x9F]/g,u=>"\\x"+n(u))}function a(f){switch(f.type){case"literal":return'"'+s(f.text)+'"';case"class":const u=f.parts.map(m=>Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m));return"["+(f.inverted?"^":"")+u+"]";case"any":return"any character";case"end":return"end of input";case"other":return f.description}}function o(f){const u=f.map(a);let m,d;if(u.sort(),u.length>0){for(m=1,d=1;m<u.length;m++)u[m-1]!==u[m]&&(u[d]=u[m],d++);u.length=d}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function l(f){return f?'"'+s(f)+'"':"end of input"}return"Expected "+o(t)+" but "+l(e)+" found."}constructor(t,e,n,s){super(),this.message=t,this.expected=e,this.found=n,this.location=s,this.name="PeggySyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,Zr.prototype):this.__proto__=Zr.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Zr)}format(t){let e="Error: "+this.message;if(this.location){let n=null,s;for(s=0;s<t.length;s++)if(t[s].grammarSource===this.location.source){n=t[s].text.split(/\r\n|\n|\r/g);break}let i=this.location.start,a=this.location.source+":"+i.line+":"+i.column;if(n){let o=this.location.end,l=li("",i.line.toString().length," "),f=n[i.line-1],u=i.line===o.line?o.column:f.length+1;e+=`
 --> `+a+`
`+l+` |
`+i.line+" | "+f+`
`+l+" | "+li("",i.column-1," ")+li("",u-i.column,"^")}else e+=`
 at `+a}return e}}function ch(r,t){t=t!==void 0?t:{};const e={},n=t.grammarSource,s={ChordSheet:fn};let i=fn;const a=function(h,b){return{type:"chordSheet",lines:[...h,b]}},o=function(h){return h},l=function(h,b,x,A){return{type:"line",items:[h?{type:"chordLyricsPair",chords:"",lyrics:h}:null,...b,x?{type:"chordLyricsPair",chords:x,lyrics:""}:null,A?{type:"comment",comment:A}:null].filter(se=>se)}},f=function(h){return{type:"chordLyricsPair",chords:"",lyrics:h}},u="#",m=He("#",!1),d=/^[^\r\n]/,y=kt(["\r",`
`],!0,!1),$=function(h){return h},_=function(h,b,x){return{type:"chordLyricsPair",chords:h||"",lyrics:b+(x||"")}},P=function(h){return h.map(b=>b.char||b).join("")},k="[",E=He("[",!1),L="]",T=He("]",!1),I=function(h){return h.map(b=>b.char||b).join("")},O=/^[^\]\r\n]/,D=kt(["]","\r",`
`],!0,!1),N="\\",F=He("\\",!1),V=function(){return{type:"char",char:"\\"}},q=function(){return{type:"char",char:"]"}},H=function(h){return h},me="%{",ce=He("%{",!1),_e="}",Ee=He("}",!1),xe=function(h,b,x){return{type:"ternary",variable:h.length>0?h:null,valueTest:b,...x,location:ye().start}},ie="=",Fe=He("=",!1),Ke=function(h){return h},De="|",tt=He("|",!1),gt=function(h,b){return{type:"ternary",trueExpression:h,falseExpression:b,location:ye().start}},Tt=function(h){return h},ue=/^[a-zA-Z0-9\-_]/,Se=kt([["a","z"],["A","Z"],["0","9"],"-","_"],!1,!1),We=function(){return{type:"char",char:"]"}},jt=function(){return{type:"char",char:"|"}},bt=function(){return{type:"char",char:"}"}},Ht=/^[^|[\]\\{}%#\r\n\t ]/,Yt=kt(["|","[","]","\\","{","}","%","#","\r",`
`,"	"," "],!0,!1),xt=function(){return{type:"char",char:"\\"}},rt=function(){return{type:"char",char:"["}},yt="{",Xt=He("{",!1),K=function(){return{type:"char",char:"{"}},it="%",It=He("%",!1),nt=function(){return{type:"char",char:"%"}},cr=function(){return{type:"char",char:"#"}},Lt=function(h,b){return{type:"tag",name:h,value:b,location:ye().start}},jr=":",Ne=He(":",!1),ur=function(h){return h.map(b=>b.char||b).join("")},Ir=/^[a-zA-Z\-_]/,fr=kt([["a","z"],["A","Z"],"-","_"],!1,!1),hr=/^[^}\\\r\n]/,ke=kt(["}","\\","\r",`
`],!0,!1),sn=Vn("whitespace"),mr=/^[ \t\n\r]/,vt=kt([" ","	",`
`,"\r"],!1,!1),Zt=Vn("space"),dr=/^[ \t]/,pr=kt([" ","	"],!1,!1),an=`
`,on=He(`
`,!1),Lr="\r",ln=He("\r",!1);let v=0,fe=0;const Ot=[{line:1,column:1}];let w=0,R=[],M=0,te;if(t.startRule!==void 0){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function ye(){return un(fe,v)}function He(h,b){return{type:"literal",text:h,ignoreCase:b}}function kt(h,b,x){return{type:"class",parts:h,inverted:b,ignoreCase:x}}function zn(){return{type:"end"}}function Vn(h){return{type:"other",description:h}}function cn(h){let b=Ot[h],x;if(b)return b;for(x=h-1;!Ot[x];)x--;for(b=Ot[x],b={line:b.line,column:b.column};x<h;)r.charCodeAt(x)===10?(b.line++,b.column=1):b.column++,x++;return Ot[h]=b,b}function un(h,b){const x=cn(h),A=cn(b);return{source:n,start:{offset:h,line:x.line,column:x.column},end:{offset:b,line:A.line,column:A.column}}}function ae(h){v<w||(v>w&&(w=v,R=[]),R.push(h))}function qs(h,b,x){return new Zr(Zr.buildMessage(h,b),h,b,x)}function fn(){let h,b,x;for(h=v,b=[],x=qn();x!==e;)b.push(x),x=qn();return b!==e?(x=hn(),x===e&&(x=null),x!==e?(fe=h,b=a(b,x),h=b):(v=h,h=e)):(v=h,h=e),h}function qn(){let h,b,x;return h=v,b=hn(),b!==e?(x=Zs(),x!==e?(fe=h,b=o(b),h=b):(v=h,h=e)):(v=h,h=e),h}function hn(){let h,b,x,A,se,ge,Ve;if(h=v,b=v,x=Gn(),x===e&&(x=null),x!==e?b=r.substring(b,v):b=x,b!==e){for(x=[],A=Un();A!==e;)x.push(A),A=Un();if(x!==e)if(A=Hn(),A===e&&(A=null),A!==e)if(se=Us(),se===e&&(se=null),se!==e){for(ge=[],Ve=Dt();Ve!==e;)ge.push(Ve),Ve=Dt();ge!==e?(fe=h,b=l(b,x,A,se),h=b):(v=h,h=e)}else v=h,h=e;else v=h,h=e;else v=h,h=e}else v=h,h=e;return h}function Un(){let h,b;return h=dn(),h===e&&(h=Gs(),h===e&&(h=mn(),h===e&&(h=v,b=Gn(),b!==e&&(fe=h,b=f(b)),h=b))),h}function Us(){let h,b,x,A,se,ge;if(h=v,b=Dt(),b===e&&(b=null),b!==e)if(r.charCodeAt(v)===35?(x=u,v++):(x=e,M===0&&ae(m)),x!==e){for(A=v,se=[],d.test(r.charAt(v))?(ge=r.charAt(v),v++):(ge=e,M===0&&ae(y));ge!==e;)se.push(ge),d.test(r.charAt(v))?(ge=r.charAt(v),v++):(ge=e,M===0&&ae(y));se!==e?A=r.substring(A,v):A=se,A!==e?(fe=h,b=$(A),h=b):(v=h,h=e)}else v=h,h=e;else v=h,h=e;return h}function Gs(){let h,b,x,A,se,ge;if(h=v,b=Hn(),b!==e){for(x=v,A=[],se=Ce();se!==e;)A.push(se),se=Ce();if(A!==e?x=r.substring(x,v):x=A,x!==e){for(A=v,se=[],ge=Dt();ge!==e;)se.push(ge),ge=Dt();se!==e?A=r.substring(A,v):A=se,A!==e?(fe=h,b=_(b,x,A),h=b):(v=h,h=e)}else v=h,h=e}else v=h,h=e;return h}function Gn(){let h,b,x;if(h=v,b=[],x=Wn(),x!==e)for(;x!==e;)b.push(x),x=Wn();else b=e;return b!==e&&(fe=h,b=P(b)),h=b,h}function Wn(){let h;return h=Ce(),h===e&&(h=Dt()),h}function Hn(){let h,b,x,A,se;if(h=v,b=v,M++,x=Mr(),M--,x===e?b=void 0:(v=b,b=e),b!==e)if(r.charCodeAt(v)===91?(x=k,v++):(x=e,M===0&&ae(E)),x!==e){for(A=[],se=Yn();se!==e;)A.push(se),se=Yn();A!==e?(r.charCodeAt(v)===93?(se=L,v++):(se=e,M===0&&ae(T)),se!==e?(fe=h,b=I(A),h=b):(v=h,h=e)):(v=h,h=e)}else v=h,h=e;else v=h,h=e;return h}function Yn(){let h,b,x,A;return O.test(r.charAt(v))?(h=r.charAt(v),v++):(h=e,M===0&&ae(D)),h===e&&(h=v,b=Mr(),b!==e?(x=v,r.charCodeAt(v)===92?(A=N,v++):(A=e,M===0&&ae(F)),A!==e&&(fe=x,A=V()),x=A,x===e&&(x=v,r.charCodeAt(v)===93?(A=L,v++):(A=e,M===0&&ae(T)),A!==e&&(fe=x,A=q()),x=A),x!==e?(fe=h,b=H(x),h=b):(v=h,h=e)):(v=h,h=e)),h}function mn(){let h,b,x,A,se,ge,Ve,Qt,pn;return h=v,r.substr(v,2)===me?(b=me,v+=2):(b=e,M===0&&ae(ce)),b!==e?(x=Re(),x!==e?(A=v,se=Xs(),se===e&&(se=null),se!==e?A=r.substring(A,v):A=se,A!==e?(se=Ws(),se===e&&(se=null),se!==e?(ge=Re(),ge!==e?(Ve=Hs(),Ve===e&&(Ve=null),Ve!==e?(Qt=Re(),Qt!==e?(r.charCodeAt(v)===125?(pn=_e,v++):(pn=e,M===0&&ae(Ee)),pn!==e?(fe=h,b=xe(A,se,Ve),h=b):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e),h}function Ws(){let h,b,x,A;return h=v,r.charCodeAt(v)===61?(b=ie,v++):(b=e,M===0&&ae(Fe)),b!==e?(x=Re(),x!==e?(A=Xn(),A!==e?(fe=h,b=Ke(A),h=b):(v=h,h=e)):(v=h,h=e)):(v=h,h=e),h}function Xn(){let h,b,x;if(h=v,b=[],x=_t(),x!==e)for(;x!==e;)b.push(x),x=_t();else b=e;return b!==e?h=r.substring(h,v):h=b,h}function Hs(){let h,b,x,A,se,ge,Ve;return h=v,r.charCodeAt(v)===124?(b=De,v++):(b=e,M===0&&ae(tt)),b!==e?(x=Re(),x!==e?(A=g(),A!==e?(se=Re(),se!==e?(ge=Ys(),ge===e&&(ge=null),ge!==e?(Ve=Re(),Ve!==e?(fe=h,b=gt(A,ge),h=b):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e),h}function Ys(){let h,b,x,A;return h=v,r.charCodeAt(v)===124?(b=De,v++):(b=e,M===0&&ae(tt)),b!==e?(x=Re(),x!==e?(A=g(),A!==e?(fe=h,b=Tt(A),h=b):(v=h,h=e)):(v=h,h=e)):(v=h,h=e),h}function Xs(){let h,b;if(h=[],ue.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(Se)),b!==e)for(;b!==e;)h.push(b),ue.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(Se));else h=e;return h}function g(){let h,b,x,A;if(h=[],b=v,x=[],A=_t(),A!==e)for(;A!==e;)x.push(A),A=_t();else x=e;if(x!==e?b=r.substring(b,v):b=x,b===e&&(b=mn()),b!==e)for(;b!==e;){if(h.push(b),b=v,x=[],A=_t(),A!==e)for(;A!==e;)x.push(A),A=_t();else x=e;x!==e?b=r.substring(b,v):b=x,b===e&&(b=mn())}else h=e;return h}function Ce(){let h,b;return h=at(),h===e&&(h=v,r.charCodeAt(v)===93?(b=L,v++):(b=e,M===0&&ae(T)),b!==e&&(fe=h,b=We()),h=b,h===e&&(h=v,r.charCodeAt(v)===124?(b=De,v++):(b=e,M===0&&ae(tt)),b!==e&&(fe=h,b=jt()),h=b,h===e&&(h=v,r.charCodeAt(v)===125?(b=_e,v++):(b=e,M===0&&ae(Ee)),b!==e&&(fe=h,b=bt()),h=b))),h}function _t(){let h;return h=at(),h===e&&(h=Dt()),h}function at(){let h,b,x,A;return Ht.test(r.charAt(v))?(h=r.charAt(v),v++):(h=e,M===0&&ae(Yt)),h===e&&(h=v,b=Mr(),b!==e?(x=v,r.charCodeAt(v)===92?(A=N,v++):(A=e,M===0&&ae(F)),A!==e&&(fe=x,A=xt()),x=A,x===e&&(x=v,r.charCodeAt(v)===124?(A=De,v++):(A=e,M===0&&ae(tt)),A!==e&&(fe=x,A=jt()),x=A,x===e&&(x=v,r.charCodeAt(v)===91?(A=k,v++):(A=e,M===0&&ae(E)),A!==e&&(fe=x,A=rt()),x=A,x===e&&(x=v,r.charCodeAt(v)===93?(A=L,v++):(A=e,M===0&&ae(T)),A!==e&&(fe=x,A=We()),x=A,x===e&&(x=v,r.charCodeAt(v)===123?(A=yt,v++):(A=e,M===0&&ae(Xt)),A!==e&&(fe=x,A=K()),x=A,x===e&&(x=v,r.charCodeAt(v)===125?(A=_e,v++):(A=e,M===0&&ae(Ee)),A!==e&&(fe=x,A=bt()),x=A,x===e&&(x=v,r.charCodeAt(v)===37?(A=it,v++):(A=e,M===0&&ae(It)),A!==e&&(fe=x,A=nt()),x=A,x===e&&(x=v,r.charCodeAt(v)===35?(A=u,v++):(A=e,M===0&&ae(m)),A!==e&&(fe=x,A=cr()),x=A))))))),x!==e?(fe=h,b=H(x),h=b):(v=h,h=e)):(v=h,h=e)),h}function dn(){let h,b,x,A,se,ge,Ve,Qt;return h=v,r.charCodeAt(v)===123?(b=yt,v++):(b=e,M===0&&ae(Xt)),b!==e?(x=Re(),x!==e?(A=v,se=Or(),se!==e?A=r.substring(A,v):A=se,A!==e?(se=Re(),se!==e?(ge=re(),ge===e&&(ge=null),ge!==e?(Ve=Re(),Ve!==e?(r.charCodeAt(v)===125?(Qt=_e,v++):(Qt=e,M===0&&ae(Ee)),Qt!==e?(fe=h,b=Lt(A,ge),h=b):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e)):(v=h,h=e),h}function re(){let h,b,x,A;return h=v,r.charCodeAt(v)===58?(b=jr,v++):(b=e,M===0&&ae(Ne)),b!==e?(x=Re(),x!==e?(A=Zn(),A!==e?(fe=h,b=ur(A),h=b):(v=h,h=e)):(v=h,h=e)):(v=h,h=e),h}function Or(){let h,b;if(h=[],Ir.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(fr)),b!==e)for(;b!==e;)h.push(b),Ir.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(fr));else h=e;return h}function Zn(){let h,b;for(h=[],b=de();b!==e;)h.push(b),b=de();return h}function de(){let h,b,x,A;return hr.test(r.charAt(v))?(h=r.charAt(v),v++):(h=e,M===0&&ae(ke)),h===e&&(h=v,b=Mr(),b!==e?(x=v,r.charCodeAt(v)===92?(A=N,v++):(A=e,M===0&&ae(F)),A!==e&&(fe=x,A=xt()),x=A,x===e&&(x=v,r.charCodeAt(v)===125?(A=_e,v++):(A=e,M===0&&ae(Ee)),A!==e&&(fe=x,A=bt()),x=A,x===e&&(x=v,r.charCodeAt(v)===123?(A=yt,v++):(A=e,M===0&&ae(Xt)),A!==e&&(fe=x,A=K()),x=A)),x!==e?(fe=h,b=H(x),h=b):(v=h,h=e)):(v=h,h=e)),h}function Re(){let h,b;for(M++,h=[],mr.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(vt));b!==e;)h.push(b),mr.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(vt));return M--,h===e&&(b=e,M===0&&ae(sn)),h}function Dt(){let h,b;if(M++,h=[],dr.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(pr)),b!==e)for(;b!==e;)h.push(b),dr.test(r.charAt(v))?(b=r.charAt(v),v++):(b=e,M===0&&ae(pr));else h=e;return M--,h===e&&(b=e,M===0&&ae(Zt)),h}function Zs(){let h;return h=ne(),h===e&&(h=Dr(),h===e&&(h=Qn())),h}function Qn(){let h,b,x;return h=v,b=ne(),b!==e?(x=Dr(),x!==e?(b=[b,x],h=b):(v=h,h=e)):(v=h,h=e),h}function Dr(){let h;return r.charCodeAt(v)===10?(h=an,v++):(h=e,M===0&&ae(on)),h}function ne(){let h;return r.charCodeAt(v)===13?(h=Lr,v++):(h=e,M===0&&ae(ln)),h}function Mr(){let h;return r.charCodeAt(v)===92?(h=N,v++):(h=e,M===0&&ae(F)),h}if(te=i(),te!==e&&v===r.length)return te;throw te!==e&&v<r.length&&ae(zn()),qs(R,w<r.length?r.charAt(w):null,w<r.length?un(w,w+1):un(w,w))}const uh=ch;class fh extends Ul{parse(t){return this.parseWithParser(t,uh)}}var hh=fh;const ci=/\s/,mh=/^\s*((([A-G])(#|b)?([^/\s]*)(\/([A-G])(#|b)?)?)(\s|$)+)+(\s|$)+/;class dh{constructor({preserveWhitespace:t=!0}={}){X(this,"processingText",!0);X(this,"preserveWhitespace",!0);X(this,"song",new tn);X(this,"songLine",null);X(this,"chordLyricsPair",null);X(this,"lines",[]);X(this,"currentLine",0);X(this,"lineCount",0);Sl(`ChordSheetParser is deprecated, please use ChordsOverWordsParser. 

ChordsOverWordsParser aims to support any kind of chord, whereas ChordSheetParser lacks 
support for many variations. Besides that, some chordpro feature have been ported back 
to ChordsOverWordsParser, which adds some interesting functionality.`),this.preserveWhitespace=t}parse(t,{song:e}={}){for(this.initialize(t,e);this.hasNextLine();){const n=this.readLine();this.parseLine(n)}return this.endOfSong(),this.song}endOfSong(){}parseLine(t){this.songLine=this.song.addLine(),t.trim().length===0?this.chordLyricsPair=null:this.parseNonEmptyLine(t)}parseNonEmptyLine(t){if(!this.songLine)throw new Error("Expected this.songLine to be present");if(this.chordLyricsPair=this.songLine.addChordLyricsPair(),mh.test(t)&&this.hasNextLine()){const e=this.readLine();this.parseLyricsWithChords(t,e)}else this.chordLyricsPair.lyrics=`${t}`}initialize(t,e=null){e&&(this.song=e),this.lines=Al(t).split(`
`),this.currentLine=0,this.lineCount=this.lines.length,this.processingText=!0}readLine(){const t=this.lines[this.currentLine];return this.currentLine+=1,t}hasNextLine(){return this.currentLine<this.lineCount}parseLyricsWithChords(t,e){if(this.processCharacters(t,e),!this.chordLyricsPair)throw new Error("Expected this.chordLyricsPair to be present");this.chordLyricsPair.lyrics+=e.substring(t.length),this.chordLyricsPair.chords=this.chordLyricsPair.chords.trim(),this.chordLyricsPair.lyrics&&(this.chordLyricsPair.lyrics=this.chordLyricsPair.lyrics.trim()),e.trim().length||(this.songLine=this.song.addLine())}processCharacters(t,e){for(let n=0,s=t.length;n<s;n+=1){const i=t[n],a=t[n+1],o=ci.test(i);if(this.addCharacter(i,a),!this.chordLyricsPair)throw new Error("Expected this.chordLyricsPair to be present");this.chordLyricsPair.lyrics+=e[n]||"",this.processingText=!o}}addCharacter(t,e){const n=ci.test(t);if(n||this.ensureChordLyricsPairInitialized(),!n||this.shouldAddCharacterToChords(e)){if(!this.chordLyricsPair)throw new Error("Expected this.chordLyricsPair to be present");this.chordLyricsPair.chords+=t}}shouldAddCharacterToChords(t){return t&&ci.test(t)&&this.preserveWhitespace}ensureChordLyricsPairInitialized(){if(!this.processingText){if(!this.songLine)throw new Error("Expected this.songLine to be present");this.chordLyricsPair=this.songLine.addChordLyricsPair(),this.processingText=!0}}}var Gl=dh;function ui(r,t,e){return e=e||" ",r.length>t?r:(t-=r.length,e+=e.repeat(t),r+e.slice(0,t))}class Qr extends Error{static buildMessage(t,e){function n(f){return f.charCodeAt(0).toString(16).toUpperCase()}function s(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,u=>"\\x0"+n(u)).replace(/[\x10-\x1F\x7F-\x9F]/g,u=>"\\x"+n(u))}function i(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,u=>"\\x0"+n(u)).replace(/[\x10-\x1F\x7F-\x9F]/g,u=>"\\x"+n(u))}function a(f){switch(f.type){case"literal":return'"'+s(f.text)+'"';case"class":const u=f.parts.map(m=>Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m));return"["+(f.inverted?"^":"")+u+"]";case"any":return"any character";case"end":return"end of input";case"other":return f.description}}function o(f){const u=f.map(a);let m,d;if(u.sort(),u.length>0){for(m=1,d=1;m<u.length;m++)u[m-1]!==u[m]&&(u[d]=u[m],d++);u.length=d}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function l(f){return f?'"'+s(f)+'"':"end of input"}return"Expected "+o(t)+" but "+l(e)+" found."}constructor(t,e,n,s){super(),this.message=t,this.expected=e,this.found=n,this.location=s,this.name="PeggySyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,Qr.prototype):this.__proto__=Qr.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Qr)}format(t){let e="Error: "+this.message;if(this.location){let n=null,s;for(s=0;s<t.length;s++)if(t[s].grammarSource===this.location.source){n=t[s].text.split(/\r\n|\n|\r/g);break}let i=this.location.start,a=this.location.source+":"+i.line+":"+i.column;if(n){let o=this.location.end,l=ui("",i.line.toString().length," "),f=n[i.line-1],u=i.line===o.line?o.column:f.length+1;e+=`
 --> `+a+`
`+l+` |
`+i.line+" | "+f+`
`+l+" | "+ui("",i.column-1," ")+ui("",u-i.column,"^")}else e+=`
 at `+a}return e}}function ph(r,t){t=t!==void 0?t:{};const e={},n=t.grammarSource,s={ChordSheet:h};let i=h;const a=function(c,p){return{type:"chordSheet",lines:[...c,...p]}},o=function(c,p,C){return[...(c==null?void 0:c.length)>0?[{type:"line",items:[]}]:[],...p,C]},l=function(c){return c},f=function(c){return c.type==="chordsLine"?{type:"line",items:c.items.map(p=>{const C={type:"chordLyricsPair"};return p.type==="chord"?{...C,chord:p}:{...C,chords:p.value}})}:c},u=function(c,p){const C=c.items,B=C.map((we,st)=>{const Ct=C[st+1],yc=we.column-1,Da=Ct?Ct.column-1:p.length,Jn=p.substring(yc,Da),Js=/(\s+)(\S+)/.exec(Jn),es=Js?Js.index+Js[1].length:null,Ma=we.type==="chord"?{chord:we}:{chords:we.value};return es&&es<Da?[{type:"chordLyricsPair",...Ma,lyrics:Jn.substring(0,es)},{type:"chordLyricsPair",chords:"",lyrics:Jn.substring(es)}]:{type:"chordLyricsPair",...Ma,lyrics:Jn}}).flat(),le=C[0];if(le&&le.column>1){const we=le.column;we>0&&B.unshift({type:"chordLyricsPair",chords:"",lyrics:p.substring(0,we-1)})}return{type:"line",items:B}},m=function(c){return{type:"chordsLine",items:c}},d=function(c){return c},y="/",$=de("/",!1),_="|",P=de("|",!1),k="-",E=de("-",!1),L=function(c){return{type:"symbol",value:c,column:Zn().start.column}},T=function(c){return c.length===0?{type:"line",items:[]}:{type:"line",items:[{type:"chordLyricsPair",chords:"",lyrics:c}]}},I=function(c){return c},O=function(c){return{type:"line",items:[{type:"tag",name:"comment",value:c}]}},D="verse",N=de("verse",!0),F="chorus",V=de("chorus",!0),q="bridge",H=de("bridge",!0),me="tag",ce=de("tag",!0),_e="interlude",Ee=de("interlude",!0),xe="instrumental",ie=de("instrumental",!0),Fe="intro",Ke=de("intro",!0),De=/^[^\n\r]/,tt=Re([`
`,"\r"],!0,!1),gt=function(c,p){return[...c,p].filter(C=>C).map(([C,B])=>({type:"line",items:[{type:"tag",name:C,value:B}]}))},Tt=function(c,p){return{type:"line",items:[{type:"tag",name:c,value:p}]}},ue=function(c){return c},Se="{",We=de("{",!1),jt="}",bt=de("}",!1),Ht=function(c){return c},Yt=function(c,p){return[c,p]},xt=":",rt=de(":",!1),yt=/^[a-zA-Z0-9\-_]/,Xt=Re([["a","z"],["A","Z"],["0","9"],"-","_"],!1,!1),K=/^[^\n\r}]/,it=Re([`
`,"\r","}"],!0,!1),It="---",nt=de("---",!1),cr=Zs("whitespace"),Lt=/^[ \t]/,jr=Re([" ","	"],!1,!1),Ne=`
`,ur=de(`
`,!1),Ir="\r",fr=de("\r",!1),hr=function(c){return{type:"chord",...c,column:Zn().start.column}},ke="#",sn=de("#",!1),mr="b",vt=de("b",!1),Zt=/^[a-zA-Z0-9()#+]/,dr=Re([["a","z"],["A","Z"],["0","9"],"(",")","#","+"],!1,!1),pr=function(c,p,C,B){return{base:c,modifier:p,suffix:C,...B,chordType:"symbol"}},an=/^[A-Ga-g]/,on=Re([["A","G"],["a","g"]],!1,!1),Lr=function(c,p){return{bassBase:c,bassModifier:p}},ln=function(c,p,C,B){return{base:p,modifier:c,suffix:C,...B,chordType:"numeral"}},v="III",fe=de("III",!1),Ot="iii",w=de("iii",!1),R="VII",M=de("VII",!1),te="vii",ye=de("vii",!1),He="II",kt=de("II",!1),zn="ii",Vn=de("ii",!1),cn="IV",un=de("IV",!1),ae="iv",qs=de("iv",!1),fn="VI",qn=de("VI",!1),hn="vi",Un=de("vi",!1),Us="I",Gs=de("I",!1),Gn="i",Wn=de("i",!1),Hn="V",Yn=de("V",!1),mn="v",Ws=de("v",!1),Xn=function(c,p){return{bassBase:p,bassModifier:c}},Hs=function(c,p,C,B){return{base:p,modifier:c,suffix:C,...B,chordType:"numeric"}},Ys=/^[1-7]/,Xs=Re([["1","7"]],!1,!1);let g=0,Ce=0;const _t=[{line:1,column:1}];let at=0,dn=[],re=0,Or;if(t.startRule!==void 0){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function Zn(){return Dr(Ce,g)}function de(c,p){return{type:"literal",text:c,ignoreCase:p}}function Re(c,p,C){return{type:"class",parts:c,inverted:p,ignoreCase:C}}function Dt(){return{type:"end"}}function Zs(c){return{type:"other",description:c}}function Qn(c){let p=_t[c],C;if(p)return p;for(C=c-1;!_t[C];)C--;for(p=_t[C],p={line:p.line,column:p.column};C<c;)r.charCodeAt(C)===10?(p.line++,p.column=1):p.column++,C++;return _t[c]=p,p}function Dr(c,p){const C=Qn(c),B=Qn(p);return{source:n,start:{offset:c,line:C.line,column:C.column},end:{offset:p,line:B.line,column:B.column}}}function ne(c){g<at||(g>at&&(at=g,dn=[]),dn.push(c))}function Mr(c,p,C){return new Qr(Qr.buildMessage(c,p),c,p,C)}function h(){let c,p,C;return c=g,p=ac(),p===e&&(p=null),p!==e?(C=b(),C===e&&(C=null),C!==e?(Ce=c,p=a(p,C),c=p):(g=c,c=e)):(g=c,c=e),c}function b(){let c,p,C,B;if(c=g,p=bn(),p===e&&(p=null),p!==e){for(C=[],B=x();B!==e;)C.push(B),B=x();C!==e?(B=A(),B===e&&(B=null),B!==e?(Ce=c,p=o(p,C,B),c=p):(g=c,c=e)):(g=c,c=e)}else g=c,c=e;return c}function x(){let c,p,C;return c=g,p=A(),p!==e?(C=bn(),C!==e?(Ce=c,p=l(p),c=p):(g=c,c=e)):(g=c,c=e),c}function A(){let c,p;return c=g,p=sc(),p===e&&(p=oc(),p===e&&(p=se(),p===e&&(p=ge(),p===e&&(p=pn())))),p!==e&&(Ce=c,p=f(p)),c=p,c}function se(){let c,p,C,B;return c=g,p=ge(),p!==e?(C=bn(),C!==e?(B=nc(),B!==e?(Ce=c,p=u(p,B),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function ge(){let c,p,C;if(c=g,p=[],C=Ve(),C===e&&(C=Ea()),C!==e)for(;C!==e;)p.push(C),C=Ve(),C===e&&(C=Ea());else p=e;return p!==e&&(Ce=c,p=m(p)),c=p,c}function Ve(){let c,p,C,B;return c=g,p=ot(),p!==e?(C=Qt(),C!==e?(B=ot(),B!==e?(Ce=c,p=d(C),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function Qt(){let c,p;return c=g,r.charCodeAt(g)===47?(p=y,g++):(p=e,re===0&&ne($)),p===e&&(r.charCodeAt(g)===124?(p=_,g++):(p=e,re===0&&ne(P)),p===e&&(r.charCodeAt(g)===45?(p=k,g++):(p=e,re===0&&ne(E)))),p!==e&&(Ce=c,p=L(p)),c=p,c}function pn(){let c,p;return c=g,p=rc(),p!==e&&(Ce=c,p=T(p)),c=p,c}function rc(){let c,p,C;for(c=g,p=[],C=Nr();C!==e;)p.push(C),C=Nr();return p!==e?c=r.substring(c,g):c=p,c}function nc(){let c,p,C;if(c=g,p=[],C=Nr(),C!==e)for(;C!==e;)p.push(C),C=Nr();else p=e;return p!==e?c=r.substring(c,g):c=p,c}function Ea(){let c,p,C,B;return c=g,p=ot(),p!==e?(C=fc(),C!==e?(B=ot(),B!==e?(Ce=c,p=I(C),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function sc(){let c,p,C,B,le,we,st,Ct;if(c=g,p=g,C=g,B=ot(),B!==e)if(le=ic(),le!==e)if(we=ot(),we!==e){for(st=[],Ct=Nr();Ct!==e;)st.push(Ct),Ct=Nr();st!==e?(Ct=ot(),Ct!==e?(B=[B,le,we,st,Ct],C=B):(g=C,C=e)):(g=C,C=e)}else g=C,C=e;else g=C,C=e;else g=C,C=e;return C!==e?p=r.substring(p,g):p=C,p!==e&&(Ce=c,p=O(p)),c=p,c}function ic(){let c;return r.substr(g,5).toLowerCase()===D?(c=r.substr(g,5),g+=5):(c=e,re===0&&ne(N)),c===e&&(r.substr(g,6).toLowerCase()===F?(c=r.substr(g,6),g+=6):(c=e,re===0&&ne(V)),c===e&&(r.substr(g,6).toLowerCase()===q?(c=r.substr(g,6),g+=6):(c=e,re===0&&ne(H)),c===e&&(r.substr(g,3).toLowerCase()===me?(c=r.substr(g,3),g+=3):(c=e,re===0&&ne(ce)),c===e&&(r.substr(g,9).toLowerCase()===_e?(c=r.substr(g,9),g+=9):(c=e,re===0&&ne(Ee)),c===e&&(r.substr(g,12).toLowerCase()===xe?(c=r.substr(g,12),g+=12):(c=e,re===0&&ne(ie)),c===e&&(r.substr(g,5).toLowerCase()===Fe?(c=r.substr(g,5),g+=5):(c=e,re===0&&ne(Ke)))))))),c}function Nr(){let c;return De.test(r.charAt(g))?(c=r.charAt(g),g++):(c=e,re===0&&ne(tt)),c}function ac(){let c,p,C,B;for(c=g,p=[],C=xa();C!==e;)p.push(C),C=xa();return p!==e?(C=ka(),C===e&&(C=null),C!==e?(B=cc(),B===e&&(B=null),B!==e?(Ce=c,p=gt(p,C),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function oc(){let c,p,C,B,le,we,st;return c=g,p=g,C=Aa(),C!==e?p=r.substring(p,g):p=C,p!==e?(C=ot(),C!==e?(B=Sa(),B!==e?(le=ot(),le!==e?(we=g,st=Pa(),st!==e?we=r.substring(we,g):we=st,we!==e?(Ce=c,p=Tt(p,we),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function xa(){let c,p,C;return c=g,p=ka(),p!==e?(C=bn(),C!==e?(Ce=c,p=ue(p),c=p):(g=c,c=e)):(g=c,c=e),c}function ka(){let c;return c=lc(),c===e&&(c=Ca()),c}function lc(){let c,p,C,B,le,we;return c=g,r.charCodeAt(g)===123?(p=Se,g++):(p=e,re===0&&ne(We)),p!==e?(C=ot(),C!==e?(B=Ca(),B!==e?(le=ot(),le!==e?(r.charCodeAt(g)===125?(we=jt,g++):(we=e,re===0&&ne(bt)),we!==e?(Ce=c,p=Ht(B),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function Ca(){let c,p,C,B,le,we,st;return c=g,p=g,C=Aa(),C!==e?p=r.substring(p,g):p=C,p!==e?(C=ot(),C!==e?(B=Sa(),B!==e?(le=ot(),le!==e?(we=g,st=Pa(),st!==e?we=r.substring(we,g):we=st,we!==e?(Ce=c,p=Yt(p,we),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function Sa(){let c;return r.charCodeAt(g)===58?(c=xt,g++):(c=e,re===0&&ne(rt)),c}function Aa(){let c,p;if(c=[],yt.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(Xt)),p!==e)for(;p!==e;)c.push(p),yt.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(Xt));else c=e;return c}function Pa(){let c,p;if(c=[],K.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(it)),p!==e)for(;p!==e;)c.push(p),K.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(it));else c=e;return c}function cc(){let c,p,C;return c=g,r.substr(g,3)===It?(p=It,g+=3):(p=e,re===0&&ne(nt)),p!==e?(C=bn(),C!==e?(p=[p,C],c=p):(g=c,c=e)):(g=c,c=e),c}function ot(){let c,p;for(re++,c=[],Lt.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(jr));p!==e;)c.push(p),Lt.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(jr));return re--,c===e&&(p=e,re===0&&ne(cr)),c}function bn(){let c;return c=ja(),c===e&&(c=Ta(),c===e&&(c=uc())),c}function uc(){let c,p,C;return c=g,p=ja(),p!==e?(C=Ta(),C!==e?(p=[p,C],c=p):(g=c,c=e)):(g=c,c=e),c}function Ta(){let c;return r.charCodeAt(g)===10?(c=Ne,g++):(c=e,re===0&&ne(ur)),c}function ja(){let c;return r.charCodeAt(g)===13?(c=Ir,g++):(c=e,re===0&&ne(fr)),c}function fc(){let c,p;return c=g,p=dc(),p===e&&(p=bc(),p===e&&(p=hc())),p!==e&&(Ce=c,p=hr(p)),c=p,c}function Fr(){let c;return r.charCodeAt(g)===35?(c=ke,g++):(c=e,re===0&&ne(sn)),c===e&&(r.charCodeAt(g)===98?(c=mr,g++):(c=e,re===0&&ne(vt))),c}function Qs(){let c,p;for(c=[],Zt.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(dr));p!==e;)c.push(p),Zt.test(r.charAt(g))?(p=r.charAt(g),g++):(p=e,re===0&&ne(dr));return c}function hc(){let c,p,C,B,le;return c=g,p=Ia(),p!==e?(C=Fr(),C===e&&(C=null),C!==e?(B=g,le=Qs(),le!==e?B=r.substring(B,g):B=le,B!==e?(le=mc(),le===e&&(le=null),le!==e?(Ce=c,p=pr(p,C,B,le),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function Ia(){let c;return an.test(r.charAt(g))?(c=r.charAt(g),g++):(c=e,re===0&&ne(on)),c}function mc(){let c,p,C,B;return c=g,r.charCodeAt(g)===47?(p=y,g++):(p=e,re===0&&ne($)),p!==e?(C=Ia(),C!==e?(B=Fr(),B===e&&(B=null),B!==e?(Ce=c,p=Lr(C,B),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function dc(){let c,p,C,B,le;return c=g,p=Fr(),p===e&&(p=null),p!==e?(C=La(),C!==e?(B=g,le=Qs(),le!==e?B=r.substring(B,g):B=le,B!==e?(le=pc(),le===e&&(le=null),le!==e?(Ce=c,p=ln(p,C,B,le),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function La(){let c;return r.substr(g,3)===v?(c=v,g+=3):(c=e,re===0&&ne(fe)),c===e&&(r.substr(g,3)===Ot?(c=Ot,g+=3):(c=e,re===0&&ne(w)),c===e&&(r.substr(g,3)===R?(c=R,g+=3):(c=e,re===0&&ne(M)),c===e&&(r.substr(g,3)===te?(c=te,g+=3):(c=e,re===0&&ne(ye)),c===e&&(r.substr(g,2)===He?(c=He,g+=2):(c=e,re===0&&ne(kt)),c===e&&(r.substr(g,2)===zn?(c=zn,g+=2):(c=e,re===0&&ne(Vn)),c===e&&(r.substr(g,2)===cn?(c=cn,g+=2):(c=e,re===0&&ne(un)),c===e&&(r.substr(g,2)===ae?(c=ae,g+=2):(c=e,re===0&&ne(qs)),c===e&&(r.substr(g,2)===fn?(c=fn,g+=2):(c=e,re===0&&ne(qn)),c===e&&(r.substr(g,2)===hn?(c=hn,g+=2):(c=e,re===0&&ne(Un)),c===e&&(r.charCodeAt(g)===73?(c=Us,g++):(c=e,re===0&&ne(Gs)),c===e&&(r.charCodeAt(g)===105?(c=Gn,g++):(c=e,re===0&&ne(Wn)),c===e&&(r.charCodeAt(g)===86?(c=Hn,g++):(c=e,re===0&&ne(Yn)),c===e&&(r.charCodeAt(g)===118?(c=mn,g++):(c=e,re===0&&ne(Ws))))))))))))))),c}function pc(){let c,p,C,B;return c=g,r.charCodeAt(g)===47?(p=y,g++):(p=e,re===0&&ne($)),p!==e?(C=Fr(),C===e&&(C=null),C!==e?(B=La(),B!==e?(Ce=c,p=Xn(C,B),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function bc(){let c,p,C,B,le;return c=g,p=Fr(),p===e&&(p=null),p!==e?(C=Oa(),C!==e?(B=g,le=Qs(),le!==e?B=r.substring(B,g):B=le,B!==e?(le=gc(),le===e&&(le=null),le!==e?(Ce=c,p=Hs(p,C,B,le),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}function Oa(){let c;return Ys.test(r.charAt(g))?(c=r.charAt(g),g++):(c=e,re===0&&ne(Xs)),c}function gc(){let c,p,C,B;return c=g,r.charCodeAt(g)===47?(p=y,g++):(p=e,re===0&&ne($)),p!==e?(C=Fr(),C===e&&(C=null),C!==e?(B=Oa(),B!==e?(Ce=c,p=Xn(C,B),c=p):(g=c,c=e)):(g=c,c=e)):(g=c,c=e),c}if(Or=i(),Or!==e&&g===r.length)return Or;throw Or!==e&&g<r.length&&ne(Dt()),Mr(dn,at<r.length?r.charAt(at):null,at<r.length?Dr(at,at+1):Dr(at,at))}const bh=ph;class gh extends Ul{parse(t){return this.parseWithParser(t,bh)}}var yh=gh;class vh extends la{format(t){const{bodyParagraphs:e,expandedBodyParagraphs:n}=t;return this.template({song:t,configuration:this.configuration,bodyParagraphs:this.configuration.expandChorusDirective?n:e})}static cssString(t=""){uo("The class method cssString() was removed in favor of the instance PROPERTY. Please use `new <Formatter>().cssString` instead.")}cssString(t=""){return lf(this.defaultCss,t)}static cssObject(){uo("The class method cssObject() was removed in favor of the instance PROPERTY. Please use `new <Formatter>().cssObject` instead.")}get cssObject(){return this.defaultCss}}var Wl=vh;function _h(r,t){return/^\d+$/.test(r)?parseInt(r,10):$t.distance(t,r)}function $h(r,t,e,n){let s=-1*(r||0);return e&&(t&&(s+=_h(t,e)),n&&(s+=$t.distance(e,n))),s}function $a(r,t,e,{renderKey:n=null,useUnicodeModifier:s=!1,normalizeChords:i=!0}={}){var y;const a=Bs.parse(r),o=e.key,l=parseInt(e.metadata.getSingle(Bn),10);if(!a)return r;const f=$h(l,t.transposeKey,o,n),u=n||((y=$t.wrap(t.key||e.key))==null?void 0:y.transpose(f))||null,m=a.transpose(f);return(i?m.normalize(u):m).toString({useUnicodeModifier:s})}const Gi=r=>r instanceof Je,wa=r=>r.items.some(t=>t.isRenderable()),Hl=r=>r instanceof Me,Yl=r=>r.name==="comment";function Xl(r){return r.trim().replace(/(<\/[a-z]+>)\s+(<)/g,"$1$2").replace(/(\n)\s+/g,"")}function wr(r,t){return r.map(t).join("")}function Be(r,t){return r?t():""}const Zl=r=>r.items.some(t=>t instanceof Je&&!Rs(t.lyrics)||t instanceof Me&&t.isRenderable()||oa(t)),Ql=r=>{const t=["row"];return wa(r)||t.push("empty-line"),t.join(" ")},Jl=r=>{const t=["paragraph"];return r.type!==aa&&r.type!==sr&&t.push(r.type),t.join(" ")},ec=(r,t,e)=>{if(!t)throw new Error("cannot evaluate, metadata is null");return r.evaluate(t,e.get("metadata.separator"))};function rr(r){const t=r.toCssString();return t?` style="${t}"`:""}var wh=({configuration:r,configuration:{key:t},song:e,renderBlankLines:n=!1,song:{title:s,subtitle:i,metadata:a},bodyParagraphs:o})=>Xl(`
  ${Be(s,()=>`<h1>${s}</h1>`)}
  ${Be(i,()=>`<h2>${i}</h2>`)}
  
  <div class="chord-sheet">
    ${wr(o,l=>`
      <div class="${Jl(l)}">
        ${wr(l.lines,f=>`
          ${Be(n||wa(f),()=>`
            <div class="${Ql(f)}">
              ${wr(f.items,u=>`
                ${Be(Gi(u),()=>`
                  <div class="column">
                    <div class="chord"${rr(f.chordFont)}>${$a(u.chords,f,e,{renderKey:t,useUnicodeModifier:r.useUnicodeModifiers,normalizeChords:r.normalizeChords})}</div>
                    <div class="lyrics"${rr(f.textFont)}>${u.lyrics}</div>
                  </div>
                `)}
                
                ${Be(Hl(u),()=>`
                  ${Be(Yl(u),()=>`
                    <div class="comment">${u.value}</div>
                  `)}
                  
                  ${Be(u.hasRenderableLabel(),()=>`
                    <h3 class="label">${u.value}</h3>
                  `)}
                `)}
                
                ${Be(oa(u),()=>`
                  <div class="column">
                    <div class="chord"></div>
                    <div class="lyrics"${rr(f.textFont)}>${ec(u,a,r)}</div>
                  </div>
                `)}
              `)}
            </div>
          `)}
        `)}
      </div>
    `)}
  </div>
`);const Eh={".chord:not(:last-child)":{paddingRight:"10px"},".paragraph":{marginBottom:"1em"},".row":{display:"flex"},".chord:after":{content:"'\\200b'"},".lyrics:after":{content:"'\\200b'"}};class xh extends Wl{get template(){return wh}get defaultCss(){return Eh}}var kh=xh,Ch=({configuration:r,configuration:{key:t},song:e,renderBlankLines:n=!1,song:{title:s,subtitle:i,bodyLines:a,metadata:o},bodyParagraphs:l})=>Xl(`
  ${Be(s,()=>`<h1>${s}</h1>`)}
  ${Be(i,()=>`<h2>${i}</h2>`)}

  ${Be(a.length>0,()=>`
    <div class="chord-sheet">
      ${wr(l,f=>`
        <div class="${Jl(f)}">
          ${wr(f.lines,u=>`
            ${Be(n||wa(u),()=>`
              <table class="${Ql(u)}">
                ${Be(Cl(u),()=>`
                  <tr>
                    ${wr(u.items,m=>`
                      ${Be(Gi(m),()=>`
                        <td class="chord"${rr(u.chordFont)}>${$a(m.chords,u,e,{renderKey:t,useUnicodeModifier:r.useUnicodeModifiers,normalizeChords:r.normalizeChords})}</td>
                      `)}
                    `)}
                  </tr>
                `)}
                
                ${Be(Zl(u),()=>`
                  <tr>
                    ${wr(u.items,m=>`
                      ${Be(Gi(m),()=>`
                        <td class="lyrics"${rr(u.textFont)}>${m.lyrics}</td>
                      `)}
                      
                      ${Be(Hl(m),()=>`
                        ${Be(Yl(m),()=>`
                          <td class="comment"${rr(u.textFont)}>${m.value}</td>
                        `)}
                        
                        ${Be(m.hasRenderableLabel(),()=>`
                          <td><h3 class="label"${rr(u.textFont)}>${m.value}</h3></td>
                        `)}
                      `)}
                      
                      ${Be(oa(m),()=>`
                        <td class="lyrics"${rr(u.textFont)}>${ec(m,o,r)}</td>
                      `)}
                    `)}
                  </tr>
                `)}
              </table>
            `)}
          `)}
        </div>
      `)}
    </div>
  `)}
`);const Sh={h1:{fontSize:"1.5em"},h2:{fontSize:"1.1em"},table:{borderSpacing:"0",color:"inherit"},td:{padding:"3px 0"},".chord:not(:last-child)":{paddingRight:"10px"},".paragraph":{marginBottom:"1em"}};class Ah extends Wl{get template(){return Ch}get defaultCss(){return Sh}}var Ph=Ah;class Th extends la{constructor(){super(...arguments);X(this,"song",new tn)}format(e){return this.song=e,[this.formatHeader(),this.formatParagraphs()].join("")}formatHeader(){const{title:e,subtitle:n}=this.song,s=e||n?`
`:"";return[this.formatTitle(e),this.formatSubTitle(n),s].join("")}formatParagraphs(){const{bodyParagraphs:e,expandedBodyParagraphs:n,metadata:s}=this.song,{expandChorusDirective:i}=this.configuration;return(i?n:e).map(a=>this.formatParagraph(a,s)).join(`

`)}formatParagraph(e,n){return e.lines.filter(s=>s.hasRenderableItems()).map(s=>this.formatLine(s,n)).join(`
`)}formatLine(e,n){return[this.formatLineTop(e,n),this.formatLineBottom(e,n)].filter(i=>!Rs(i)).map(i=>(i||"").trimRight()).join(`
`)}formatTitle(e){return e?`${e.toUpperCase()}
`:""}formatSubTitle(e){return e?`${e}
`:""}formatLineTop(e,n){return Cl(e)?this.formatLineWithFormatter(e,this.formatItemTop,n):null}chordLyricsPairLength(e,n){const s=this.renderChords(e,n),{lyrics:i}=e,a=(s||"").length,o=(i||"").length;return a>=o?a+1:Math.max(a,o)}renderChords(e,n){return $a(e.chords,n,this.song,{renderKey:this.configuration.key,useUnicodeModifier:this.configuration.useUnicodeModifiers,normalizeChords:this.configuration.normalizeChords})}formatItemTop(e,n,s){if(e instanceof Me&&e.isRenderable())return e.value||"";if(e instanceof Je){const i=this.renderChords(e,s);return co(i,this.chordLyricsPairLength(e,s))}return""}formatLineBottom(e,n){return Zl(e)?this.formatLineWithFormatter(e,this.formatItemBottom,n):""}formatLineWithFormatter(e,n,s){return e.items.map(i=>n.call(this,i,s,e)).join("")}formatItemBottom(e,n,s){return e instanceof Me&&e.isRenderable()?e.value||"":e instanceof Je?co(e.lyrics||"",this.chordLyricsPairLength(e,s)):"evaluate"in e?e.evaluate(n,this.configuration.get("metadata.separator")):""}}var jh=Th;const Ih=/^\[Verse.*]/,Lh=/^\[Chorus]/,$o=/^\[([^\]]+)]/,wo={[Pr]:Vs,[nr]:en},fi={[Pr]:fa,[nr]:On};class Oh extends Gl{constructor(){super(...arguments);X(this,"currentSectionType",null)}parseLine(e){this.isSectionEnd()&&this.endSection(),Ih.test(e)?(this.startNewLine(),this.startSection(Pr)):Lh.test(e)?(this.startNewLine(),this.startSection(nr)):$o.test(e)?this.parseMetadataLine(e):super.parseLine(e)}parseMetadataLine(e){this.startNewLine(),this.endSection();const n=e.match($o)[1];if(!this.songLine)throw new Error("Expected this.songLine to be present");this.songLine.addTag(new Me(ca,n))}isSectionEnd(){return this.songLine!==null&&this.songLine.isEmpty()&&this.song.previousLine!==null&&!this.song.previousLine.isEmpty()}endOfSong(){super.endOfSong(),this.currentSectionType!==null&&this.currentSectionType in fi&&this.startNewLine(),this.endSection({addNewLine:!1})}startSection(e){this.currentSectionType&&this.endSection(),this.currentSectionType=e,this.song.setCurrentProperties(e),e in wo&&this.song.addTag(new Me(wo[e]))}endSection({addNewLine:e=!0}={}){this.currentSectionType!==null&&this.currentSectionType in fi&&(this.song.addTag(new Me(fi[this.currentSectionType])),e&&this.startNewLine()),this.song.setCurrentProperties(sr),this.currentSectionType=null}startNewLine(){this.songLine=this.song.addLine()}}var Dh=Oh,Mh={ChordLyricsPair:Je,ChordProFormatter:Xf,ChordProParser:hh,ChordSheetParser:Gl,ChordSheetSerializer:ql,ChordsOverWordsParser:yh,Comment:kn,Composite:Vi,HtmlDivFormatter:kh,HtmlTableFormatter:Ph,Line:qi,Literal:Mn,Metadata:Vl,Paragraph:Ui,Song:tn,Tag:Me,Ternary:Dn,TextFormatter:jh,UltimateGuitarParser:Dh,CHORUS:nr,INDETERMINATE:aa,NONE:sr,TAB:Ki,VERSE:Pr};function Nh(r){let t,e,n,s="×",i,a,o,l,f,u;const m=r[4].default,d=Sc(m,r,r[3],null);return{c(){t=Q("div"),e=Q("div"),n=Q("button"),n.textContent=s,i=je(),d&&d.c(),this.h()},l(y){t=J(y,"DIV",{class:!0,style:!0});var $=W(t);e=J($,"DIV",{class:!0,style:!0});var _=W(e);n=J(_,"BUTTON",{class:!0,["data-svelte-h"]:!0}),ir(n)!=="svelte-qc1bif"&&(n.textContent=s),i=Ie(_),d&&d.l(_),_.forEach(j),$.forEach(j),this.h()},h(){S(n,"class","bg-letkwet-500 rounded-full text-white absolute -top-2 -right-2 w-10 h-10 text-xl font-bold"),S(e,"class","container svelte-1pawiih"),S(e,"style",a=`width: ${r[1]};`),S(t,"class","backdrop svelte-1pawiih"),S(t,"style",o=r[0]?"display: flex;":"")},m(y,$){Y(y,t,$),z(t,e),z(e,n),z(e,i),d&&d.m(e,null),l=!0,f||(u=[Ue(window,"keydown",r[6]),Ue(n,"click",r[7]),Ue(e,"click",Ac(r[5])),Ue(t,"click",r[8])],f=!0)},p(y,[$]){d&&d.p&&(!l||$&8)&&Pc(d,m,y,y[3],l?jc(m,y[3],$,null):Tc(y[3]),null),(!l||$&2&&a!==(a=`width: ${y[1]};`))&&S(e,"style",a),(!l||$&1&&o!==(o=y[0]?"display: flex;":""))&&S(t,"style",o)},i(y){l||(he(d,y),l=!0)},o(y){ve(d,y),l=!1},d(y){y&&j(t),d&&d.d(y),f=!1,Ns(u)}}}function Fh(r,t,e){let{$$slots:n={},$$scope:s}=t,{open:i=!1,width:a="auto"}=t;const o=Nn();function l(d){mi.call(this,r,d)}const f=d=>{d.key==="Escape"&&o("close")},u=()=>o("close"),m=()=>o("close");return r.$$set=d=>{"open"in d&&e(0,i=d.open),"width"in d&&e(1,a=d.width),"$$scope"in d&&e(3,s=d.$$scope)},[i,a,o,s,n,l,f,u,m]}class Kh extends dt{constructor(t){super(),pt(this,t,Fh,Nh,mt,{open:0,width:1})}}function Eo(r,t,e){const n=r.slice();return n[7]=t[e],n[9]=e,n}function Rh(r){let t,e,n;return{c(){t=Le("text"),e=pe(r[2]),n=pe("fr"),this.h()},l(s){t=Oe(s,"text",{class:!0,fill:!0,x:!0,y:!0});var i=W(t);e=be(i,r[2]),n=be(i,"fr"),i.forEach(j),this.h()},h(){S(t,"class","eng"),S(t,"fill","#444"),S(t,"x","-12"),S(t,"y","8")},m(s,i){Y(s,t,i),z(t,e),z(t,n)},p(s,i){i&4&&Ze(e,s[2])},d(s){s&&j(t)}}}function Bh(r){let t,e;return{c(){t=Le("path"),this.h()},l(n){t=Oe(n,"path",{stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),W(t).forEach(j),this.h()},h(){S(t,"stroke","#444"),S(t,"stroke-width","2"),S(t,"stroke-linecap","round"),S(t,"stroke-linejoin","round"),S(t,"d",e=`M ${r[4][r[1]].x} 0 H ${r[4][r[1]].length}`)},m(n,s){Y(n,t,s)},p(n,s){s&2&&e!==(e=`M ${n[4][n[1]].x} 0 H ${n[4][n[1]].length}`)&&S(t,"d",e)},d(n){n&&j(t)}}}function xo(r){let t,e=Ge(r[0]),n=[];for(let s=0;s<e.length;s+=1)n[s]=ko(Eo(r,e,s));return{c(){t=Le("g");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){t=Oe(s,"g",{});var i=W(t);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(j)},m(s,i){Y(s,t,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,i){if(i&19){e=Ge(s[0]);let a;for(a=0;a<e.length;a+=1){const o=Eo(s,e,a);n[a]?n[a].p(o,i):(n[a]=ko(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=e.length}},d(s){s&&j(t),Wt(n,s)}}}function ko(r){let t,e=r[7]+"",n,s;return{c(){t=Le("text"),n=pe(e),this.h()},l(i){t=Oe(i,"text",{class:!0,"text-anchor":!0,fill:!0,x:!0,y:!0});var a=W(t);n=be(a,e),a.forEach(j),this.h()},h(){S(t,"class","eng"),S(t,"text-anchor","middle"),S(t,"fill","#444"),S(t,"x",s=r[4][r[1]].x+r[9]*10),S(t,"y","53")},m(i,a){Y(i,t,a),z(t,n)},p(i,a){a&1&&e!==(e=i[7]+"")&&Ze(n,e),a&2&&s!==(s=i[4][i[1]].x+i[9]*10)&&S(t,"x",s)},d(i){i&&j(t)}}}function zh(r){let t,e,n;function s(l,f){return l[2]===0?Bh:Rh}let i=s(r),a=i(r),o=!r[3]&&xo(r);return{c(){t=Le("g"),e=Le("path"),a.c(),n=$e(),o&&o.c(),this.h()},l(l){t=Oe(l,"g",{});var f=W(t);e=Oe(f,"path",{stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),W(e).forEach(j),a.l(f),n=$e(),o&&o.l(f),f.forEach(j),this.h()},h(){S(e,"stroke","#444"),S(e,"stroke-width","0.25"),S(e,"stroke-linecap","square"),S(e,"stroke-linejoin","miter"),S(e,"d",r[5])},m(l,f){Y(l,t,f),z(t,e),a.m(t,null),z(t,n),o&&o.m(t,null)},p(l,[f]){i===(i=s(l))&&a?a.p(l,f):(a.d(1),a=i(l),a&&(a.c(),a.m(t,n))),l[3]?o&&(o.d(1),o=null):o?o.p(l,f):(o=xo(l),o.c(),o.m(t,null))},i:U,o:U,d(l){l&&j(t),a.d(),o&&o.d()}}}function Vh(r,t,e){const n={4:{x:10,y:10,length:40},6:{x:0,y:0,length:50}};let{tuning:s,strings:i,baseFret:a=1,fretsOnChord:o,lite:l=!1}=t,f=Array((o||0)+1).fill(null).map((u,m)=>`M ${n[i].x} ${12*m} H ${n[i].length}`).join(" ")+" "+Array(i).fill(null).map((u,m)=>`M ${n[i].y+m*10} 0 V 48`).join(" ");return r.$$set=u=>{"tuning"in u&&e(0,s=u.tuning),"strings"in u&&e(1,i=u.strings),"baseFret"in u&&e(2,a=u.baseFret),"fretsOnChord"in u&&e(6,o=u.fretsOnChord),"lite"in u&&e(3,l=u.lite)},[s,i,a,l,n,f,o]}class qh extends dt{constructor(t){super(),pt(this,t,Vh,zh,mt,{tuning:0,strings:1,baseFret:2,fretsOnChord:6,lite:3})}}const tc={4:0,6:-1};function Uh(r){let t,e,n,s,i,a=!r[2]&&r[0]>0&&r[1]&&r[1]>0&&Co(r);return{c(){t=Le("g"),e=Le("circle"),a&&a.c(),this.h()},l(o){t=Oe(o,"g",{});var l=W(t);e=Oe(l,"circle",{"stroke-width":!0,stroke:!0,fill:!0,cx:!0,cy:!0,r:!0}),W(e).forEach(j),a&&a.l(l),l.forEach(j),this.h()},h(){S(e,"stroke-width","0.25"),S(e,"stroke","#444"),S(e,"fill",n=r[0]===0?"transparent":"#444"),S(e,"cx",r[3]),S(e,"cy",s=r[4].fret[r[0]]),S(e,"r",i=r[0]===0?r[5].open:r[5].fret)},m(o,l){Y(o,t,l),z(t,e),a&&a.m(t,null)},p(o,l){l&1&&n!==(n=o[0]===0?"transparent":"#444")&&S(e,"fill",n),l&8&&S(e,"cx",o[3]),l&1&&s!==(s=o[4].fret[o[0]])&&S(e,"cy",s),l&1&&i!==(i=o[0]===0?o[5].open:o[5].fret)&&S(e,"r",i),!o[2]&&o[0]>0&&o[1]&&o[1]>0?a?a.p(o,l):(a=Co(o),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(o){o&&j(t),a&&a.d()}}}function Gh(r){let t,e;return{c(){t=Le("text"),e=pe("×"),this.h()},l(n){t=Oe(n,"text",{class:!0,"text-anchor":!0,fill:!0,x:!0,y:!0});var s=W(t);e=be(s,"×"),s.forEach(j),this.h()},h(){S(t,"class","eng"),S(t,"text-anchor","middle"),S(t,"fill","#444"),S(t,"x",r[3]),S(t,"y","-2")},m(n,s){Y(n,t,s),z(t,e)},p(n,s){s&8&&S(t,"x",n[3])},d(n){n&&j(t)}}}function Co(r){let t,e,n,s;return{c(){t=Le("text"),e=pe(r[1]),s=pe(`
      }`),this.h()},l(i){t=Oe(i,"text",{fill:!0,"text-anchor":!0,style:!0,x:!0,y:!0});var a=W(t);e=be(a,r[1]),a.forEach(j),s=be(i,`
      }`),this.h()},h(){S(t,"fill","white"),S(t,"text-anchor","middle"),vs(t,"font-weight","bold"),S(t,"x",r[3]),S(t,"y",n=r[4].finger[r[0]]-.5)},m(i,a){Y(i,t,a),z(t,e),Y(i,s,a)},p(i,a){a&2&&Ze(e,i[1]),a&8&&S(t,"x",i[3]),a&1&&n!==(n=i[4].finger[i[0]]-.5)&&S(t,"y",n)},d(i){i&&(j(t),j(s))}}}function Wh(r){let t;function e(i,a){return i[0]===-1?Gh:Uh}let n=e(r),s=n(r);return{c(){s.c(),t=$e()},l(i){s.l(i),t=$e()},m(i,a){s.m(i,a),Y(i,t,a)},p(i,[a]){n===(n=e(i))&&s?s.p(i,a):(s.d(1),s=n(i),s&&(s.c(),s.m(t.parentNode,t)))},i:U,o:U,d(i){i&&j(t),s.d(i)}}}function Hh(r,t,e){let n,{string:s,fret:i=0,finger:a,strings:o,lite:l=!1}=t;const f={string:[50,40,30,20,10,0],fret:[-4,6.5,18,30,42,54],finger:[-3,8,19.5,31.5,43.5]},u={open:2,fret:4};return r.$$set=m=>{"string"in m&&e(6,s=m.string),"fret"in m&&e(0,i=m.fret),"finger"in m&&e(1,a=m.finger),"strings"in m&&e(7,o=m.strings),"lite"in m&&e(2,l=m.lite)},r.$$.update=()=>{r.$$.dirty&192&&e(3,n=f.string[s+tc[o]])},[i,a,l,n,f,u,s,o]}class Yh extends dt{constructor(t){super(),pt(this,t,Hh,Wh,mt,{string:6,fret:0,finger:1,strings:7,lite:2})}}function So(r,t,e){const n=r.slice();return n[15]=t[e],n}function Ao(r,t,e){const n=r.slice();return n[15]=t[e],n}function Po(r){let t,e,n,s,i,a,o,l,f;return{c(){t=Le("g"),e=Le("g"),n=Le("path"),i=Le("rect"),o=Le("g"),l=Le("path"),this.h()},l(u){t=Oe(u,"g",{});var m=W(t);e=Oe(m,"g",{transform:!0});var d=W(e);n=Oe(d,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),W(n).forEach(j),d.forEach(j),i=Oe(m,"rect",{fill:!0,x:!0,y:!0,width:!0,"fill-opacity":!0,height:!0}),W(i).forEach(j),o=Oe(m,"g",{transform:!0});var y=W(o);l=Oe(y,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),W(l).forEach(j),y.forEach(j),m.forEach(j),this.h()},h(){S(n,"d","M 0, 0 m -4, 0 a 4,4 0 1,1 8,0"),S(n,"fill","#555"),S(n,"fill-opacity",.2),S(n,"transform","rotate(-90)"),S(e,"transform",s=`translate(${r[11](r[12],r[12])}, ${r[10].fret[r[4][0].value]})`),S(i,"fill","#555"),S(i,"x",r[8][r[12]][0]),S(i,"y",a=r[9][r[0]-1]),S(i,"width",(r[12]-1)*10),S(i,"fill-opacity",.2),S(i,"height","8.5"),S(l,"d","M 0, 0 m -4, 0 a 4,4 0 1,1 8,0"),S(l,"fill","#555"),S(l,"fill-opacity",.2),S(l,"transform","rotate(90)"),S(o,"transform",f=`translate(${r[11](1,r[12])}, ${r[10].fret[r[4][0].value]})`)},m(u,m){Y(u,t,m),z(t,e),z(e,n),z(t,i),z(t,o),z(o,l)},p(u,m){m&16&&s!==(s=`translate(${u[11](u[12],u[12])}, ${u[10].fret[u[4][0].value]})`)&&S(e,"transform",s),m&1&&a!==(a=u[9][u[0]-1])&&S(i,"y",a),m&16&&f!==(f=`translate(${u[11](1,u[12])}, ${u[10].fret[u[4][0].value]})`)&&S(o,"transform",f)},d(u){u&&j(t)}}}function To(r){let t,e,n;return{c(){t=Le("circle"),this.h()},l(s){t=Oe(s,"circle",{"stroke-width":!0,stroke:!0,fill:!0,cx:!0,cy:!0,r:!0}),W(t).forEach(j),this.h()},h(){S(t,"stroke-width","0.25"),S(t,"stroke","#444"),S(t,"fill","#444"),S(t,"cx",e=r[11](r[12]-r[15].position,r[12])),S(t,"cy",n=r[10].fret[r[15].value]),S(t,"r","4")},m(s,i){Y(s,t,i)},p(s,i){i&16&&e!==(e=s[11](s[12]-s[15].position,s[12]))&&S(t,"cx",e),i&16&&n!==(n=s[10].fret[s[15].value])&&S(t,"cy",n)},d(s){s&&j(t)}}}function jo(r){let t,e=Ge(r[4]),n=[];for(let s=0;s<e.length;s+=1)n[s]=Io(So(r,e,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=$e()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);t=$e()},m(s,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,i);Y(s,t,i)},p(s,i){if(i&7192){e=Ge(s[4]);let a;for(a=0;a<e.length;a+=1){const o=So(s,e,a);n[a]?n[a].p(o,i):(n[a]=Io(o),n[a].c(),n[a].m(t.parentNode,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=e.length}},d(s){s&&j(t),Wt(n,s)}}}function Io(r){let t,e,n,s;return{c(){t=Le("text"),e=pe(r[3]),this.h()},l(i){t=Oe(i,"text",{"text-anchor":!0,fill:!0,x:!0,y:!0});var a=W(t);e=be(a,r[3]),a.forEach(j),this.h()},h(){S(t,"text-anchor","middle"),S(t,"fill","white"),S(t,"x",n=r[11](r[12]-r[15].position,r[12])),S(t,"y",s=r[10].finger[r[15].value]-.5)},m(i,a){Y(i,t,a),z(t,e)},p(i,a){a&8&&Ze(e,i[3]),a&16&&n!==(n=i[11](i[12]-i[15].position,i[12]))&&S(t,"x",n),a&16&&s!==(s=i[10].finger[i[15].value]-.5)&&S(t,"y",s)},d(i){i&&j(t)}}}function Xh(r){let t,e,n,s,i=r[1]&&r[4].length>0&&Po(r),a=Ge(r[4]),o=[];for(let f=0;f<a.length;f+=1)o[f]=To(Ao(r,a,f));let l=!r[2]&&r[3]&&jo(r);return{c(){t=Le("g"),i&&i.c(),e=$e();for(let f=0;f<o.length;f+=1)o[f].c();n=Le("rect"),l&&l.c(),this.h()},l(f){t=Oe(f,"g",{});var u=W(t);i&&i.l(u),e=$e();for(let m=0;m<o.length;m+=1)o[m].l(u);n=Oe(u,"rect",{fill:!0,x:!0,y:!0,width:!0,height:!0}),W(n).forEach(j),l&&l.l(u),u.forEach(j),this.h()},h(){S(n,"fill","#444"),S(n,"x",s=r[8][r[12]][r[5]]),S(n,"y",r[7]),S(n,"width",r[6]),S(n,"height",8.25)},m(f,u){Y(f,t,u),i&&i.m(t,null),z(t,e);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(t,null);z(t,n),l&&l.m(t,null)},p(f,[u]){if(f[1]&&f[4].length>0?i?i.p(f,u):(i=Po(f),i.c(),i.m(t,e)):i&&(i.d(1),i=null),u&7184){a=Ge(f[4]);let m;for(m=0;m<a.length;m+=1){const d=Ao(f,a,m);o[m]?o[m].p(d,u):(o[m]=To(d),o[m].c(),o[m].m(t,n))}for(;m<o.length;m+=1)o[m].d(1);o.length=a.length}u&32&&s!==(s=f[8][f[12]][f[5]])&&S(n,"x",s),u&128&&S(n,"y",f[7]),u&64&&S(n,"width",f[6]),!f[2]&&f[3]?l?l.p(f,u):(l=jo(f),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:U,o:U,d(f){f&&j(t),i&&i.d(),Wt(o,f),l&&l.d()}}}function Zh(r,t,e){let{frets:n,barre:s,capo:i=!1,lite:a=!1,finger:o}=t;const l={4:[10,20,30,40,50],6:[0,10,20,30,40,50]},f=[2.35,13.9,26,38],u={string:[50,40,30,20,10,0],fret:[-4,6.5,18,30,42,54],finger:[-3,8,19.5,31.5,43.5]},m=(E,L)=>u.string[E+tc[L]];let d=[],y=n.length,$=0,_=0,P=0,k=0;return r.$$set=E=>{"frets"in E&&e(13,n=E.frets),"barre"in E&&e(0,s=E.barre),"capo"in E&&e(1,i=E.capo),"lite"in E&&e(2,a=E.lite),"finger"in E&&e(3,o=E.finger)},r.$$.update=()=>{r.$$.dirty&24625&&(e(4,d=n.map((E,L)=>({position:L,value:E})).filter(E=>E.value===s)),e(5,$=d.length>0?d[0].position:0),e(14,_=d.length>0?d[d.length-1].position:0),e(6,P=(_-$)*10),e(7,k=f[s-1]))},[s,i,a,o,d,$,P,k,l,f,u,m,y,n,_]}class Qh extends dt{constructor(t){super(),pt(this,t,Zh,Xh,mt,{frets:13,barre:0,capo:1,lite:2,finger:3})}}function Lo(r,t,e){const n=r.slice();return n[8]=t[e],n}function Oo(r,t,e){const n=r.slice();return n[11]=t[e],n[13]=e,n}function Do(r){let t,e,n=Ge(r[0].barres),s=[];for(let a=0;a<n.length;a+=1)s[a]=Mo(Oo(r,n,a));const i=a=>ve(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();t=$e()},l(a){for(let o=0;o<s.length;o+=1)s[o].l(a);t=$e()},m(a,o){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(a,o);Y(a,t,o),e=!0},p(a,o){if(o&5){n=Ge(a[0].barres);let l;for(l=0;l<n.length;l+=1){const f=Oo(a,n,l);s[l]?(s[l].p(f,o),he(s[l],1)):(s[l]=Mo(f),s[l].c(),he(s[l],1),s[l].m(t.parentNode,t))}for(qt(),l=n.length;l<s.length;l+=1)i(l);Ut()}},i(a){if(!e){for(let o=0;o<n.length;o+=1)he(s[o]);e=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)ve(s[o]);e=!1},d(a){a&&j(t),Wt(s,a)}}}function Mo(r){let t,e;return t=new Qh({props:{capo:r[13]===0&&r[0].capo,barre:r[11],finger:r[0].fingers?r[0].fingers[r[0].frets.indexOf(r[11])]:null,frets:r[0].frets,lite:r[2]}}),{c(){ct(t.$$.fragment)},l(n){Et(t.$$.fragment,n)},m(n,s){ut(t,n,s),e=!0},p(n,s){const i={};s&1&&(i.capo=n[13]===0&&n[0].capo),s&1&&(i.barre=n[11]),s&1&&(i.finger=n[0].fingers?n[0].fingers[n[0].frets.indexOf(n[11])]:null),s&1&&(i.frets=n[0].frets),s&4&&(i.lite=n[2]),t.$set(i)},i(n){e||(he(t.$$.fragment,n),e=!0)},o(n){ve(t.$$.fragment,n),e=!1},d(n){ft(t,n)}}}function No(r){let t,e;return t=new Yh({props:{string:r[1].strings-r[8].position,fret:r[8].value,strings:r[1].strings,finger:r[0].fingers?r[0].fingers[r[8].position]:null,lite:r[2]}}),{c(){ct(t.$$.fragment)},l(n){Et(t.$$.fragment,n)},m(n,s){ut(t,n,s),e=!0},p(n,s){const i={};s&3&&(i.string=n[1].strings-n[8].position),s&1&&(i.fret=n[8].value),s&2&&(i.strings=n[1].strings),s&1&&(i.finger=n[0].fingers?n[0].fingers[n[8].position]:null),s&4&&(i.lite=n[2]),t.$set(i)},i(n){e||(he(t.$$.fragment,n),e=!0)},o(n){ve(t.$$.fragment,n),e=!1},d(n){ft(t,n)}}}function Jh(r){let t,e,n,s,i,a,o;n=new qh({props:{tuning:r[1].tuning,strings:r[1].strings,fretsOnChord:r[1].fretsOnChord,baseFret:r[0].baseFret,lite:r[2]}});let l=r[0].barres&&Do(r),f=Ge(r[4](r[0])),u=[];for(let d=0;d<f.length;d+=1)u[d]=No(Lo(r,f,d));const m=d=>ve(u[d],1,1,()=>{u[d]=null});return{c(){t=Le("svg"),e=Le("g"),ct(n.$$.fragment),l&&l.c(),s=$e();for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){t=Oe(d,"svg",{width:!0,xmlns:!0,preserveAspectRatio:!0,viewBox:!0,class:!0});var y=W(t);e=Oe(y,"g",{transform:!0});var $=W(e);Et(n.$$.fragment,$),l&&l.l($),s=$e();for(let _=0;_<u.length;_+=1)u[_].l($);$.forEach(j),y.forEach(j),this.h()},h(){S(e,"transform","translate(13, 13)"),S(t,"width","100%"),S(t,"xmlns","http://www.w3.org/2000/svg"),S(t,"preserveAspectRatio","xMinYMin meet"),S(t,"viewBox","0 5 75 65"),S(t,"class","svelte-1a0c8ce")},m(d,y){Y(d,t,y),z(t,e),ut(n,e,null),l&&l.m(e,null),z(e,s);for(let $=0;$<u.length;$+=1)u[$]&&u[$].m(e,null);r[6](t),i=!0,a||(o=Ue(t,"click",r[5],!0),a=!0)},p(d,[y]){const $={};if(y&2&&($.tuning=d[1].tuning),y&2&&($.strings=d[1].strings),y&2&&($.fretsOnChord=d[1].fretsOnChord),y&1&&($.baseFret=d[0].baseFret),y&4&&($.lite=d[2]),n.$set($),d[0].barres?l?(l.p(d,y),y&1&&he(l,1)):(l=Do(d),l.c(),he(l,1),l.m(e,s)):l&&(qt(),ve(l,1,1,()=>{l=null}),Ut()),y&23){f=Ge(d[4](d[0]));let _;for(_=0;_<f.length;_+=1){const P=Lo(d,f,_);u[_]?(u[_].p(P,y),he(u[_],1)):(u[_]=No(P),u[_].c(),he(u[_],1),u[_].m(e,null))}for(qt(),_=f.length;_<u.length;_+=1)m(_);Ut()}},i(d){if(!i){he(n.$$.fragment,d),he(l);for(let y=0;y<f.length;y+=1)he(u[y]);i=!0}},o(d){ve(n.$$.fragment,d),ve(l),u=u.filter(Boolean);for(let y=0;y<u.length;y+=1)ve(u[y]);i=!1},d(d){d&&j(t),ft(n),l&&l.d(),Wt(u,d),r[6](null),a=!1,o()}}}function e1(r,t,e){let{chord:n,instrument:s,lite:i=!1}=t,a;const o=m=>m.frets.map((d,y)=>({position:y,value:d})).filter(d=>!m.barres||m.barres.indexOf(d.value)===-1),l=Nn();function f(m){l("clickPos",{x:m.offsetX/a.clientWidth,y:m.offsetY/a.clientHeight})}function u(m){_s[m?"unshift":"push"](()=>{a=m,e(3,a)})}return r.$$set=m=>{"chord"in m&&e(0,n=m.chord),"instrument"in m&&e(1,s=m.instrument),"lite"in m&&e(2,i=m.lite)},[n,s,i,a,o,f,u]}class t1 extends dt{constructor(t){super(),pt(this,t,e1,Jh,mt,{chord:0,instrument:1,lite:2})}}function Fo(r,t,e){const n=r.slice();return n[10]=t[e],n}function Ko(r){let t,e,n,s,i,a,o,l,f,u,m,d,y,$,_,P,k,E,L,T,I,O,D=Ge(r[0]),N=[];for(let V=0;V<D.length;V+=1)N[V]=Ro(Fo(r,D,V));const F=V=>ve(N[V],1,1,()=>{N[V]=null});return{c(){t=Q("span"),e=pe(r[1]),n=je(),s=Q("div"),i=Q("div");for(let V=0;V<N.length;V+=1)N[V].c();a=je(),o=Q("div"),l=Q("button"),f=pe("<"),m=je(),d=Q("strong"),y=pe(r[4]),$=pe(" / "),_=pe(r[5]),P=je(),k=Q("button"),E=pe(">"),this.h()},l(V){t=J(V,"SPAN",{class:!0});var q=W(t);e=be(q,r[1]),q.forEach(j),n=Ie(V),s=J(V,"DIV",{class:!0});var H=W(s);i=J(H,"DIV",{class:!0,style:!0});var me=W(i);for(let ie=0;ie<N.length;ie+=1)N[ie].l(me);me.forEach(j),H.forEach(j),a=Ie(V),o=J(V,"DIV",{class:!0});var ce=W(o);l=J(ce,"BUTTON",{class:!0});var _e=W(l);f=be(_e,"<"),_e.forEach(j),m=Ie(ce),d=J(ce,"STRONG",{class:!0});var Ee=W(d);y=be(Ee,r[4]),$=be(Ee," / "),_=be(Ee,r[5]),Ee.forEach(j),P=Ie(ce),k=J(ce,"BUTTON",{class:!0});var xe=W(k);E=be(xe,">"),xe.forEach(j),ce.forEach(j),this.h()},h(){S(t,"class","eng chord-name svelte-1mv8nun"),S(i,"class","slide svelte-1mv8nun"),vs(i,"margin-left",(r[4]-1)*-250+"px"),S(s,"class","slider svelte-1mv8nun"),S(l,"class","button-outline eng svelte-1mv8nun"),l.disabled=u=r[4]<=1,S(d,"class","eng"),S(k,"class","button-outline eng svelte-1mv8nun"),k.disabled=L=r[4]===r[5],S(o,"class","slider-nav svelte-1mv8nun")},m(V,q){Y(V,t,q),z(t,e),Y(V,n,q),Y(V,s,q),z(s,i);for(let H=0;H<N.length;H+=1)N[H]&&N[H].m(i,null);Y(V,a,q),Y(V,o,q),z(o,l),z(l,f),z(o,m),z(o,d),z(d,y),z(d,$),z(d,_),z(o,P),z(o,k),z(k,E),T=!0,I||(O=[Ue(l,"click",r[7]),Ue(k,"click",r[8])],I=!0)},p(V,q){if((!T||q&2)&&Ze(e,V[1]),q&5){D=Ge(V[0]);let H;for(H=0;H<D.length;H+=1){const me=Fo(V,D,H);N[H]?(N[H].p(me,q),he(N[H],1)):(N[H]=Ro(me),N[H].c(),he(N[H],1),N[H].m(i,null))}for(qt(),H=D.length;H<N.length;H+=1)F(H);Ut()}(!T||q&16)&&vs(i,"margin-left",(V[4]-1)*-250+"px"),(!T||q&16&&u!==(u=V[4]<=1))&&(l.disabled=u),(!T||q&16)&&Ze(y,V[4]),(!T||q&32)&&Ze(_,V[5]),(!T||q&48&&L!==(L=V[4]===V[5]))&&(k.disabled=L)},i(V){if(!T){for(let q=0;q<D.length;q+=1)he(N[q]);T=!0}},o(V){N=N.filter(Boolean);for(let q=0;q<N.length;q+=1)ve(N[q]);T=!1},d(V){V&&(j(t),j(n),j(s),j(a),j(o)),Wt(N,V),I=!1,Ns(O)}}}function Ro(r){let t,e,n,s;return e=new t1({props:{instrument:r[2],chord:r[10]}}),{c(){t=Q("div"),ct(e.$$.fragment),n=je(),this.h()},l(i){t=J(i,"DIV",{class:!0});var a=W(t);Et(e.$$.fragment,a),n=Ie(a),a.forEach(j),this.h()},h(){S(t,"class","svelte-1mv8nun")},m(i,a){Y(i,t,a),ut(e,t,null),z(t,n),s=!0},p(i,a){const o={};a&4&&(o.instrument=i[2]),a&1&&(o.chord=i[10]),e.$set(o)},i(i){s||(he(e.$$.fragment,i),s=!0)},o(i){ve(e.$$.fragment,i),s=!1},d(i){i&&j(t),ft(e)}}}function r1(r){let t,e,n=r[5]>0&&Ko(r);return{c(){n&&n.c(),t=$e()},l(s){n&&n.l(s),t=$e()},m(s,i){n&&n.m(s,i),Y(s,t,i),e=!0},p(s,i){s[5]>0?n?(n.p(s,i),i&32&&he(n,1)):(n=Ko(s),n.c(),he(n,1),n.m(t.parentNode,t)):n&&(qt(),ve(n,1,1,()=>{n=null}),Ut())},i(s){e||(he(n),e=!0)},o(s){ve(n),e=!1},d(s){s&&j(t),n&&n.d(s)}}}function n1(r){let t,e;return t=new Kh({props:{open:r[3],$$slots:{default:[r1]},$$scope:{ctx:r}}}),t.$on("close",r[9]),{c(){ct(t.$$.fragment)},l(n){Et(t.$$.fragment,n)},m(n,s){ut(t,n,s),e=!0},p(n,[s]){const i={};s&8&&(i.open=n[3]),s&8247&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){e||(he(t.$$.fragment,n),e=!0)},o(n){ve(t.$$.fragment,n),e=!1},d(n){ft(t,n)}}}function s1(r,t,e){let n;const s=Nn();let{chordsInfo:i,chordDisplay:a="",instrument:o,open:l=!1}=t,f=1;const u=()=>e(4,f--,f),m=()=>e(4,f++,f),d=()=>{e(4,f=1),s("close")};return r.$$set=y=>{"chordsInfo"in y&&e(0,i=y.chordsInfo),"chordDisplay"in y&&e(1,a=y.chordDisplay),"instrument"in y&&e(2,o=y.instrument),"open"in y&&e(3,l=y.open)},r.$$.update=()=>{r.$$.dirty&1&&e(5,n=i.length)},[i,a,o,l,f,n,s,u,m,d]}class i1 extends dt{constructor(t){super(),pt(this,t,s1,n1,mt,{chordsInfo:0,chordDisplay:1,instrument:2,open:3})}}const hi=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a1={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},Z={maj:["ma","maj","M",""],min:["min","m","-"],sus2:["sus2","2"],sus4:["sus","sus4"],dim:["dim","o"],halfDim:["m7b5","m7(b5)","0"],aug:["aug","+"],5:["5"],6:["6"],7:["7"],9:["9"],add9:["add9","(9)"],maj7:["ma7","maj7","M7"],min7:["min7","m7"],mM7:["mM7","m(M7)","min(maj7)"]},Bo={instrument:{tuning:["E","A","D","G","B","E"],fretsOnChord:4,name:"guitar",strings:6},chordShapes:[{suffix:Z.maj,baseKey:"C",shape:[-1,3,2,0,1,0]},{suffix:Z.sus2,baseKey:"C",shape:[-1,3,0,0,1,0]},{suffix:Z.sus4,baseKey:"C",shape:[-1,3,3,0,1,1]},{suffix:Z.aug,baseKey:"C",shape:[-1,3,2,1,1,3]},{suffix:Z[6],baseKey:"C",shape:[-1,3,2,2,1,0]},{suffix:Z[7],baseKey:"C",shape:[-1,3,2,3,1,0]},{suffix:Z[9],baseKey:"C",shape:[-1,3,2,3,3,-1]},{suffix:Z.add9,baseKey:"C",shape:[-1,3,2,0,3,3]},{suffix:Z.maj7,baseKey:"C",shape:[-1,3,2,0,0,0]},{suffix:Z.mM7,baseKey:"C",shape:[-1,3,1,0,0,0]},{suffix:Z.maj,baseKey:"A",shape:[-1,0,2,2,2,0]},{suffix:Z.min,baseKey:"A",shape:[-1,0,2,2,1,0]},{suffix:Z.sus2,baseKey:"A",shape:[-1,0,2,2,0,0]},{suffix:Z.sus4,baseKey:"A",shape:[-1,0,2,2,3,0]},{suffix:Z.dim,baseKey:"A",shape:[-1,0,1,2,1,0]},{suffix:Z.halfDim,baseKey:"A",shape:[-1,0,1,0,1,-1]},{suffix:Z.aug,baseKey:"A",shape:[-1,0,3,2,2,0]},{suffix:Z[5],baseKey:"A",shape:[-1,0,2,-1,-1,-1]},{suffix:Z[6],baseKey:"A",shape:[-1,0,2,2,2,2]},{suffix:Z[7],baseKey:"A",shape:[-1,0,2,0,2,0]},{suffix:Z.maj7,baseKey:"A",shape:[-1,0,2,1,2,0]},{suffix:Z.min7,baseKey:"A",shape:[-1,0,2,0,1,0]},{suffix:Z.mM7,baseKey:"A",shape:[-1,0,2,1,1,0]},{suffix:Z.maj,baseKey:"G",shape:[3,2,0,0,0,3]},{suffix:Z.min,baseKey:"G",shape:[3,1,0,0,-1,-1]},{suffix:Z.sus2,baseKey:"G",shape:[3,2,0,2,0,3]},{suffix:Z.sus4,baseKey:"G",shape:[3,2,0,0,1,3]},{suffix:Z[6],baseKey:"G",shape:[3,2,0,0,1,0]},{suffix:Z[7],baseKey:"G",shape:[3,2,0,0,0,1]},{suffix:Z.maj7,baseKey:"G",shape:[3,2,0,0,0,2]},{suffix:Z.maj,baseKey:"E",shape:[0,2,2,1,0,0]},{suffix:Z.min,baseKey:"E",shape:[0,2,2,0,0,0]},{suffix:Z.sus2,baseKey:"E",shape:[0,2,2,1,0,0]},{suffix:Z.sus4,baseKey:"E",shape:[0,2,4,1,0,0]},{suffix:Z.dim,baseKey:"E",shape:[0,1,2,0,4,0]},{suffix:Z.halfDim,baseKey:"E",shape:[0,1,0,0,3,0]},{suffix:Z.aug,baseKey:"E",shape:[0,3,2,1,1,0]},{suffix:Z[5],baseKey:"E",shape:[0,2,-1,-1,-1,-1]},{suffix:Z[6],baseKey:"E",shape:[0,2,2,1,2,0]},{suffix:Z[7],baseKey:"E",shape:[0,2,0,1,0,0]},{suffix:Z.maj7,baseKey:"E",shape:[0,2,1,1,0,0]},{suffix:Z.min7,baseKey:"E",shape:[0,2,0,0,0,0]},{suffix:Z.mM7,baseKey:"E",shape:[0,2,1,0,0,0]},{suffix:Z.maj,baseKey:"D",shape:[-1,-1,0,2,3,2]},{suffix:Z.min,baseKey:"D",shape:[-1,-1,0,2,3,1]},{suffix:Z.sus2,baseKey:"D",shape:[-1,-1,0,2,3,0]},{suffix:Z.sus4,baseKey:"D",shape:[-1,-1,0,2,3,3]},{suffix:Z.dim,baseKey:"D",shape:[-1,-1,0,1,3,1]},{suffix:Z.halfDim,baseKey:"D",shape:[-1,-1,0,1,1,1]},{suffix:Z.aug,baseKey:"D",shape:[-1,-1,0,3,3,2]},{suffix:Z[6],baseKey:"D",shape:[-1,-1,0,2,0,2]},{suffix:Z[7],baseKey:"D",shape:[-1,-1,0,2,1,2]},{suffix:Z.maj7,baseKey:"D",shape:[-1,-1,0,2,2,2]},{suffix:Z.min7,baseKey:"D",shape:[-1,-1,0,2,1,1]},{suffix:Z.mM7,baseKey:"D",shape:[-1,-1,0,2,2,1]}],getChords(r,t="maj"){return r.includes("b")&&(r=a1[r]),r?this.chordShapes.filter(e=>e.suffix.includes(t)).map(({baseKey:e,shape:n})=>{let s=hi.indexOf(r)-hi.indexOf(e);return s<0&&(s=hi.length+s),{baseFret:s,frets:s===0?n:n.map(i=>i>=0?i+1:i)}}).sort((e,n)=>(e.baseFret||0)-(n.baseFret||0)):[]}};function zo(r){let t,e,n=r[9].join(", ")+"",s;return{c(){t=pe("- "),e=Q("span"),s=pe(n),this.h()},l(i){t=be(i,"- "),e=J(i,"SPAN",{class:!0});var a=W(e);s=be(a,n),a.forEach(j),this.h()},h(){S(e,"class","text-gray-500")},m(i,a){Y(i,t,a),Y(i,e,a),z(e,s)},p(i,a){a&512&&n!==(n=i[9].join(", ")+"")&&Ze(s,n)},d(i){i&&(j(t),j(e))}}}function o1(r){let t,e='<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" viewBox="0 0 576 512"><path d="M320 224H416c17.67 0 32-14.33 32-32s-14.33-32-32-32h-95.1c-17.67 0-32 14.33-32 32S302.3 224 320 224zM320 352H480c17.67 0 32-14.33 32-32s-14.33-32-32-32h-159.1c-17.67 0-32 14.33-32 32S302.3 352 320 352zM320 96h32c17.67 0 31.1-14.33 31.1-32s-14.33-32-31.1-32h-32c-17.67 0-32 14.33-32 32S302.3 96 320 96zM544 416h-223.1c-17.67 0-32 14.33-32 32s14.33 32 32 32H544c17.67 0 32-14.33 32-32S561.7 416 544 416zM192.4 330.7L160 366.1V64.03C160 46.33 145.7 32 128 32S96 46.33 96 64.03v302L63.6 330.7c-6.312-6.883-14.94-10.38-23.61-10.38c-7.719 0-15.47 2.781-21.61 8.414c-13.03 11.95-13.9 32.22-1.969 45.27l87.1 96.09c12.12 13.26 35.06 13.26 47.19 0l87.1-96.09c11.94-13.05 11.06-33.31-1.969-45.27C224.6 316.8 204.4 317.7 192.4 330.7z"></path></svg>',n,s;return{c(){t=Q("button"),t.innerHTML=e,this.h()},l(i){t=J(i,"BUTTON",{class:!0,title:!0,["data-svelte-h"]:!0}),ir(t)!=="svelte-sdwfks"&&(t.innerHTML=e),this.h()},h(){S(t,"class","w-10 h-10 rounded bg-green-500 text-white p-3"),S(t,"title","Auto-scroll")},m(i,a){Y(i,t,a),n||(s=Ue(t,"click",r[21]),n=!0)},p:U,d(i){i&&j(t),n=!1,s()}}}function l1(r){let t,e,n,s,i,a,o,l,f,u,m='<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" viewBox="0 0 512 512"><path d="M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM352 328c0 13.2-10.8 24-24 24h-144C170.8 352 160 341.2 160 328v-144C160 170.8 170.8 160 184 160h144C341.2 160 352 170.8 352 184V328z"></path></svg>',d,y;return{c(){t=Q("button"),e=Le("svg"),n=Le("path"),i=je(),a=Q("b"),o=pe("x"),l=pe(r[2]),f=je(),u=Q("button"),u.innerHTML=m,this.h()},l($){t=J($,"BUTTON",{class:!0,title:!0});var _=W(t);e=Oe(_,"svg",{xmlns:!0,fill:!0,viewBox:!0});var P=W(e);n=Oe(P,"path",{d:!0}),W(n).forEach(j),P.forEach(j),_.forEach(j),i=Ie($),a=J($,"B",{class:!0});var k=W(a);o=be(k,"x"),l=be(k,r[2]),k.forEach(j),f=Ie($),u=J($,"BUTTON",{class:!0,title:!0,["data-svelte-h"]:!0}),ir(u)!=="svelte-f27xbg"&&(u.innerHTML=m),this.h()},h(){S(n,"d","M169.4 278.6C175.6 284.9 183.8 288 192 288s16.38-3.125 22.62-9.375l160-160c12.5-12.5 12.5-32.75 0-45.25s-32.75-12.5-45.25 0L192 210.8L54.63 73.38c-12.5-12.5-32.75-12.5-45.25 0s-12.5 32.75 0 45.25L169.4 278.6zM329.4 265.4L192 402.8L54.63 265.4c-12.5-12.5-32.75-12.5-45.25 0s-12.5 32.75 0 45.25l160 160C175.6 476.9 183.8 480 192 480s16.38-3.125 22.62-9.375l160-160c12.5-12.5 12.5-32.75 0-45.25S341.9 252.9 329.4 265.4z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","#fff"),S(e,"viewBox","0 0 384 512"),t.disabled=s=r[2]>=4,S(t,"class","w-10 h-10 rounded bg-green-500 text-white p-4"),S(t,"title","Speed Up"),S(a,"class","text-center"),S(u,"class","w-10 h-10 rounded bg-green-500 text-white p-3"),S(u,"title","Speed Up")},m($,_){Y($,t,_),z(t,e),z(e,n),Y($,i,_),Y($,a,_),z(a,o),z(a,l),Y($,f,_),Y($,u,_),d||(y=[Ue(t,"click",r[19]),Ue(u,"click",r[20])],d=!0)},p($,_){_&4&&s!==(s=$[2]>=4)&&(t.disabled=s),_&4&&Ze(l,$[2])},d($){$&&(j(t),j(i),j(a),j(f),j(u)),d=!1,Ns(y)}}}function c1(r){let t=!1,e=()=>{t=!1},n,s,i,a,o,l,f,u,m,d,y,$,_,P,k,E="♭",L,T,I,O,D,N,F="♯",V,q,H,me,ce,_e,Ee,xe;Ic(r[15]);let ie=r[9]&&zo(r);function Fe(ue,Se){return ue[2]>0?l1:o1}let Ke=Fe(r),De=Ke(r);function tt(ue){r[23](ue)}function gt(ue){r[24](ue)}let Tt={instrument:r[11],open:r[6]};return r[4]!==void 0&&(Tt.chordsInfo=r[4]),r[5]!==void 0&&(Tt.chordDisplay=r[5]),H=new i1({props:Tt}),_s.push(()=>Ka(H,"chordsInfo",tt)),_s.push(()=>Ka(H,"chordDisplay",gt)),H.$on("close",r[25]),{c(){s=Q("div"),i=Q("div"),a=Q("span"),o=pe(r[8]),l=je(),ie&&ie.c(),f=je(),u=Q("div"),m=Q("article"),d=Q("div"),y=new Lc(!1),$=je(),_=Q("div"),P=Q("div"),k=Q("button"),k.textContent=E,L=je(),T=Q("button"),I=pe(r[7]),D=je(),N=Q("button"),N.textContent=F,V=je(),De.c(),q=je(),ct(H.$$.fragment),this.h()},l(ue){s=J(ue,"DIV",{class:!0});var Se=W(s);i=J(Se,"DIV",{class:!0});var We=W(i);a=J(We,"SPAN",{class:!0});var jt=W(a);o=be(jt,r[8]),jt.forEach(j),l=Ie(We),ie&&ie.l(We),We.forEach(j),f=Ie(Se),u=J(Se,"DIV",{class:!0,style:!0});var bt=W(u);m=J(bt,"ARTICLE",{class:!0});var Ht=W(m);d=J(Ht,"DIV",{});var Yt=W(d);y=Oc(Yt,!1),Yt.forEach(j),Ht.forEach(j),$=Ie(bt),_=J(bt,"DIV",{class:!0});var xt=W(_);P=J(xt,"DIV",{class:!0});var rt=W(P);k=J(rt,"BUTTON",{class:!0,["data-svelte-h"]:!0}),ir(k)!=="svelte-xrnsp6"&&(k.textContent=E),L=Ie(rt),T=J(rt,"BUTTON",{class:!0});var yt=W(T);I=be(yt,r[7]),yt.forEach(j),D=Ie(rt),N=J(rt,"BUTTON",{class:!0,["data-svelte-h"]:!0}),ir(N)!=="svelte-13kg417"&&(N.textContent=F),V=Ie(rt),De.l(rt),rt.forEach(j),xt.forEach(j),bt.forEach(j),Se.forEach(j),q=Ie(ue),Et(H.$$.fragment,ue),this.h()},h(){S(a,"class","text-bold"),S(i,"class","p-2"),y.a=null,S(m,"class","grow"),S(k,"class","w-10 h-10 rounded bg-letkwet-500 text-white font-bold text-xl"),S(T,"class","w-10 h-10 rounded bg-gray-500 text-white font-bold text-xl"),T.disabled=O=r[7]==0,S(N,"class","w-10 h-10 rounded bg-letkwet-500 text-white font-bold text-xl"),S(P,"class","sticky top-2 gap-2 flex flex-col"),S(_,"class","pr-2"),S(u,"class","flex"),vs(u,"align-items","stretch"),S(s,"class","flex flex-col mt-4")},m(ue,Se){Y(ue,s,Se),z(s,i),z(i,a),z(a,o),z(i,l),ie&&ie.m(i,null),z(s,f),z(s,u),z(u,m),z(m,d),y.m(r[10],d),z(u,$),z(u,_),z(_,P),z(P,k),z(P,L),z(P,T),z(T,I),z(P,D),z(P,N),z(P,V),De.m(P,null),r[22](s),Y(ue,q,Se),ut(H,ue,Se),_e=!0,Ee||(xe=[Ue(window,"scroll",()=>{t=!0,clearTimeout(n),n=setTimeout(e,100),r[15]()}),Ue(m,"click",r[12]),Ue(k,"click",r[16]),Ue(T,"click",r[17]),Ue(N,"click",r[18])],Ee=!0)},p(ue,[Se]){Se&2&&!t&&(t=!0,clearTimeout(n),scrollTo(window.pageXOffset,ue[1]),n=setTimeout(e,100)),(!_e||Se&256)&&Ze(o,ue[8]),ue[9]?ie?ie.p(ue,Se):(ie=zo(ue),ie.c(),ie.m(i,null)):ie&&(ie.d(1),ie=null),(!_e||Se&1024)&&y.p(ue[10]),(!_e||Se&128)&&Ze(I,ue[7]),(!_e||Se&128&&O!==(O=ue[7]==0))&&(T.disabled=O),Ke===(Ke=Fe(ue))&&De?De.p(ue,Se):(De.d(1),De=Ke(ue),De&&(De.c(),De.m(P,null)));const We={};Se&64&&(We.open=ue[6]),!me&&Se&16&&(me=!0,We.chordsInfo=ue[4],Na(()=>me=!1)),!ce&&Se&32&&(ce=!0,We.chordDisplay=ue[5],Na(()=>ce=!1)),H.$set(We)},i(ue){_e||(he(H.$$.fragment,ue),_e=!0)},o(ue){ve(H.$$.fragment,ue),_e=!1},d(ue){ue&&(j(s),j(q)),ie&&ie.d(),De.d(),r[22](null),ft(H,ue),Ee=!1,Ns(xe)}}}const u1=/(([A-G][\#b]?)([A-Za-z\d\#\/\(\)]{0,9}))/m;function f1(r){const t=u1.exec(r);if(t){const[e,n,s,i]=t;return[s,i||""]}return[r,""]}function h1(r,t,e){let n,s;const{ChordProParser:i,HtmlDivFormatter:a}=Mh;let{song:o}=t,l=[],f,u=!1,m=0,d,y,$=0,_;const P=new i,k=new a;let E,L;const T=Bo.instrument,I={};function O(ie){const Fe=ie.target;if(Fe instanceof HTMLElement){if((Fe==null?void 0:Fe.className.split(" ").indexOf("chord"))<0)return;const Ke=Fe.innerText;if(I[Ke])e(4,l=I[Ke]),e(6,u=!0);else{const[De,tt]=f1(Ke);console.log(De,tt);const gt=Bo.getChords(De,tt);gt.length>0&&(e(4,l=gt),I[Ke]=gt,e(6,u=!0))}}}function D(){e(1,y=window.pageYOffset)}const N=()=>{e(3,n=n.transposeDown()),e(7,m--,m)},F=()=>{e(3,n=n.transpose(m*-1)),e(7,m=0)},V=()=>{e(3,n=n.transposeUp()),e(7,m++,m)},q=()=>e(2,$++,$),H=()=>e(2,$=0),me=()=>e(2,$++,$);function ce(ie){_s[ie?"unshift":"push"](()=>{d=ie,e(0,d)})}function _e(ie){l=ie,e(4,l)}function Ee(ie){f=ie,e(5,f)}const xe=()=>e(6,u=!1);return r.$$set=ie=>{"song"in ie&&e(13,o=ie.song)},r.$$.update=()=>{if(r.$$.dirty&8192&&o&&e(7,m=0),r.$$.dirty&8192&&e(3,n=P.parse(o)),r.$$.dirty&8&&n&&(e(8,E=n.title),n.artist===void 0||Array.isArray(n.artist)?e(9,L=n.artist):e(9,L=[n.artist])),r.$$.dirty&8&&e(10,s=k.format(n).replace(/<h1>.+<\/h1>/,"")),r.$$.dirty&16391)if($>0){_&&clearInterval(_);const ie=d.scrollHeight/(420-$*60)/5;e(14,_=setInterval(()=>{e(1,y+=ie),y>=d.scrollHeight&&clearInterval(_)},100))}else clearInterval(_)},[d,y,$,n,l,f,u,m,E,L,s,T,O,o,_,D,N,F,V,q,H,me,ce,_e,Ee,xe]}class m1 extends dt{constructor(t){super(),pt(this,t,h1,c1,mt,{song:13})}}function d1(r){let t,e,n={ctx:r,current:null,token:null,hasCatch:!1,pending:y1,then:b1,catch:p1,value:2,blocks:[,,,]};return vr(r[0],n),{c(){t=$e(),n.block.c()},l(s){t=$e(),n.block.l(s)},m(s,i){Y(s,t,i),n.block.m(s,n.anchor=i),n.mount=()=>t.parentNode,n.anchor=t,e=!0},p(s,i){r=s,Cn(n,r,i)},i(s){e||(he(n.block),e=!0)},o(s){for(let i=0;i<3;i+=1){const a=n.blocks[i];ve(a)}e=!1},d(s){s&&j(t),n.block.d(s),n.token=null,n=null}}}function p1(r){return{c:U,l:U,m:U,p:U,i:U,o:U,d:U}}function b1(r){let t,e,n=r[2]&&g1(r);return{c(){n&&n.c(),t=$e()},l(s){n&&n.l(s),t=$e()},m(s,i){n&&n.m(s,i),Y(s,t,i),e=!0},p(s,i){s[2]&&n.p(s,i)},i(s){e||(he(n),e=!0)},o(s){ve(n),e=!1},d(s){s&&j(t),n&&n.d(s)}}}function g1(r){let t,e;return t=new m1({props:{song:r[2].lyrics}}),{c(){ct(t.$$.fragment)},l(n){Et(t.$$.fragment,n)},m(n,s){ut(t,n,s),e=!0},p:U,i(n){e||(he(t.$$.fragment,n),e=!0)},o(n){ve(t.$$.fragment,n),e=!1},d(n){ft(t,n)}}}function y1(r){return{c:U,l:U,m:U,p:U,i:U,o:U,d:U}}function v1(r){let t,e,n=r[0]&&d1(r);return{c(){t=Q("div"),n&&n.c()},l(s){t=J(s,"DIV",{});var i=W(t);n&&n.l(i),i.forEach(j)},m(s,i){Y(s,t,i),n&&n.m(t,null),e=!0},p(s,[i]){s[0]&&n.p(s,i)},i(s){e||(he(n),e=!0)},o(s){ve(n),e=!1},d(s){s&&j(t),n&&n.d()}}}function _1(r,t,e){let{params:n={song:null}}=t;console.log(n);let s=n.song!==null?Cr.songs.get(n.song):null;return r.$$set=i=>{"params"in i&&e(1,n=i.params)},[s,n]}class $1 extends dt{constructor(t){super(),pt(this,t,_1,v1,mt,{params:1})}}function Vo(r,t,e){const n=r.slice();return n[3]=t[e],n}function w1(r){let t,e={ctx:r,current:null,token:null,hasCatch:!1,pending:C1,then:x1,catch:E1,value:2};return vr(r[0],e),{c(){t=$e(),e.block.c()},l(n){t=$e(),e.block.l(n)},m(n,s){Y(n,t,s),e.block.m(n,e.anchor=s),e.mount=()=>t.parentNode,e.anchor=t},p(n,s){r=n,Cn(e,r,s)},d(n){n&&j(t),e.block.d(n),e.token=null,e=null}}}function E1(r){return{c:U,l:U,m:U,p:U,d:U}}function x1(r){let t,e=r[2]&&k1(r);return{c(){e&&e.c(),t=$e()},l(n){e&&e.l(n),t=$e()},m(n,s){e&&e.m(n,s),Y(n,t,s)},p(n,s){n[2]&&e.p(n,s)},d(n){n&&j(t),e&&e.d(n)}}}function k1(r){let t,e=Ge(r[2]),n=[];for(let s=0;s<e.length;s+=1)n[s]=qo(Vo(r,e,s));return{c(){t=Q("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=J(s,"DIV",{class:!0});var i=W(t);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(j),this.h()},h(){S(t,"class","flex flex-col")},m(s,i){Y(s,t,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(s,i){if(i&1){e=Ge(s[2]);let a;for(a=0;a<e.length;a+=1){const o=Vo(s,e,a);n[a]?n[a].p(o,i):(n[a]=qo(o),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=e.length}},d(s){s&&j(t),Wt(n,s)}}}function qo(r){let t,e=r[3].title+"",n,s;return{c(){t=Q("a"),n=pe(e),s=je(),this.h()},l(i){t=J(i,"A",{href:!0,class:!0});var a=W(t);n=be(a,e),s=Ie(a),a.forEach(j),this.h()},h(){S(t,"href",`#/song/${r[3].key}`),S(t,"class","border-t-2 py-4")},m(i,a){Y(i,t,a),z(t,n),z(t,s)},p:U,d(i){i&&j(t)}}}function C1(r){return{c:U,l:U,m:U,p:U,d:U}}function S1(r){let t,e=r[0]&&w1(r);return{c(){t=Q("div"),e&&e.c()},l(n){t=J(n,"DIV",{});var s=W(t);e&&e.l(s),s.forEach(j)},m(n,s){Y(n,t,s),e&&e.m(t,null)},p(n,[s]){n[0]&&e.p(n,s)},i:U,o:U,d(n){n&&j(t),e&&e.d()}}}function A1(r,t,e){let{params:n={artist:null}}=t;console.log(n);let s=n.artist!==null?Cr.songs.where("artists").equalsIgnoreCase(n.artist).toArray():null;return r.$$set=i=>{"params"in i&&e(1,n=i.params)},[s,n]}class P1 extends dt{constructor(t){super(),pt(this,t,A1,S1,mt,{params:1})}}function T1(r){let t,e="Please search by song title or artist.";return{c(){t=Q("div"),t.textContent=e,this.h()},l(n){t=J(n,"DIV",{class:!0,["data-svelte-h"]:!0}),ir(t)!=="svelte-1tqph8g"&&(t.textContent=e),this.h()},h(){S(t,"class","h-40 px-4 py-10 text-gray-400")},m(n,s){Y(n,t,s)},p:U,i:U,o:U,d(n){n&&j(t)}}}class j1 extends dt{constructor(t){super(),pt(this,t,null,T1,mt,{})}}function I1(r){let t,e=r[6].message+"",n;return{c(){t=pe("Error while loading song db: "),n=pe(e)},l(s){t=be(s,"Error while loading song db: "),n=be(s,e)},m(s,i){Y(s,t,i),Y(s,n,i)},p:U,i:U,o:U,d(s){s&&(j(t),j(n))}}}function L1(r){let t,e;return t=new Nu({props:{routes:r[1]}}),{c(){ct(t.$$.fragment)},l(n){Et(t.$$.fragment,n)},m(n,s){ut(t,n,s),e=!0},p:U,i(n){e||(he(t.$$.fragment,n),e=!0)},o(n){ve(t.$$.fragment,n),e=!1},d(n){ft(t,n)}}}function O1(r){let t;return{c(){t=pe("Loading song database please wait.")},l(e){t=be(e,"Loading song database please wait.")},m(e,n){Y(e,t,n)},p:U,i:U,o:U,d(e){e&&j(t)}}}function D1(r){let t,e,n,s,i,a,o,l,f,u,m,d,y,$,_,P;m=new Xu({props:{query:r[0]}}),m.$on("selected",r[4]);let k={ctx:r,current:null,token:null,hasCatch:!0,pending:O1,then:L1,catch:I1,value:5,error:6,blocks:[,,,]};return vr(r[2],k),{c(){t=Q("main"),e=Q("nav"),n=Q("div"),s=Q("a"),i=Q("img"),o=je(),l=Q("div"),f=Q("input"),u=je(),ct(m.$$.fragment),d=je(),y=Q("div"),k.block.c(),this.h()},l(E){t=J(E,"MAIN",{class:!0});var L=W(t);e=J(L,"NAV",{});var T=W(e);n=J(T,"DIV",{class:!0});var I=W(n);s=J(I,"A",{href:!0});var O=W(s);i=J(O,"IMG",{src:!0,class:!0,alt:!0}),O.forEach(j),o=Ie(I),l=J(I,"DIV",{class:!0});var D=W(l);f=J(D,"INPUT",{placeholder:!0,class:!0,accept:!0}),D.forEach(j),I.forEach(j),T.forEach(j),u=Ie(L),Et(m.$$.fragment,L),d=Ie(L),y=J(L,"DIV",{});var N=W(y);k.block.l(N),N.forEach(j),L.forEach(j),this.h()},h(){Dc(i.src,a=us+"/letkwet.svg")||S(i,"src",a),S(i,"class","w-8"),S(i,"alt","Letkwet"),S(s,"href","/"),S(f,"placeholder","Search songs or artists"),S(f,"class","w-20 border rounded p-2 w-full"),S(f,"accept",".cho,.chopro,.chord"),S(l,"class","grow"),S(n,"class","flex gap-10 p-2 items-center"),S(t,"class","max-w-lg mx-auto")},m(E,L){Y(E,t,L),z(t,e),z(e,n),z(n,s),z(s,i),z(n,o),z(n,l),z(l,f),Fa(f,r[0]),z(t,u),ut(m,t,null),z(t,d),z(t,y),k.block.m(y,k.anchor=null),k.mount=()=>y,k.anchor=null,$=!0,_||(P=Ue(f,"input",r[3]),_=!0)},p(E,[L]){r=E,L&1&&f.value!==r[0]&&Fa(f,r[0]);const T={};L&1&&(T.query=r[0]),m.$set(T),Cn(k,r,L)},i(E){$||(he(m.$$.fragment,E),he(k.block),$=!0)},o(E){ve(m.$$.fragment,E);for(let L=0;L<3;L+=1){const T=k.blocks[L];ve(T)}$=!1},d(E){E&&j(t),ft(m),k.block.d(),k.token=null,k=null,_=!1,P()}}}function M1(r,t,e){const n={"/":j1,"/artist/:artist":P1,"/song/:song":$1};let s=Cr._meta.limit(1).first().then(async l=>{if(l){const f=await fetch(`${us}/songs.json`,{method:"HEAD"});if(f.status===200){const u=f.headers.get("Last-Modified"),m=u?Date.parse(u):0;if(l.last_modified<m){const d=await fetch(`${us}/songs.json`),{songs:y}=await d.json();return Cr.updateSongs(y,m)}}}else{const f=await fetch(`${us}/songs.json`);if(f.status===200){const u=f.headers.get("Last-Modified"),m=u?Date.parse(u):0,{songs:d}=await f.json();return Cr.updateSongs(d,m)}}}),i="";function a(){i=this.value,e(0,i)}const o=()=>e(0,i="");return r.$$.update=()=>{r.$$.dirty&1&&console.log(i)},[i,n,s,a,o]}class z1 extends dt{constructor(t){super(),pt(this,t,M1,D1,mt,{})}}export{z1 as component};
